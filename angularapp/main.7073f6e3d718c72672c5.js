(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(n)return null;throw o}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.e)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.instanceIdentifier,o=t.options,a=void 0===o?{}:o,u=this.normalizeInstanceIdentifier(void 0===i?s:i);if(this.isInitialized(u))throw Error(this.name+"("+u+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:u,options:a});try{for(var l=Object(r.g)(this.instancesDeferred.entries()),h=l.next();!h.done;h=l.next()){var f=Object(r.e)(h.value,2),d=f[1];u===this.normalizeInstanceIdentifier(f[0])&&d.resolve(c)}}catch(p){e={error:p}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(c,u),c},t.prototype.onInit=function(t){var e=this;return this.onInitCallbacks.add(t),function(){e.onInitCallbacks.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i;try{for(var o=Object(r.g)(this.onInitCallbacks),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(u){}}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=n("3N8a");const i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EQ5u:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u});var r=n("XNiG"),i=n("HDdC"),o=(n("7o/Q"),n("quSY")),s=n("x+ZX");class a extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.a,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.a.EMPTY)),t}refCount(){return Object(s.a)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.6.1","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return nn}),n.d(e,"b",function(){return Ja}),n.d(e,"c",function(){return $a}),n.d(e,"d",function(){return Ka}),n.d(e,"e",function(){return Wa}),n.d(e,"f",function(){return Ku}),n.d(e,"g",function(){return Mu}),n.d(e,"h",function(){return Js}),n.d(e,"i",function(){return lu}),n.d(e,"j",function(){return Cs}),n.d(e,"k",function(){return nu}),n.d(e,"l",function(){return Is}),n.d(e,"m",function(){return gr}),n.d(e,"n",function(){return Aa}),n.d(e,"o",function(){return Zi}),n.d(e,"p",function(){return On}),n.d(e,"q",function(){return N}),n.d(e,"r",function(){return en}),n.d(e,"s",function(){return go}),n.d(e,"t",function(){return Ks}),n.d(e,"u",function(){return $s}),n.d(e,"v",function(){return eu}),n.d(e,"w",function(){return la}),n.d(e,"x",function(){return Vu}),n.d(e,"y",function(){return ca}),n.d(e,"z",function(){return Nu}),n.d(e,"A",function(){return du}),n.d(e,"B",function(){return Cn}),n.d(e,"C",function(){return Za}),n.d(e,"D",function(){return Ya}),n.d(e,"E",function(){return ks}),n.d(e,"F",function(){return As}),n.d(e,"G",function(){return wr}),n.d(e,"H",function(){return Rs}),n.d(e,"I",function(){return lr}),n.d(e,"J",function(){return En}),n.d(e,"K",function(){return qu}),n.d(e,"L",function(){return oa}),n.d(e,"M",function(){return wu}),n.d(e,"N",function(){return rn}),n.d(e,"O",function(){return Ds}),n.d(e,"P",function(){return js}),n.d(e,"Q",function(){return fa}),n.d(e,"R",function(){return L}),n.d(e,"S",function(){return Ru}),n.d(e,"T",function(){return Au}),n.d(e,"U",function(){return g}),n.d(e,"V",function(){return xu}),n.d(e,"W",function(){return zu}),n.d(e,"X",function(){return Cu}),n.d(e,"Y",function(){return tu}),n.d(e,"Z",function(){return to}),n.d(e,"ab",function(){return cs}),n.d(e,"bb",function(){return ur}),n.d(e,"cb",function(){return Gn}),n.d(e,"db",function(){return Dn}),n.d(e,"eb",function(){return Mn}),n.d(e,"fb",function(){return Fn}),n.d(e,"gb",function(){return Vn}),n.d(e,"hb",function(){return Ln}),n.d(e,"ib",function(){return Un}),n.d(e,"jb",function(){return os}),n.d(e,"kb",function(){return Hu}),n.d(e,"lb",function(){return ss}),n.d(e,"mb",function(){return as}),n.d(e,"nb",function(){return Pn}),n.d(e,"ob",function(){return B}),n.d(e,"pb",function(){return Eo}),n.d(e,"qb",function(){return Uo}),n.d(e,"rb",function(){return Lo}),n.d(e,"sb",function(){return Vo}),n.d(e,"tb",function(){return is}),n.d(e,"ub",function(){return It}),n.d(e,"vb",function(){return f}),n.d(e,"wb",function(){return jn}),n.d(e,"xb",function(){return yo}),n.d(e,"yb",function(){return _t}),n.d(e,"zb",function(){return ws}),n.d(e,"Ab",function(){return ri}),n.d(e,"Bb",function(){return xo}),n.d(e,"Cb",function(){return Ko}),n.d(e,"Db",function(){return Ba}),n.d(e,"Eb",function(){return tt}),n.d(e,"Fb",function(){return at}),n.d(e,"Gb",function(){return O}),n.d(e,"Hb",function(){return C}),n.d(e,"Ib",function(){return it}),n.d(e,"Jb",function(){return ut}),n.d(e,"Kb",function(){return ko}),n.d(e,"Lb",function(){return Po}),n.d(e,"Mb",function(){return Do}),n.d(e,"Nb",function(){return jo}),n.d(e,"Ob",function(){return Mo}),n.d(e,"Pb",function(){return Xe}),n.d(e,"Qb",function(){return ts}),n.d(e,"Rb",function(){return vn}),n.d(e,"Sb",function(){return Ze}),n.d(e,"Tb",function(){return Ga}),n.d(e,"Ub",function(){return Fo}),n.d(e,"Vb",function(){return Ha}),n.d(e,"Wb",function(){return Ho}),n.d(e,"Xb",function(){return No}),n.d(e,"Yb",function(){return Ia}),n.d(e,"Zb",function(){return qa}),n.d(e,"ac",function(){return br}),n.d(e,"bc",function(){return Gt}),n.d(e,"cc",function(){return hr}),n.d(e,"dc",function(){return ot}),n.d(e,"ec",function(){return Ao}),n.d(e,"fc",function(){return Yo}),n.d(e,"gc",function(){return Zo}),n.d(e,"hc",function(){return Jo});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("EQ5u"),u=n("x+ZX");function c(){return new r.a}function l(t){for(let e in t)if(t[e]===l)return e;throw Error("Could not find renamed property on target object.")}function h(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function f(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(f).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function d(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const p=l({__forward_ref__:l});function g(t){return t.__forward_ref__=g,t.toString=function(){return f(this())},t}function m(t){return y(t)?t():t}function y(t){return"function"==typeof t&&t.hasOwnProperty(p)&&t.__forward_ref__===g}class b extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function v(t){return"string"==typeof t?t:null==t?"":String(t)}function w(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():v(t)}function _(t,e){const n=e?` in ${e}`:"";throw new b("201",`No provider for ${w(t)} found${n}`)}function O(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function C(t){return{providers:t.providers||[],imports:t.imports||[]}}function E(t){return S(t,I)||S(t,A)}function S(t,e){return t.hasOwnProperty(e)?t[e]:null}function T(t){return t&&(t.hasOwnProperty(x)||t.hasOwnProperty(k))?t[x]:null}const I=l({"\u0275prov":l}),x=l({"\u0275inj":l}),A=l({ngInjectableDef:l}),k=l({ngInjectorDef:l});var N=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let R;function j(t){const e=R;return R=t,e}function D(t,e,n){const r=E(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&N.Optional?null:void 0!==e?e:void _(f(t),"Injector")}function P(t){return{toString:t}.toString()}var M=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),L=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const V="undefined"!=typeof globalThis&&globalThis,U="undefined"!=typeof window&&window,F="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,q="undefined"!=typeof global&&global,B=V||q||U||F,H={},z=[],G=[],K=l({"\u0275cmp":l}),W=l({"\u0275dir":l}),$=l({"\u0275pipe":l}),Q=l({"\u0275mod":l}),X=l({"\u0275loc":l}),Y=l({"\u0275fac":l}),Z=l({__NG_ELEMENT_ID__:l});let J=0;function tt(t){return P(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===M.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||G,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||L.Emulated,id:"c",styles:t.styles||G,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=J++,n.inputs=st(t.inputs,e),n.outputs=st(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(et):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(nt):null,n})}function et(t){return ct(t)||function(t){return t[W]||null}(t)}function nt(t){return function(t){return t[$]||null}(t)}const rt={};function it(t){const e={type:t.type,bootstrap:t.bootstrap||G,declarations:t.declarations||G,imports:t.imports||G,exports:t.exports||G,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&P(()=>{rt[t.id]=t.type}),e}function ot(t,e){return P(()=>{const n=lt(t,!0);n.declarations=e.declarations||G,n.imports=e.imports||G,n.exports=e.exports||G})}function st(t,e){if(null==t)return H;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const at=tt;function ut(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ct(t){return t[K]||null}function lt(t,e){const n=t[Q]||null;if(!n&&!0===e)throw new Error(`Type ${f(t)} does not have '\u0275mod' property.`);return n}const ht=20,ft=10;function dt(t){return Array.isArray(t)&&"object"==typeof t[1]}function pt(t){return Array.isArray(t)&&!0===t[1]}function gt(t){return 0!=(8&t.flags)}function mt(t){return 2==(2&t.flags)}function yt(t){return 1==(1&t.flags)}function bt(t){return null!==t.template}function vt(t,e){return t.hasOwnProperty(Y)?t[Y]:null}class wt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function _t(){return Ot}function Ot(t){return t.type.prototype.ngOnChanges&&(t.setInput=Et),Ct}function Ct(){const t=St(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===H)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Et(t,e,n,r){const i=St(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:H,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new wt(u&&u.currentValue,e,s===H),t[r]=e}function St(t){return t.__ngSimpleChanges__||null}let Tt;function It(t){Tt=t}function xt(t){return!!t.listen}_t.ngInherit=!0;const At={createRenderer:(t,e)=>void 0!==Tt?Tt:"undefined"!=typeof document?document:void 0};function kt(t){for(;Array.isArray(t);)t=t[0];return t}function Nt(t,e){return kt(e[t])}function Rt(t,e){return kt(e[t.index])}function jt(t,e){return t.data[e]}function Dt(t,e){const n=e[t];return dt(n)?n:n[0]}function Pt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Mt(t){return 4==(4&t[2])}function Lt(t){return 128==(128&t[2])}function Vt(t,e){return null==e?null:t[e]}function Ut(t){t[18]=0}function Ft(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const qt={lFrame:ue(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Bt(){return qt.bindingsEnabled}function Ht(){return qt.lFrame.lView}function zt(){return qt.lFrame.tView}function Gt(t){qt.lFrame.contextLView=t}function Kt(){let t=Wt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Wt(){return qt.lFrame.currentTNode}function $t(t,e){const n=qt.lFrame;n.currentTNode=t,n.isParent=e}function Qt(){return qt.lFrame.isParent}function Xt(){return qt.isInCheckNoChangesMode}function Yt(t){qt.isInCheckNoChangesMode=t}function Zt(){return qt.lFrame.bindingIndex++}function Jt(t){const e=qt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function te(t,e){const n=qt.lFrame;n.bindingIndex=n.bindingRootIndex=t,ee(e)}function ee(t){qt.lFrame.currentDirectiveIndex=t}function ne(){return qt.lFrame.currentQueryIndex}function re(t){qt.lFrame.currentQueryIndex=t}function ie(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function oe(t,e,n){if(n&N.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&N.Host||(r=ie(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=qt.lFrame=ae();return r.currentTNode=e,r.lView=t,!0}function se(t){const e=ae(),n=t[1];qt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ae(){const t=qt.lFrame,e=null===t?null:t.child;return null===e?ue(t):e}function ue(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ce(){const t=qt.lFrame;return qt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const le=ce;function he(){const t=ce();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function fe(){return qt.lFrame.selectedIndex}function de(t){qt.lFrame.selectedIndex=t}function pe(){const t=qt.lFrame;return jt(t.tView,t.selectedIndex)}function ge(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function me(t,e,n){ve(t,e,3,n)}function ye(t,e,n,r){(3&t[2])===n&&ve(t,e,n,r)}function be(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function ve(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(we(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function we(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}const _e=-1;class Oe{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Ce(t,e,n){const r=xt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Se(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Ee(t){return 3===t||4===t||6===t}function Se(t){return 64===t.charCodeAt(0)}function Te(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ie(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ie(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function xe(t){return t!==_e}function Ae(t){return 32767&t}function ke(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Ne=!0;function Re(t){const e=Ne;return Ne=t,e}let je=0;function De(t,e){const n=Me(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Pe(r.data,t),Pe(e,null),Pe(r.blueprint,null));const i=Le(t,e),o=t.injectorIndex;if(xe(i)){const t=Ae(i),n=ke(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Pe(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Me(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Le(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return _e;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return _e}function Ve(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Z)&&(r=n[Z]),null==r&&(r=n[Z]=je++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Ue(t,e,n){if(n&N.Optional)return t;_(e,"NodeInjector")}function Fe(t,e,n,r){if(n&N.Optional&&void 0===r&&(r=null),0==(n&(N.Self|N.Host))){const i=t[9],o=j(void 0);try{return i?i.get(e,r,n&N.Optional):D(e,r,n&N.Optional)}finally{j(o)}}return Ue(r,e,n)}function qe(t,e,n,r=N.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Z)?t[Z]:void 0;return"number"==typeof e?e>=0?255&e:He:e}(n);if("function"==typeof o){if(!oe(e,t,r))return r&N.Host?Ue(i,n,r):Fe(e,n,r,i);try{const t=o();if(null!=t||r&N.Optional)return t;_(n)}finally{le()}}else if("number"==typeof o){let i=null,s=Me(t,e),a=_e,u=r&N.Host?e[16][6]:null;for((-1===s||r&N.SkipSelf)&&(a=-1===s?Le(t,e):e[s+8],a!==_e&&$e(r,!1)?(i=e[1],s=Ae(a),e=ke(a,e)):s=-1);-1!==s;){const t=e[1];if(We(o,s,t.data)){const t=ze(s,e,n,i,r,u);if(t!==Be)return t}a=e[s+8],a!==_e&&$e(r,e[1].data[s+8]===u)&&We(o,s,e)?(i=t,s=Ae(a),e=ke(a,e)):s=-1}}}return Fe(e,n,r,i)}const Be={};function He(){return new Qe(Kt(),Ht())}function ze(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=Ge(a,s,n,null==r?mt(a)&&Ne:r!=s&&0!=(3&a.type),i&N.Host&&o===a);return null!==u?Ke(e,s,u,a):Be}function Ge(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&bt(t)&&t.type===n)return u}return null}function Ke(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Oe){const s=i;s.resolving&&function(t,e){throw new b("200",`Circular dependency in DI detected for ${t}`)}(w(o[n]));const a=Re(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?j(s.injectImpl):null;oe(t,r,N.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=Ot(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&j(u),Re(a),s.resolving=!1,le()}}return i}function We(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function $e(t,e){return!(t&N.Self||t&N.Host&&e)}class Qe{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return qe(this._tNode,this._lView,t,void 0,e)}}function Xe(t){return P(()=>{const e=t.prototype.constructor,n=e[Y]||Ye(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[Y]||Ye(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Ye(t){return y(t)?()=>{const e=Ye(m(t));return e&&e()}:vt(t)}function Ze(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Ee(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Kt(),t)}const Je="__parameters__";function tn(t,e,n){return P(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(Je)?t[Je]:Object.defineProperty(t,Je,{value:[]})[Je];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class en{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=O({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const nn=new en("AnalyzeForEntryComponents"),rn=Function;function on(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),on(r,e)):e!==t&&e.push(r)}return e}function sn(t,e){t.forEach(t=>Array.isArray(t)?sn(t,e):e(t))}function an(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function un(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function cn(t,e,n){let r=hn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function ln(t,e){const n=hn(t,e);if(n>=0)return t[1|n]}function hn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const fn={},dn=/\n/gm,pn="__source",gn=l({provide:String,useValue:l});let mn;function yn(t){const e=mn;return mn=t,e}function bn(t,e=N.Default){if(void 0===mn)throw new Error("inject() must be called from an injection context");return null===mn?D(t,void 0,e):mn.get(t,e&N.Optional?null:void 0,e)}function vn(t,e=N.Default){return(R||bn)(m(t),e)}function wn(t){const e=[];for(let n=0;n<t.length;n++){const r=m(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=N.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(vn(t,n))}else e.push(vn(r))}return e}function _n(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const On=_n(tn("Inject",t=>({token:t})),-1),Cn=_n(tn("Optional"),8),En=_n(tn("SkipSelf"),4);let Sn;function Tn(t){var e;return(null===(e=function(){if(void 0===Sn&&(Sn=null,B.trustedTypes))try{Sn=B.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Sn}())||void 0===e?void 0:e.createHTML(t))||t}class In{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class xn extends In{getTypeName(){return"HTML"}}class An extends In{getTypeName(){return"Style"}}class kn extends In{getTypeName(){return"Script"}}class Nn extends In{getTypeName(){return"URL"}}class Rn extends In{getTypeName(){return"ResourceURL"}}function jn(t){return t instanceof In?t.changingThisBreaksApplicationSecurity:t}function Dn(t,e){const n=Pn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Pn(t){return t instanceof In&&t.getTypeName()||null}function Mn(t){return new xn(t)}function Ln(t){return new An(t)}function Vn(t){return new kn(t)}function Un(t){return new Nn(t)}function Fn(t){return new Rn(t)}class qn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Tn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Bn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Tn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Tn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Hn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,zn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Gn(t){return(t=String(t)).match(Hn)||t.match(zn)?t:"unsafe:"+t}function Kn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Wn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const $n=Kn("area,br,col,hr,img,wbr"),Qn=Kn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Xn=Kn("rp,rt"),Yn=Wn(Xn,Qn),Zn=Wn($n,Wn(Qn,Kn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Wn(Xn,Kn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Yn),Jn=Kn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),tr=Kn("srcset"),er=Wn(Jn,tr,Kn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Kn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),nr=Kn("script,style,template");class rr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Zn.hasOwnProperty(e))return this.sanitizedSomething=!0,!nr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!er.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Jn[o]&&(s=Gn(s)),tr[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Gn(t.trim())).join(", ")),this.buf.push(" ",e,'="',sr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Zn.hasOwnProperty(e)&&!$n.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(sr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const ir=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,or=/([^\#-~ |!])/g;function sr(t){return t.replace(/&/g,"&amp;").replace(ir,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(or,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ar;function ur(t,e){let n=null;try{ar=ar||function(t){const e=new Bn(t);return function(){try{return!!(new window.DOMParser).parseFromString(Tn(""),"text/html")}catch(t){return!1}}()?new qn(e):e}(t);let r=e?String(e):"";n=ar.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=ar.getInertBodyElement(r)}while(r!==o);return Tn((new rr).sanitizeChildren(cr(n)||n))}finally{if(n){const t=cr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function cr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var lr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function hr(t){const e=function(){const t=Ht();return t&&t[12]}();return e?e.sanitize(lr.URL,t)||"":Dn(t,"URL")?jn(t):Gn(v(t))}function fr(t){return t.ngDebugContext}function dr(t){return t.ngOriginalError}function pr(t,...e){t.error(...e)}class gr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||pr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?fr(t)?fr(t):this._findContext(dr(t)):null}_findOriginalError(t){let e=dr(t);for(;e&&dr(e);)e=dr(e);return e}}function mr(t,e){t.__ngContext__=e}const yr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(B))();function br(t){return{name:"document",target:t.ownerDocument}}function vr(t){return t instanceof Function?t():t}var wr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function _r(t,e){return(void 0)(t,e)}function Or(t){const e=t[3];return pt(e)?e[3]:e}function Cr(t){return Sr(t[13])}function Er(t){return Sr(t[4])}function Sr(t){for(;null!==t&&!pt(t);)t=t[4];return t}function Tr(t,e,n,r,i){if(null!=r){let o,s=!1;pt(r)?o=r:dt(r)&&(s=!0,r=r[0]);const a=kt(r);0===t&&null!==n?null==i?jr(e,n,a):Rr(e,n,a,i||null,!0):1===t&&null!==n?Rr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Pr(t,e);r&&function(t,e,n,r){xt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==kt(n)&&Tr(e,t,r,o,i);for(let s=ft;s<n.length;s++){const i=n[s];qr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Ir(t,e,n){return xt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function xr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ft(i,-1)),n.splice(r,1)}function Ar(t,e){if(t.length<=ft)return;const n=ft+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&xr(o,r),e>0&&(t[n-1][4]=r[4]);const s=un(t,ft+e);qr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function kr(t,e){if(!(256&e[2])){const n=e[11];xt(n)&&n.destroyNode&&qr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Nr(t[1],t);for(;e;){let n=null;if(dt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)dt(e)&&Nr(e[1],e),e=e[3];null===e&&(e=t),dt(e)&&Nr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Nr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Oe)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):kt(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&xt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&pt(e[3])){n!==e[3]&&xr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Rr(t,e,n,r,i){xt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function jr(t,e,n){xt(t)?t.appendChild(e,n):e.appendChild(n)}function Dr(t,e,n,r,i){null!==r?Rr(t,e,n,r,i):jr(t,e,n)}function Pr(t,e){return xt(t)?t.parentNode(e):e.parentNode}function Mr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===L.None||e===L.Emulated)return null}return Rt(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?Rt(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Dr(o,i,n[a],s,!1);else Dr(o,i,n,s,!1)}function Lr(t,e){if(null!==e){const n=e.type;if(3&n)return Rt(e,t);if(4&n)return Ur(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Lr(t,n);{const n=t[e.index];return pt(n)?Ur(-1,n):kt(n)}}if(32&n)return _r(e,t)()||kt(t[e.index]);{const n=Vr(t,e);return null!==n?Array.isArray(n)?n[0]:Lr(Or(t[16]),n):Lr(t,e.next)}}return null}function Vr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Ur(t,e){const n=ft+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Lr(t,r)}return e[7]}function Fr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&mr(kt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Fr(t,e,n.child,r,i,o,!1),Tr(e,t,i,a,o);else if(32&u){const s=_r(n,r);let u;for(;u=s();)Tr(e,t,i,u,o);Tr(e,t,i,a,o)}else 16&u?Br(t,e,r,n,i,o):Tr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function qr(t,e,n,r,i,o){Fr(n,r,t.firstChild,e,i,o,!1)}function Br(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Tr(e,t,i,a[u],o);else Fr(t,e,a,s[3],i,o,!0)}function Hr(t,e,n){xt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function zr(t,e,n){xt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Gr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Kr="ng-template";function Wr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Gr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function $r(t){return 4===t.type&&t.value!==Kr}function Qr(t,e,n){return e===(4!==t.type||n?t.value:Kr)}function Xr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Ee(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Qr(t,u,n)||""===u&&1===e.length){if(Yr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Wr(t.attrs,c,n)){if(Yr(r))return!1;s=!0}continue}const l=Zr(8&r?"class":u,i,$r(t),n);if(-1===l){if(Yr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Gr(e,c,0)||2&r&&c!==t){if(Yr(r))return!1;s=!0}}}}else{if(!s&&!Yr(r)&&!Yr(u))return!1;if(s&&Yr(u))continue;s=!1,r=u|1&r}}return Yr(r)||s}function Yr(t){return 0==(1&t)}function Zr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Jr(t,e,n=!1){for(let r=0;r<e.length;r++)if(Xr(t,e[r],n))return!0;return!1}function ti(t,e){return t?":not("+e.trim()+")":e}function ei(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Yr(s)||(e+=ti(o,i),i=""),r=s,o=o||!Yr(r);n++}return""!==i&&(e+=ti(o,i)),e}const ni={};function ri(t){ii(zt(),Ht(),fe()+t,Xt())}function ii(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&me(e,r,n)}else{const r=t.preOrderHooks;null!==r&&ye(e,r,0,n)}de(n)}function oi(t,e){return t<<17|e<<2}function si(t){return t>>17&32767}function ai(t){return 2|t}function ui(t){return(131068&t)>>2}function ci(t,e){return-131069&t|e<<2}function li(t){return 1|t}function hi(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];re(i),n.contentQueries(2,e[o],o)}}}function fi(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Ut(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function di(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Wt(),s=Qt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),qt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=qt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return $t(o,!0),o}function pi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function gi(t,e,n){se(e);try{const r=t.viewQuery;null!==r&&zi(1,r,n);const i=t.template;null!==i&&bi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&hi(t,e),t.staticViewQueries&&zi(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Ui(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,he()}}function mi(t,e,n,r){const i=e[2];if(256==(256&i))return;se(e);const o=Xt();try{Ut(e),qt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&bi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&me(e,n,null)}else{const n=t.preOrderHooks;null!==n&&ye(e,n,0,null),be(e,0)}if(function(t){for(let e=Cr(t);null!==e;e=Er(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ft(r,1),n[2]|=1024}}}(e),function(t){for(let e=Cr(t);null!==e;e=Er(e))for(let t=ft;t<e.length;t++){const n=e[t],r=n[1];Lt(n)&&mi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&hi(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&me(e,n)}else{const n=t.contentHooks;null!==n&&ye(e,n,1),be(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)de(~r);else{const i=r,o=n[++t],s=n[++t];te(o,i),s(2,e[i])}}}finally{de(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Li(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&zi(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&me(e,n)}else{const n=t.viewHooks;null!==n&&ye(e,n,2),be(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ft(e[3],-1))}finally{he()}}function yi(t,e,n,r){const i=e[10],o=!Xt(),s=Mt(e);try{o&&!s&&i.begin&&i.begin(),s&&gi(t,e,r),mi(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function bi(t,e,n,r,i){const o=fe(),s=2&r;try{de(-1),s&&e.length>ht&&ii(t,e,ht,Xt()),n(r,i)}finally{de(o)}}function vi(t,e,n){Bt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||De(n,e),mr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=bt(r);o&&ji(e,n,r);const u=Ke(e,t,a,n);mr(u,e),null!==s&&Di(0,a-i,u,r,0,s),o&&(Dt(n.index,e)[8]=u)}}(t,e,n,Rt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=qt.lFrame.currentDirectiveIndex;try{de(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];ee(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||xi(r,i)}}finally{de(-1),ee(s)}}(t,e,n))}function wi(t,e,n=Rt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function _i(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Oi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Oi(t,e,n,r,i,o,s,a,u,c){const l=ht+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ni);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function Ci(t,e,n,r){const i=Ki(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Wi(t).push(r,i.length-1))}function Ei(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Si(t,e,n,r,i,o,s,a){const u=Rt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Qi(t,n,c,r,i),mt(e)&&function(t,e){const n=Dt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,xt(o)?o.setProperty(u,r,i):Se(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Ti(t,e,n,r){let i=!1;if(Bt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Jr(n,s.selectors,!1)&&(i||(i=[]),Ve(De(n,e),t,s.type),bt(s)?(Ai(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Ni(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=pi(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Te(n.mergedAttrs,c.hostAttrs),Ri(t,n,e,u,c),ki(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||$r(e)?null:Pi(n,i);o.push(c),s=Ei(n,u,s),a=Ei(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new b("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Te(n.mergedAttrs,n.attrs),i}function Ii(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function xi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Ai(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function ki(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;bt(e)&&(n[""]=t)}}function Ni(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Ri(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=vt(i.type)),s=new Oe(o,bt(i),null);t.blueprint[r]=s,n[r]=s,Ii(t,e,0,r,pi(t,n,i.hostVars,ni),i)}function ji(t,e,n){const r=Rt(e,t),i=_i(n),o=t[10],s=Fi(t,fi(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Di(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Pi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Mi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Li(t,e){const n=Dt(e,t);if(Lt(n)){const t=n[1];80&n[2]?mi(t,n,t.template,n[8]):n[5]>0&&Vi(n)}}function Vi(t){for(let n=Cr(t);null!==n;n=Er(n))for(let t=ft;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];mi(t,e,t.template,e[8])}else e[5]>0&&Vi(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Dt(e[n],t);Lt(r)&&r[5]>0&&Vi(r)}}function Ui(t,e){const n=Dt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),gi(r,n,n[8])}function Fi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function qi(t){for(;t;){t[2]|=64;const e=Or(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Bi(t,e,n){const r=e[10];r.begin&&r.begin();try{mi(t,e,t.template,n)}catch(i){throw $i(e,i),i}finally{r.end&&r.end()}}function Hi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Pt(n),i=r[1];yi(i,r,i.template,n)}}(t[8])}function zi(t,e,n){re(0),e(t,n)}const Gi=(()=>Promise.resolve(null))();function Ki(t){return t[7]||(t[7]=[])}function Wi(t){return t.cleanup||(t.cleanup=[])}function $i(t,e){const n=t[9],r=n?n.get(gr,null):null;r&&r.handleError(e)}function Qi(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Xi(t,e,n){const r=Nt(e,t);!function(t,e,n){xt(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}function Yi(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=d(i,t):2==o&&(r=d(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Zi=new en("INJECTOR",-1);class Ji{get(t,e=fn){if(e===fn){const e=new Error(`NullInjectorError: No provider for ${f(t)}!`);throw e.name="NullInjectorError",e}return e}}const to=new en("Set Injector scope."),eo={},no={},ro=[];let io;function oo(){return void 0===io&&(io=new Ji),io}function so(t,e=null,n=null,r){return new ao(t,n,e||oo(),r)}class ao{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&sn(e,n=>this.processProvider(n,t,e)),sn([t],t=>this.processInjectorType(t,[],i)),this.records.set(Zi,lo(void 0,this));const o=this.records.get(to);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:f(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=fn,n=N.Default){this.assertNotDestroyed();const r=yn(this);try{if(!(n&N.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof en)&&E(t);e=n&&this.injectableDefInScope(n)?lo(uo(t),eo):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&N.Self?oo():this.parent).get(t,e=n&N.Optional&&e===fn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(f(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[pn]&&i.unshift(e[pn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=f(e);if(Array.isArray(e))i=e.map(f).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):f(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(dn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{yn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(f(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=m(t)))return!1;let r=T(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=T(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{sn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];sn(r,t=>this.processProvider(t,n,r||ro))}}this.injectorDefTypes.add(o);const a=vt(o)||(()=>new o);this.records.set(o,lo(a,eo));const u=r.providers;if(null!=u&&!s){const e=t;sn(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=fo(t=m(t))?t:m(t&&t.provide);const i=function(t,e,n){return ho(t)?lo(void 0,t.useValue):lo(co(t),eo)}(t);if(fo(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=lo(void 0,eo,!0),e.factory=()=>wn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===eo&&(e.value=no,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function uo(t){const e=E(t),n=null!==e?e.factory:vt(t);if(null!==n)return n;if(t instanceof en)throw new Error(`Token ${f(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${f(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[I]||t[A]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function co(t,e,n){let r;if(fo(t)){const e=m(t);return vt(e)||uo(e)}if(ho(t))r=()=>m(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...wn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>vn(m(t.useExisting));else{const e=m(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return vt(e)||uo(e);r=()=>new e(...wn(t.deps))}var i;return r}function lo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function ho(t){return null!==t&&"object"==typeof t&&gn in t}function fo(t){return"function"==typeof t}const po=function(t,e,n){return function(t,e=null,n=null,r){const i=so(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let go=(()=>{class t{static create(t,e){return Array.isArray(t)?po(t,e,""):po(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=fn,t.NULL=new Ji,t.\u0275prov=O({token:t,providedIn:"any",factory:()=>vn(Zi)}),t.__NG_ELEMENT_ID__=-1,t})();function mo(t,e){ge(Pt(t)[1],Kt())}function yo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(bt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=bo(t.inputs),e.declaredInputs=bo(t.declaredInputs),e.outputs=bo(t.outputs);const n=i.hostBindings;n&&_o(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&vo(t,o),s&&wo(t,s),h(t.inputs,i.inputs),h(t.declaredInputs,i.declaredInputs),h(t.outputs,i.outputs),bt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===yo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Te(i.hostAttrs,n=Te(n,i.hostAttrs))}}(r)}function bo(t){return t===H?{}:t===G?[]:t}function vo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function wo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function _o(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let Oo=null;function Co(){if(!Oo){const t=B.Symbol;if(t&&t.iterator)Oo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Oo=n)}}}return Oo}function Eo(t){return!!So(t)&&(Array.isArray(t)||!(t instanceof Map)&&Co()in t)}function So(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function To(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Io(t,e,n,r){const i=To(t,e,n);return To(t,e+1,r)||i}function xo(t,e,n,r){const i=Ht();return To(i,Zt(),e)&&(zt(),function(t,e,n,r,i,o){const s=Rt(t,e);!function(t,e,n,r,i,o,s){if(null==o)xt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?v(o):s(o,r||"",i);xt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(pe(),i,t,e,n,r)),xo}function Ao(t,e,n,r,i,o,s,a){const u=Ht(),c=zt(),l=t+ht,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=di(e,t,4,s||null,Vt(c,a));Ti(e,n,l,Vt(c,u)),ge(e,l);const h=l.tViews=Oi(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];$t(h,!1);const f=u[11].createComment("");Mr(c,u,f,h),mr(f,u),Fi(u,u[l]=Mi(f,u,f,h)),yt(h)&&vi(c,u,h),null!=s&&wi(u,h,a)}function ko(t,e=N.Default){const n=Ht();return null===n?vn(t,e):qe(Kt(),n,m(t),e)}function No(t,e,n){const r=Ht();return To(r,Zt(),e)&&Si(zt(),pe(),r,t,e,r[11],n,!1),No}function Ro(t,e,n,r,i){const o=i?"class":"style";Qi(t,n,e.inputs[o],o,r)}function jo(t,e,n,r){const i=Ht(),o=zt(),s=ht+t,a=i[11],u=i[s]=Ir(a,e,qt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=di(e,t,2,i,Vt(a,o));return Ti(e,n,u,Vt(a,s)),null!==u.attrs&&Yi(u,u.attrs,!1),null!==u.mergedAttrs&&Yi(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];$t(c,!0);const l=c.mergedAttrs;null!==l&&Ce(a,u,l);const h=c.classes;null!==h&&zr(a,u,h);const f=c.styles;null!==f&&Hr(a,u,f),64!=(64&c.flags)&&Mr(o,i,u,c),0===qt.lFrame.elementDepthCount&&mr(u,i),qt.lFrame.elementDepthCount++,yt(c)&&(vi(o,i,c),function(t,e,n){if(gt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&wi(i,c)}function Do(){let t=Kt();Qt()?qt.lFrame.isParent=!1:(t=t.parent,$t(t,!1));const e=t;qt.lFrame.elementDepthCount--;const n=zt();n.firstCreatePass&&(ge(n,t),gt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Ro(n,e,Ht(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Ro(n,e,Ht(),e.stylesWithoutHost,!1)}function Po(t,e,n,r){jo(t,e,n,r),Do()}function Mo(){return Ht()}function Lo(t){return!!t&&"function"==typeof t.then}function Vo(t){return!!t&&"function"==typeof t.subscribe}const Uo=Vo;function Fo(t,e,n=!1,r){const i=Ht(),o=zt(),s=Kt();return function(t,e,n,r,i,o,s=!1,a){const u=yt(r),c=t.firstCreatePass&&Wi(t),l=Ki(e);let h=!0;if(3&r.type){const f=Rt(r,e),d=a?a(f):H,p=d.target||f,g=l.length,m=a?t=>a(kt(t[r.index])).target:r.index;if(xt(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Bo(r,e,0,o,!1);const t=n.listen(d.name||p,i,o);l.push(o,t),c&&c.push(i,m,g,g+1)}}else o=Bo(r,e,0,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,m,g,s)}else o=Bo(r,e,0,o,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Fo}function qo(t,e,n,r){try{return!1!==n(r)}catch(i){return $i(t,i),!1}}function Bo(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?Dt(t.index,e):e;0==(32&e[2])&&qi(s);let a=qo(e,0,r,o),u=n.__ngNextListenerFn__;for(;u;)a=qo(e,0,u,o)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Ho(t=1){return function(t){return(qt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,qt.lFrame.contextLView))[8]}(t)}function zo(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?si(o):ui(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Go(t[a],e)&&(u=!0,t[a+1]=r?li(n):ai(n)),a=r?si(n):ui(n)}u&&(t[n+1]=r?ai(o):li(o))}function Go(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&hn(t,e)>=0}function Ko(t,e){return function(t,e,n,r){const i=Ht(),o=zt(),s=Jt(2);o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[fe()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(o)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=qt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=e.residualClasses;if(null===i)0===e.classBindings&&(n=$o(n=Wo(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Wo(i,t,e,n,r),null===o){let n=function(t,e,n){const r=e.classBindings;if(0!==ui(r))return t[si(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=Wo(null,t,e,n[1],r),n=$o(n,e.attrs,r),function(t,e,n,r){t[si(e.classBindings)]=r}(t,e,0,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=$o(r,t[o].hostAttrs,true);return $o(r,e.attrs,true)}(t,e)}return void 0!==o&&(e.residualClasses=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=e.classBindings,a=si(s),u=ui(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||hn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=si(t[a+1]);t[r+1]=oi(e,a),0!==e&&(t[e+1]=ci(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=oi(a,0),0!==a&&(t[a+1]=ci(t[a+1],r)),a=r;else t[r+1]=oi(u,0),0===a?a=r:t[u+1]=ci(t[u+1],r),u=r;l&&(t[r+1]=ai(t[r+1])),zo(t,c,r,!0),zo(t,c,r,!1),function(t,e,n,r,i){const o=t.residualClasses;null!=o&&"string"==typeof e&&hn(o,e)>=0&&(n[r+1]=li(n[r+1]))}(e,c,t,r),s=oi(a,u),e.classBindings=s}(i,o,e,n,s)}}(o,t,s,true),e!==ni&&To(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Xo(1==(1&c)?Qo(u,e,n,i,ui(c),s):void 0)||(Xo(o)||function(t){return 2==(2&t)}(c)&&(o=Qo(u,null,n,i,a,s)),function(t,e,n,r,i){const o=xt(t);i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r)}(r,0,Nt(fe(),n),i,o))}(o,o.data[fe()],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=f(jn(t))),t}(e),true,s)}(t,e),Ko}function Wo(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=$o(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function $o(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),cn(t,s,!!n||e[++o]))}return void 0===t?null:t}function Qo(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===ni&&(l=c?z:void 0);let h=c?ln(l,r):u===r?l:void 0;if(o&&!Xo(h)&&(h=ln(e,r)),Xo(h)&&(a=h,s))return a;const f=t[i+1];i=s?si(f):ui(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=ln(t,r))}return a}function Xo(t){return void 0!==t}function Yo(t,e=""){const n=Ht(),r=zt(),i=t+ht,o=r.firstCreatePass?di(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return xt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Mr(r,n,s,o),$t(o,!1)}function Zo(t,e,n){const r=Ht(),i=function(t,e,n,r){return To(t,Zt(),n)?e+v(n)+r:ni}(r,t,e,n);return i!==ni&&Xi(r,fe(),i),Zo}function Jo(t,e,n,r,i){const o=Ht(),s=function(t,e,n,r,i,o){const s=Io(t,qt.lFrame.bindingIndex,n,i);return Jt(2),s?e+v(n)+r+v(i)+o:ni}(o,t,e,n,r,i);return s!==ni&&Xi(o,fe(),s),Jo}function ts(t,e,n){const r=Ht();return To(r,Zt(),e)&&Si(zt(),pe(),r,t,e,r[11],n,!0),ts}const es=void 0;var ns=["en",[["a","p"],["AM","PM"],es],[["AM","PM"],es,es],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],es,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],es,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",es,"{1} 'at' {0}",es],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let rs={};function is(t,e,n){"string"!=typeof e&&(n=e,e=t[cs.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),rs[e]=t,n&&(rs[e][cs.ExtraData]=n)}function os(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=us(e);if(n)return n;const r=e.split("-")[0];if(n=us(r),n)return n;if("en"===r)return ns;throw new Error(`Missing locale data for the locale "${t}".`)}function ss(t){return os(t)[cs.CurrencyCode]||null}function as(t){return os(t)[cs.PluralCase]}function us(t){return t in rs||(rs[t]=B.ng&&B.ng.common&&B.ng.common.locales&&B.ng.common.locales[t]),rs[t]}var cs=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const ls="en-US";let hs=ls;function fs(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(hs=t.toLowerCase().replace(/_/g,"-"))}function ds(t,e,n,r,i){if(t=m(t),Array.isArray(t))for(let o=0;o<t.length;o++)ds(t[o],e,n,r,i);else{const o=zt(),s=Ht();let a=fo(t)?t:m(t.provide),u=co(t);const c=Kt(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(fo(t)||!t.multi){const r=new Oe(u,i,ko),d=ms(a,e,i?l:l+f,h);-1===d?(Ve(De(c,s),o,a),ps(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=ms(a,e,l+f,h),p=ms(a,e,l,l+f),g=d>=0&&n[d],m=p>=0&&n[p];if(i&&!m||!i&&!g){Ve(De(c,s),o,a);const l=function(t,e,n,r,i){const o=new Oe(t,n,ko);return o.multi=[],o.index=e,o.componentProviders=0,gs(o,i,r&&!n),o}(i?bs:ys,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),ps(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else ps(o,t,d>-1?d:p,gs(n[i?p:d],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function ps(t,e,n,r){const i=fo(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function gs(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ms(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function ys(t,e,n,r){return vs(this.multi,[])}function bs(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Ke(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),vs(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],vs(i,o);return o}function vs(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function ws(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=zt();if(r.firstCreatePass){const i=bt(t);ds(n,r.data,r.blueprint,i,!0),ds(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class _s{}class Os{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${f(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Cs=(()=>{class t{}return t.NULL=new Os,t})();function Es(...t){}function Ss(t,e){return new Is(Rt(t,e))}const Ts=function(){return Ss(Kt(),Ht())};let Is=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Ts,t})();function xs(t){return t instanceof Is?t.nativeElement:t}class As{}let ks=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ns(),t})();const Ns=function(){const t=Ht(),e=Dt(Kt().index,t);return function(t){return t[11]}(dt(e)?e:t)};let Rs=(()=>{class t{}return t.\u0275prov=O({token:t,providedIn:"root",factory:()=>null}),t})();class js{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Ds=new js("11.2.13");class Ps{constructor(){}supports(t){return Eo(t)}create(t){return new Ls(t)}}const Ms=(t,e)=>e;class Ls{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Ms}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<qs(n,r,i)?e:n,s=qs(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Eo(t))throw new Error(`Error trying to diff '${f(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Co()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Vs(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Fs),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Fs),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Vs{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Us{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Fs{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Us,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function qs(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Bs{constructor(){}supports(t){return t instanceof Map||So(t)}create(){return new Hs}}class Hs{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||So(t)))throw new Error(`Error trying to diff '${f(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new zs(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class zs{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Gs(){return new Ks([new Ps])}let Ks=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Gs()),deps:[[t,new En,new Cn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=O({token:t,providedIn:"root",factory:Gs}),t})();function Ws(){return new $s([new Bs])}let $s=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Ws()),deps:[[t,new En,new Cn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=O({token:t,providedIn:"root",factory:Ws}),t})();function Qs(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(kt(o)),pt(o))for(let t=ft;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Qs(e[1],e,n,r)}const s=n.type;if(8&s)Qs(t,e,n.child,r);else if(32&s){const t=_r(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Vr(e,n);if(Array.isArray(t))r.push(...t);else{const n=Or(e[16]);Qs(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Xs{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Qs(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(pt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Ar(t,n),un(e,n))}this._attachedToViewContainer=!1}kr(this._lView[1],this._lView)}onDestroy(t){Ci(this._lView[1],this._lView,null,t)}markForCheck(){qi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Bi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Yt(!0);try{Bi(t,e,n)}finally{Yt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,qr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Ys extends Xs{constructor(t){super(t),this._view=t}detectChanges(){Hi(this._view)}checkNoChanges(){!function(t){Yt(!0);try{Hi(t)}finally{Yt(!1)}}(this._view)}get context(){return null}}const Zs=ta;let Js=(()=>{class t{}return t.__NG_ELEMENT_ID__=Zs,t.__ChangeDetectorRef__=!0,t})();function ta(t=!1){return function(t,e,n){if(!n&&mt(t)){const n=Dt(t.index,e);return new Xs(n,n)}return 47&t.type?new Xs(e[16],e):null}(Kt(),Ht(),t)}const ea=[new Bs],na=new Ks([new Ps]),ra=new $s(ea),ia=function(){return ua(Kt(),Ht())};let oa=(()=>{class t{}return t.__NG_ELEMENT_ID__=ia,t})();const sa=oa,aa=class extends sa{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=fi(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),gi(e,n,t),new Xs(n)}};function ua(t,e){return 4&t.type?new aa(e,t,Ss(t,e)):null}class ca{}class la{}const ha=function(){return ya(Kt(),Ht())};let fa=(()=>{class t{}return t.__NG_ELEMENT_ID__=ha,t})();const da=fa,pa=class extends da{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Ss(this._hostTNode,this._hostLView)}get injector(){return new Qe(this._hostTNode,this._hostLView)}get parentInjector(){const t=Le(this._hostTNode,this._hostLView);if(xe(t)){const e=ke(t,this._hostLView),n=Ae(t);return new Qe(e[1].data[n+8],e)}return new Qe(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=ga(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ft}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(ca,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(pt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new pa(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=ft+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-ft?(e[4]=n[i],an(n,ft+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Ur(i,o),a=n[11],u=Pr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,qr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),an(ma(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=ga(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Ar(this._lContainer,e);n&&(un(ma(this._lContainer),e),kr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Ar(this._lContainer,e);return n&&null!=un(ma(this._lContainer),e)?new Xs(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function ga(t){return t[8]}function ma(t){return t[8]||(t[8]=[])}function ya(t,e){let n;const r=e[t.index];if(pt(r))n=r;else{let i;if(8&t.type)i=kt(r);else{const n=e[11];i=n.createComment("");const r=Rt(t,e);Rr(n,Pr(n,r),i,function(t,e){return xt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Mi(r,e,i,t),Fi(e,n)}return new pa(n,t,e)}const ba={};class va extends Cs{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ct(t);return new Oa(e,this.ngModule)}}function wa(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const _a=new en("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>yr});class Oa extends _s{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(ei).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return wa(this.componentDef.inputs)}get outputs(){return wa(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,ba,i);return o!==ba||r===ba?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(As,At),s=i.get(Rs,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(xt(t))return t.selectRootElement(e,n===L.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Ir(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:yr,clean:Gi,playerHandler:null,flags:0},f=Oi(0,null,null,1,0,null,null,null,null,null),d=fi(null,f,h,l,null,null,o,a,s,i);let p,g;se(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=di(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Yi(a,u,!0),null!==t&&(Ce(i,t,u),null!==a.classes&&zr(i,t,a.classes),null!==a.styles&&Hr(i,t,a.styles)));const c=r.createRenderer(t,e),l=fi(n,_i(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(Ve(De(a,n),s,e.type),Ai(s,a),Ni(a,n.length,1)),Fi(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)Ce(a,c,["ng-version",Ds.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Yr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Ce(a,c,t),e&&e.length>0&&zr(a,c,e.join(" "))}if(g=jt(f,ht),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Kt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Ri(t,r,e,pi(t,e,1,null),n));const i=Ke(e,t,r.directiveStart,r);mr(i,e);const o=Rt(r,e);return o&&mr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Kt();e.contentQueries(1,s,t.directiveStart)}const a=Kt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(de(a.index),Ii(n[1],a,0,a.directiveStart,a.directiveEnd,e),xi(e,s)),s}(t,this.componentDef,d,h,[mo]),gi(f,d,null)}finally{he()}return new Ca(this.componentType,p,Ss(g,d),d,g)}}class Ca extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Ys(r),this.componentType=t}get injector(){return new Qe(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Ea=new Map;class Sa extends ca{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new va(this);const n=lt(t),r=t[X]||null;r&&fs(r),this._bootstrapComponents=vr(n.bootstrap),this._r3Injector=so(t,e,[{provide:ca,useValue:this},{provide:Cs,useValue:this.componentFactoryResolver}],f(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=go.THROW_IF_NOT_FOUND,n=N.Default){return t===go||t===ca||t===Zi?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Ta extends la{constructor(t){super(),this.moduleType=t,null!==lt(t)&&function(t){const e=new Set;!function t(n){const r=lt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${f(e)} vs ${f(e.name)}`)}(i,Ea.get(i),n),Ea.set(i,n));const o=vr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Sa(this.moduleType,t)}}function Ia(t,e,n,r,i){return function(t,e,n,r,i,o,s){const a=e+n;return Io(t,a,i,o)?function(t,e,n){return t[e]=n}(t,a+2,s?r.call(s,i,o):r(i,o)):function(t,e){const n=t[e];return n===ni?void 0:n}(t,a+2)}(Ht(),function(){const t=qt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),t,e,n,r,i)}function xa(t){return e=>{setTimeout(t,void 0,e)}}const Aa=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,o,s;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(o=e.error)||void 0===o?void 0:o.bind(e),c=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(u=xa(u),a&&(a=xa(a)),c&&(c=xa(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.a&&t.add(l),l}};function ka(){return this._results[Co()]()}class Na{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Co(),n=Na.prototype;n[e]||(n[e]=ka)}get changes(){return this._changes||(this._changes=new Aa)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=on(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Ra{constructor(t){this.queryList=t,this.matches=null}clone(){return new Ra(this.queryList)}setDirty(){this.queryList.setDirty()}}class ja{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new ja(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==za(t,e).matches&&this.queries[e].setDirty()}}class Da{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Pa{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Pa(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Ma{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Ma(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,La(e,i)),this.matchTNodeWithReadOption(t,e,Ge(e,t,i,!1,!1))}else n===oa?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Ge(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Is||r===fa||r===oa&&4&e.type)this.addMatch(e.index,-2);else{const n=Ge(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function La(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Va(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Ss(t,e):4&t.type?ua(t,e):null}(e,t):-2===n?function(t,e,n){return n===Is?Ss(e,t):n===oa?ua(e,t):n===fa?ya(e,t):void 0}(t,e,r):Ke(t,t[1],n,e)}function Ua(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Va(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Fa(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Ua(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=ft;t<s.length;t++){const e=s[t];e[17]===e[3]&&Fa(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];Fa(n[1],n,i,r)}}}}}return r}function qa(t){const e=Ht(),n=zt(),r=ne();re(r+1);const i=za(n,r);if(t.dirty&&Mt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?Fa(n,e,r,[]):Ua(n,e,i,r);t.reset(o,xs),t.notifyOnChanges()}return!0}return!1}function Ba(t,e,n,r){const i=zt();if(i.firstCreatePass){const o=Kt();(function(t,e,n){null===t.queries&&(t.queries=new Pa),t.queries.track(new Ma(e,n))})(i,new Da(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}!function(t,e,n){const r=new Na(4==(4&n));Ci(t,e,r,r.destroy),null===e[19]&&(e[19]=new ja),e[19].queries.push(new Ra(r))}(i,Ht(),n)}function Ha(){return t=Ht(),e=ne(),t[19].queries[e].queryList;var t,e}function za(t,e){return t.queries.getByIndex(e)}function Ga(t=N.Default){const e=ta(!0);if(null!=e||t&N.Optional)return e;_("ChangeDetectorRef")}const Ka=new en("Application Initializer");let Wa=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Es,this.reject=Es,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Lo(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(vn(Ka,8))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();const $a=new en("AppId"),Qa={provide:$a,useFactory:function(){return`${Xa()}${Xa()}${Xa()}`},deps:[]};function Xa(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ya=new en("Platform Initializer"),Za=new en("Platform ID"),Ja=new en("appBootstrapListener");let tu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();const eu=new en("LocaleId"),nu=new en("DefaultCurrencyCode");class ru{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const iu=function(t){return new Ta(t)},ou=iu,su=function(t){return Promise.resolve(iu(t))},au=function(t){const e=iu(t),n=vr(lt(t).declarations).reduce((t,e)=>{const n=ct(e);return n&&t.push(new Oa(n)),t},[]);return new ru(e,n)},uu=au,cu=function(t){return Promise.resolve(au(t))};let lu=(()=>{class t{constructor(){this.compileModuleSync=ou,this.compileModuleAsync=su,this.compileModuleAndAllComponentsSync=uu,this.compileModuleAndAllComponentsAsync=cu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();const hu=(()=>Promise.resolve(0))();function fu(t){"undefined"==typeof Zone?hu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class du{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Aa(!1),this.onMicrotaskEmpty=new Aa(!1),this.onStable=new Aa(!1),this.onError=new Aa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=B.requestAnimationFrame,e=B.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(B,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,mu(t),gu(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),mu(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return yu(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),bu(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return yu(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),bu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,mu(t),gu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!du.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(du.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,pu,Es,Es);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const pu={};function gu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function mu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function yu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function bu(t){t._nesting--,gu(t)}class vu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Aa,this.onMicrotaskEmpty=new Aa,this.onStable=new Aa,this.onError=new Aa}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let wu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{du.assertNotInAngularZone(),fu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())fu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(vn(du))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})(),_u=(()=>{class t{constructor(){this._applications=new Map,Su.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Su.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();class Ou{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Cu(t){Su=t}let Eu,Su=new Ou,Tu=!0,Iu=!1;function xu(){return Iu=!0,Tu}function Au(){if(Iu)throw new Error("Cannot enable prod mode after platform setup.");Tu=!1}const ku=new en("AllowMultipleToken");class Nu{constructor(t,e){this.name=t,this.token=e}}function Ru(t,e,n=[]){const r=`Platform: ${e}`,i=new en(r);return(e=[])=>{let o=ju();if(!o||o.injector.get(ku,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:to,useValue:"platform"});!function(t){if(Eu&&!Eu.destroyed&&!Eu.injector.get(ku,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Eu=t.get(Du);const e=t.get(Ya,null);e&&e.forEach(t=>t())}(go.create({providers:t,name:r}))}return function(t){const e=ju();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function ju(){return Eu&&!Eu.destroyed?Eu:null}let Du=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new vu:("zone.js"===t?void 0:t)||new du({enableLongStackTrace:xu(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:du,useValue:n}];return n.run(()=>{const e=go.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(gr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Lu(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Lo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Wa);return t.runInitializers(),t.donePromise.then(()=>(fs(i.injector.get(eu,ls)||ls),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Pu({},e);return function(t,e,n){const r=new Ta(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Mu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${f(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(vn(go))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();function Pu(t,e){return Array.isArray(e)?e.reduce(Pu,t):Object.assign(Object.assign({},t),e)}let Mu=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),h=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{du.assertNotInAngularZone(),fu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{du.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(l,h.pipe(t=>{return Object(u.a)()((e=c,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,a.b);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof _s?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(ca),i=n.create(go.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(wu,null),a=s&&i.injector.get(_u);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Lu(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Lu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ja,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(vn(du),vn(go),vn(gr),vn(Cs),vn(Wa))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();function Lu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Vu{}class Uu{}const Fu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let qu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Fu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Bu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Bu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(vn(lu),vn(Uu,8))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();function Bu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Hu=function(t){return null},zu=Ru(null,"core",[{provide:Za,useValue:"unknown"},{provide:Du,deps:[go]},{provide:_u,deps:[]},{provide:tu,deps:[]}]),Gu=[{provide:Mu,useClass:Mu,deps:[du,go,gr,Cs,Wa]},{provide:_a,deps:[du],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Wa,useClass:Wa,deps:[[new Cn,Ka]]},{provide:lu,useClass:lu,deps:[]},Qa,{provide:Ks,useFactory:function(){return na},deps:[]},{provide:$s,useFactory:function(){return ra},deps:[]},{provide:eu,useFactory:function(t){return fs(t=t||"undefined"!=typeof $localize&&$localize.locale||ls),t},deps:[[new On(eu),new Cn,new En]]},{provide:nu,useValue:"USD"}];let Ku=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(vn(Mu))},t.\u0275mod=it({type:t}),t.\u0275inj=C({providers:Gu}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return l});var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("z6cu");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return Object(s.a)(this.error);case"C":return Object(i.b)()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return d});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return v}),n.d(e,"c",function(){return b}),n.d(e,"d",function(){return O}),n.d(e,"e",function(){return u}),n.d(e,"f",function(){return C}),n.d(e,"g",function(){return o}),n.d(e,"h",function(){return s}),n.d(e,"i",function(){return T}),n.d(e,"j",function(){return c}),n.d(e,"k",function(){return f}),n.d(e,"l",function(){return d}),n.d(e,"m",function(){return g}),n.d(e,"n",function(){return m}),n.d(e,"o",function(){return l}),n.d(e,"p",function(){return h}),n.d(e,"q",function(){return p}),n.d(e,"r",function(){return y});var r=n("mrSG"),i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function o(t){return s(void 0,t)}function s(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=s(t[n],e[n]));return t}var a=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function u(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",o=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object(r.a)({iss:"https://securetoken.google.com/"+n,aud:n,iat:o,exp:o+3600,auth_time:o,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[i.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),i.encodeString(JSON.stringify(a),!1),""].join(".")}function c(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function l(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(c())}function h(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function f(){return"object"==typeof self&&self.self===self}function d(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function p(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function g(){return c().indexOf("Electron/")>=0}function m(){var t=c();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function y(){return c().indexOf("MSAppHost/")>=0}var b=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,v.prototype.create),o}return Object(r.c)(e,t),e}(Error),v=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?w(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new b(i,a,r);return u},t}();function w(t,e){return t.replace(_,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var _=/\{\$([^}]+)}/g;function O(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function C(t,e){var n=new E(t,e);return n.subscribe.bind(n)}var E=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=S),void 0===r.error&&(r.error=S),void 0===r.complete&&(r.complete=S);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function S(){}function T(t){return t&&t._delegate?t._delegate:t}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return T}),n.d(e,"b",function(){return v}),n.d(e,"c",function(){return b}),n.d(e,"d",function(){return d}),n.d(e,"e",function(){return y}),n.d(e,"f",function(){return E}),n.d(e,"g",function(){return _}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return m}),n.d(e,"j",function(){return O});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.b))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},b=new u.r("angularfire2.app.options"),v=new u.r("angularfire2.app.nameOrConfig"),w=new u.P("6.1.4");function _(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&C("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const O=()=>{C("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},C=(t,...e)=>{Object(u.V)()&&"undefined"!=typeof console&&console[t](...e)};function E(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&C("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const S={provide:class{},useFactory:_,deps:[b,u.A,[new u.B,v]]};let T=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",w.full,t.toString()),c.a.registerVersion("angular",u.O.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:b,useValue:e},{provide:v,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.Rb(u.C))},t.\u0275mod=u.Ib({type:t}),t.\u0275inj=u.Hb({providers:[S]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return m});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class f extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n("DH7j");class g extends r.a{constructor(t,e=0,n=d){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new y(t,e))}}class y{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},z6cu:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("HDdC");function i(t,e){return new r.a(e?n=>e.schedule(o,0,{error:t,subscriber:n}):e=>e.error(t))}function o({error:t,subscriber:e}){e.error(t)}},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.g)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=f),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.d)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.6.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.d)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.h)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.h)(e,t)},createSubscribe:s.f,ErrorFactory:s.b,deepExtend:s.h}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.k)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var b=self.firebase.SDK_VERSION;b&&b.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var v=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.p)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),v.apply(void 0,t)};var w=m;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.22",void 0),t.registerVersion("fire-js","")}(w),e.a=w},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.r("DocumentToken");let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return Object(r.Rb)(l)}const c=new r.r("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s))},t.\u0275prov=Object(r.Gb)({factory:f,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function f(){return new l(Object(r.Rb)(s))}function d(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=Object(r.Rb)(s).location;return new v(Object(r.Rb)(a),e&&e.origin||"")}const b=new r.r("appBaseHref");let v=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return d(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(a),r.Rb(b,8))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=d(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(a),r.Rb(b,8))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(C(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,C(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(m),r.Rb(a))},t.normalizeQueryParams=g,t.joinWithSlash=d,t.stripTrailingSlash=p,t.\u0275prov=Object(r.Gb)({factory:O,token:t,providedIn:"root"}),t})();function O(){return new _(Object(r.Rb)(m),Object(r.Rb)(a))}function C(t){return t.replace(/\/index.html$/,"")}var E=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const S=r.mb;class T{}let I=(()=>{class t extends T{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(S(e||this.locale)(t)){case E.Zero:return"zero";case E.One:return"one";case E.Two:return"two";case E.Few:return"few";case E.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.v))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();function x(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}let A=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(r.pb)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Object(r.vb)(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.t),r.Kb(r.u),r.Kb(r.l),r.Kb(r.E))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class k{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let N=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new k(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new R(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new R(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.Q),r.Kb(r.L),r.Kb(r.t))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class R{constructor(t,e){this.record=t,this.view=e}}let j=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new D,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){P("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){P("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.Q),r.Kb(r.L))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class D{constructor(){this.$implicit=null,this.ngIf=null}}function P(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.vb)(e)}'.`)}let M=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[{provide:T,useClass:I}]}),t})();function L(t){return"server"===t}let V=(()=>{class t{}return t.\u0275prov=Object(r.Gb)({token:t,providedIn:"root",factory:()=>new U(Object(r.Rb)(s),window)}),t})();class U{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=F(this.window.history)||F(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function F(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class q extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new q,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=H||(H=document.querySelector("base"),H)?H.getAttribute("href"):null;return null==e?null:(n=e,B||(B=document.createElement("a")),B.setAttribute("href",n),"/"===B.pathname.charAt(0)?B.pathname:"/"+B.pathname);var n}resetBaseElement(){H=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return x(document.cookie,t)}}let B,H=null;const z=new r.r("TRANSITION_ID"),G=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[z,s,r.s],multi:!0}];class K{static init(){Object(r.X)(new K)}addToWindow(t){r.ob.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.ob.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.ob.getAllAngularRootElements=()=>t.getAllRootElements(),r.ob.frameworkStabilizers||(r.ob.frameworkStabilizers=[]),r.ob.frameworkStabilizers.push(t=>{const e=r.ob.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const W=new r.r("EventManagerPlugins");let $=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(W),r.Rb(r.A))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class Q{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let X=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Y=(()=>{class t extends X{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>o().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const Z={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},J=/%COMP%/g;function tt(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?tt(t,i,n):(i=i.replace(J,t),n.push(i))}return n}function et(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let nt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new rt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.R.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new it(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.R.ShadowDom:return new ot(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=tt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Rb($),r.Rb(Y),r.Rb(r.c))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class rt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Z[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=Z[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=Z[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.G.DashCase|r.G.Important)?t.style.setProperty(e,n,i&r.G.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.G.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,et(n)):this.eventManager.addEventListener(t,e,et(n))}}class it extends rt{constructor(t,e,n,r){super(t),this.component=n;const i=tt(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(J,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(J,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class ot extends rt{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=tt(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let st=(()=>{class t extends Q{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const at=["alt","control","meta","shift"],ut={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ct={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},lt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let ht=(()=>{class t extends Q{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(at.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ct.hasOwnProperty(e)&&(e=ct[e]))}return ut[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),at.forEach(r=>{r!=n&&(0,lt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const ft=[{provide:r.C,useValue:"browser"},{provide:r.D,useValue:function(){q.makeCurrent(),K.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.ub)(document),document},deps:[]}],dt=Object(r.S)(r.W,"browser",ft),pt=[[],{provide:r.Z,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:W,useClass:st,multi:!0,deps:[s,r.A,r.C]},{provide:W,useClass:ht,multi:!0,deps:[s]},[],{provide:nt,useClass:nt,deps:[$,Y,r.c]},{provide:r.F,useExisting:nt},{provide:X,useExisting:Y},{provide:Y,useClass:Y,deps:[s]},{provide:r.M,useClass:r.M,deps:[r.A]},{provide:$,useClass:$,deps:[W,r.A]},[]];let gt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:z,useExisting:r.c},G]}}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(t,12))},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:pt,imports:[M,r.f]}),t})();"undefined"!=typeof window&&window;var mt=n("Cfvw"),yt=n("LRne"),bt=n("XNiG"),vt=n("9ppp");class wt extends bt.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new vt.a;return this._value}next(t){super.next(this._value=t)}}var _t=n("z+Ro"),Ot=n("DH7j"),Ct=n("7o/Q");class Et extends Ct.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class St extends Ct.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Tt=n("SeVD"),It=n("HDdC");function xt(t,e,n,r,i=new St(t,n,r)){if(!i.closed)return e instanceof It.a?e.subscribe(i):Object(Tt.a)(e)(i)}var At=n("yCtX");const kt={};class Nt{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Rt(t,this.resultSelector))}}class Rt extends Et{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(kt),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(xt(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===kt?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const jt=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var Dt=n("bHdf");function Pt(...t){return Object(Dt.a)(1)(Object(yt.a)(...t))}var Mt=n("EY2u");function Lt(t){return new It.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(mt.a)(n):Object(Mt.b)()).subscribe(e)})}var Vt=n("EQ5u"),Ut=n("lJxs"),Ft=n("zx2A");function qt(t,e){return"function"==typeof e?n=>n.pipe(qt((n,r)=>Object(mt.a)(t(n,r)).pipe(Object(Ut.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Bt(t))}class Bt{constructor(t){this.project=t}call(t,e){return e.subscribe(new Ht(t,this.project))}}class Ht extends Ft.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new Ft.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(Ft.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const zt=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Gt(t){return e=>0===t?Object(Mt.b)():e.lift(new Kt(t))}class Kt{constructor(t){if(this.total=t,this.total<0)throw new zt}call(t,e){return e.subscribe(new Wt(t,this.total))}}class Wt extends Ct.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function $t(...t){const e=t[t.length-1];return Object(_t.a)(e)?(t.pop(),n=>Pt(t,n,e)):e=>Pt(t,e)}function Qt(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Xt(t,e,n))}}class Xt{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Yt(t,this.accumulator,this.seed,this.hasSeed))}}class Yt extends Ct.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Zt(t,e){return function(n){return n.lift(new Jt(t,e))}}class Jt{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new te(t,this.predicate,this.thisArg))}}class te extends Ct.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function ee(t){return function(e){const n=new ne(t),r=e.lift(n);return n.caught=r}}class ne{constructor(t){this.selector=t}call(t,e){return e.subscribe(new re(t,this.selector,this.caught))}}class re extends Ft.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new Ft.a(this);this.add(r);const i=Object(Ft.c)(n,r);i!==r&&this.add(i)}}}var ie=n("5+tZ");function oe(t,e){return Object(ie.a)(t,e,1)}function se(t){return function(e){return 0===t?Object(Mt.b)():e.lift(new ae(t))}}class ae{constructor(t){if(this.total=t,this.total<0)throw new zt}call(t,e){return e.subscribe(new ue(t,this.total))}}class ue extends Ct.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function ce(t=fe){return e=>e.lift(new le(t))}class le{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new he(t,this.errorFactory))}}class he extends Ct.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(Sw){t=Sw}this.destination.error(t)}}}function fe(){return new jt}function de(t=null){return e=>e.lift(new pe(t))}class pe{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new ge(t,this.defaultValue))}}class ge extends Ct.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var me=n("SpAZ");function ye(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Zt((e,n)=>t(e,n,r)):me.a,Gt(1),n?de(e):ce(()=>new jt))}var be=n("vkgz"),ve=n("x+ZX"),we=n("quSY");class _e{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Oe(t,this.callback))}}class Oe extends Ct.a{constructor(t,e){super(t),this.add(new we.a(e))}}class Ce{constructor(t,e){this.id=t,this.url=e}}class Ee extends Ce{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Se extends Ce{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Te extends Ce{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ie extends Ce{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class xe extends Ce{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ae extends Ce{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ke extends Ce{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ne extends Ce{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Re extends Ce{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class je{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class De{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Pe{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Me{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Le{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ve{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ue{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Fe="primary";class qe{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Be(t){return new qe(t)}function He(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function ze(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Ge(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Ke(t[i],e[i]))return!1;return!0}function Ke(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function We(t){return Array.prototype.concat.apply([],t)}function $e(t){return t.length>0?t[t.length-1]:null}function Qe(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Xe(t){return Object(r.qb)(t)?t:Object(r.rb)(t)?Object(mt.a)(Promise.resolve(t)):Object(yt.a)(t)}function Ye(t,e,n){return n?function(t,e){return Ge(t,e)}(t.queryParams,e.queryParams)&&Ze(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Ke(t[n],e[n]))}(t.queryParams,e.queryParams)&&Je(t.root,e.root)}function Ze(t,e){if(!on(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Ze(t.children[n],e.children[n]))return!1}return!0}function Je(t,e){return tn(t,e,e.segments)}function tn(t,e,n){if(t.segments.length>n.length)return!!on(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!on(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Je(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!on(t.segments,r)&&!!t.children.primary&&tn(t.children.primary,e,i)}}class en{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Be(this.queryParams)),this._queryParamMap}toString(){return un.serialize(this)}}class nn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Qe(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return cn(this)}}class rn{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Be(this.parameters)),this._parameterMap}toString(){return mn(this)}}function on(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class sn{}class an{parse(t){const e=new _n(t);return new en(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${ln(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${fn(e)}=${fn(t)}`).join("&"):`${fn(e)}=${fn(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const un=new an;function cn(t){return t.segments.map(t=>mn(t)).join("/")}function ln(t,e){if(!t.hasChildren())return cn(t);if(e){const e=t.children.primary?ln(t.children.primary,!1):"",n=[];return Qe(t.children,(t,e)=>{e!==Fe&&n.push(`${e}:${ln(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return Qe(t.children,(t,r)=>{r===Fe&&(n=n.concat(e(t,r)))}),Qe(t.children,(t,r)=>{r!==Fe&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===Fe?[ln(t.children.primary,!1)]:[`${n}:${ln(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${cn(t)}/${e[0]}`:`${cn(t)}/(${e.join("//")})`}}function hn(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function fn(t){return hn(t).replace(/%3B/gi,";")}function dn(t){return hn(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function pn(t){return decodeURIComponent(t)}function gn(t){return pn(t.replace(/\+/g,"%20"))}function mn(t){return`${dn(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${dn(t)}=${dn(e[t])}`).join("")}`;var e}const yn=/^[^\/()?;=#]+/;function bn(t){const e=t.match(yn);return e?e[0]:""}const vn=/^[^=?&#]+/,wn=/^[^?&#]+/;class _n{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new nn([],{}):new nn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new nn(t,e)),n}parseSegment(){const t=bn(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new rn(pn(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=bn(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=bn(this.remaining);t&&(n=t,this.capture(n))}t[pn(e)]=pn(n)}parseQueryParam(t){const e=function(t){const e=t.match(vn);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(wn);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=gn(e),i=gn(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=bn(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Fe);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new nn([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class On{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Cn(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Cn(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=En(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return En(t,this._root).map(t=>t.value)}}function Cn(t,e){if(t===e.value)return e;for(const n of e.children){const e=Cn(t,n);if(e)return e}return null}function En(t,e){if(t===e.value)return[e];for(const n of e.children){const r=En(t,n);if(r.length)return r.unshift(e),r}return[]}class Sn{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Tn(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class In extends On{constructor(t,e){super(t),this.snapshot=e,jn(this,t)}toString(){return this.snapshot.toString()}}function xn(t,e){const n=function(t,e){const n=new Nn([],{},{},"",{},Fe,e,null,t.root,-1,{});return new Rn("",new Sn(n,[]))}(t,e),r=new wt([new rn("",{})]),i=new wt({}),o=new wt({}),s=new wt({}),a=new wt(""),u=new An(r,i,s,a,o,Fe,e,n.root);return u.snapshot=n.root,new In(new Sn(u,[]),n)}class An{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(Ut.a)(t=>Be(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(Ut.a)(t=>Be(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function kn(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Nn{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Be(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Be(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Rn extends On{constructor(t,e){super(e),this.url=t,jn(this,e)}toString(){return Dn(this._root)}}function jn(t,e){e.value._routerState=t,e.children.forEach(e=>jn(t,e))}function Dn(t){const e=t.children.length>0?` { ${t.children.map(Dn).join(", ")} } `:"";return`${t.value}${e}`}function Pn(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ge(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Ge(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ge(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Ge(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Mn(t,e){return Ge(t.params,e.params)&&function(t,e){return on(t,e)&&t.every((t,n)=>Ge(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Mn(t.parent,e.parent))}function Ln(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Ln(t,e,r);return Ln(t,e)})}(t,e,n);return new Sn(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return Vn(e,t),t}}const n=new An(new wt((r=e.value).url),new wt(r.params),new wt(r.queryParams),new wt(r.fragment),new wt(r.data),r.outlet,r.component,r),i=e.children.map(e=>Ln(t,e));return new Sn(n,i)}var r}function Vn(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Vn(t.children[n],e.children[n])}function Un(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Fn(t){return"object"==typeof t&&null!=t&&t.outlets}function qn(t,e,n,r,i){let o={};return r&&Qe(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new en(n.root===t?e:Bn(n.root,t,e),o,i)}function Bn(t,e,n){const r={};return Qe(t.children,(t,i)=>{r[i]=t===e?n:Bn(t,e,n)}),new nn(t.segments,r)}class Hn{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Un(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Fn);if(r&&r!==$e(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class zn{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Gn(t,e,n){if(t||(t=new nn([],{})),0===t.segments.length&&t.hasChildren())return Kn(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(Fn(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Xn(a,u,e))return o;r+=2}else{if(!Xn(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new nn(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new nn(t.segments.slice(r.pathIndex),t.children),Kn(e,0,i)}return r.match&&0===i.length?new nn(t.segments,{}):r.match&&!t.hasChildren()?Wn(t,e,n):r.match?Kn(t,0,i):Wn(t,e,n)}function Kn(t,e,n){if(0===n.length)return new nn(t.segments,{});{const r=function(t){return Fn(t[0])?t[0].outlets:{[Fe]:t}}(n),i={};return Qe(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Gn(t.children[r],e,n))}),Qe(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new nn(t.segments,i)}}function Wn(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Fn(o)){const t=$n(o.outlets);return new nn(r,t)}if(0===i&&Un(n[0])){r.push(new rn(t.segments[e].path,Qn(n[0]))),i++;continue}const s=Fn(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Un(a)?(r.push(new rn(s,Qn(a))),i+=2):(r.push(new rn(s,{})),i++)}return new nn(r,{})}function $n(t){const e={};return Qe(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Wn(new nn([],{}),0,t))}),e}function Qn(t){const e={};return Qe(t,(t,n)=>e[n]=`${t}`),e}function Xn(t,e,n){return t==n.path&&Ge(e,n.parameters)}class Yn{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Pn(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Tn(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Qe(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=Tn(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=Tn(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Ve(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Me(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Pn(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Zn(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Zn(t){Pn(t.value),t.children.forEach(Zn)}class Jn{constructor(t,e){this.routes=t,this.module=e}}function tr(t){return"function"==typeof t}function er(t){return t instanceof en}const nr=Symbol("INITIAL_VALUE");function rr(){return qt(t=>function(...t){let e,n;return Object(_t.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(Ot.a)(t[0])&&(t=t[0]),Object(At.a)(t,n).lift(new Nt(e))}(t.map(t=>t.pipe(Gt(1),$t(nr)))).pipe(Qt((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==nr)return t;if(r===nr&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||er(r))return r}return t},t)},nr),Zt(t=>t!==nr),Object(Ut.a)(t=>er(t)?t:!0===t),Gt(1)))}let ir=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Lb(0,"router-outlet")},directives:function(){return[Jr]},encapsulation:2}),t})();function or(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];sr(r,ar(e,r))}}function sr(t,e){t.children&&or(t.children,e)}function ar(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function ur(t){const e=t.children&&t.children.map(ur),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Fe&&(n.component=ir),n}function cr(t){return t.outlet||Fe}function lr(t,e){const n=t.filter(t=>cr(t)===e);return n.push(...t.filter(t=>cr(t)!==e)),n}const hr={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function fr(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},hr):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||ze)(n,t,e);if(!i)return Object.assign({},hr);const o={};Qe(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function dr(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>pr(t,e,n)&&cr(n)!==Fe)}(t,n,r)){const i=new nn(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&cr(o)!==Fe){const n=new nn([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[cr(o)]=n}return i}(t,e,r,new nn(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>pr(t,e,n))}(t,n,r)){const o=new nn(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(pr(t,n,a)&&!i[cr(a)]){const n=new nn([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[cr(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new nn(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function pr(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function gr(t,e,n,r){return!!(cr(t)===r||r!==Fe&&pr(e,n,t))&&("**"===t.path||fr(e,t,n).matched)}function mr(t,e,n){return 0===e.length&&!t.children[n]}class yr{constructor(t){this.segmentGroup=t||null}}class br{constructor(t){this.urlTree=t}}function vr(t){return new It.a(e=>e.error(new yr(t)))}function wr(t){return new It.a(e=>e.error(new br(t)))}function _r(t){return new It.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Or{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.y)}apply(){const t=dr(this.urlTree.root,[],[],this.config).segmentGroup,e=new nn(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Fe).pipe(Object(Ut.a)(t=>this.createUrlTree(Cr(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ee(t=>{if(t instanceof br)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof yr)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Fe).pipe(Object(Ut.a)(e=>this.createUrlTree(Cr(e),t.queryParams,t.fragment))).pipe(ee(t=>{if(t instanceof yr)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new nn([],{[Fe]:t}):t;return new en(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(Ut.a)(t=>new nn([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(mt.a)(r).pipe(oe(r=>{const i=n.children[r],o=lr(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object(Ut.a)(t=>({segment:t,outlet:r})))}),Qt((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Zt((e,n)=>t(e,n,r)):me.a,se(1),n?de(e):ce(()=>new jt))}())}expandSegment(t,e,n,r,i,o){return Object(mt.a)(n).pipe(oe(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(ee(t=>{if(t instanceof yr)return Object(yt.a)(null);throw t}))),ye(t=>!!t),ee((t,n)=>{if(t instanceof jt||"EmptyError"===t.name){if(mr(e,r,i))return Object(yt.a)(new nn([],{}));throw new yr(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return gr(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):vr(e):vr(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?wr(i):this.lineralizeSegments(n,i).pipe(Object(ie.a)(n=>{const i=new nn(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=fr(e,r,i);if(!s)return vr(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?wr(l):this.lineralizeSegments(r,l).pipe(Object(ie.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Object(yt.a)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(Object(Ut.a)(t=>(n._loadedConfig=t,new nn(r,{})))):Object(yt.a)(new nn(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=fr(e,n,r);if(!o)return vr(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(ie.a)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=dr(e,s,u,o),l=new nn(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(Object(Ut.a)(t=>new nn(s,t)));if(0===o.length&&0===c.length)return Object(yt.a)(new nn(s,{}));const h=cr(n)===i;return this.expandSegment(r,l,o,c,h?Fe:i,!0).pipe(Object(Ut.a)(t=>new nn(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(yt.a)(new Jn(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(yt.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(ie.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(Ut.a)(t=>(e._loadedConfig=t,t))):function(t){return new It.a(e=>e.error(He(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(yt.a)(new Jn([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(yt.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&tr(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!tr(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return Xe(o)});return Object(yt.a)(i).pipe(rr(),Object(be.a)(t=>{if(!er(t))return;const e=He(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(Ut.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(yt.a)(n);if(r.numberOfChildren>1||!r.children.primary)return _r(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new en(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Qe(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return Qe(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new nn(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Cr(t){const e={};for(const n of Object.keys(t.children)){const r=Cr(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new nn(t.segments.concat(e.segments),e.children)}return t}(new nn(t.segments,e))}class Er{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Sr{constructor(t,e){this.component=t,this.route=e}}function Tr(t,e,n){const r=t._root;return xr(r,e?e._root:null,n,[r.value])}function Ir(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function xr(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Tn(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!on(t.url,e.url);case"pathParamsOrQueryParamsChange":return!on(t.url,e.url)||!Ge(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Mn(t,e)||!Ge(t.queryParams,e.queryParams);case"paramsChange":default:return!Mn(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Er(r)):(o.data=s.data,o._resolvedData=s._resolvedData),xr(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Sr(a.outlet.component,s))}else s&&Ar(e,a,i),i.canActivateChecks.push(new Er(r)),xr(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),Qe(o,(t,e)=>Ar(t,n.getContext(e),i)),i}function Ar(t,e,n){const r=Tn(t),i=t.value;Qe(r,(t,r)=>{Ar(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Sr(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class kr{}function Nr(t){return new It.a(e=>e.error(t))}class Rr{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=dr(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Fe);if(null===e)return null;const n=new Nn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Fe,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Sn(n,e),i=new Rn(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=kn(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=lr(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=Dr(n);return r.sort((t,e)=>t.value.outlet===Fe?-1:e.value.outlet===Fe?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return mr(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!gr(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?$e(n).parameters:{};i=new Nn(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Lr(t),cr(t),t.component,t,Pr(e),Mr(e)+n.length,Vr(t))}else{const r=fr(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new Nn(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Lr(t),cr(t),t.component,t,Pr(e),Mr(e)+o.length,Vr(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=dr(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new Sn(i,t)]}if(0===a.length&&0===c.length)return[new Sn(i,[])];const l=cr(t)===r,h=this.processSegment(a,u,c,l?Fe:r);return null===h?null:[new Sn(i,h)]}}function jr(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Dr(t){const e=[],n=new Set;for(const r of t){if(!jr(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=Dr(r.children);e.push(new Sn(r.value,t))}return e.filter(t=>!n.has(t))}function Pr(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Mr(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Lr(t){return t.data||{}}function Vr(t){return t.resolve||{}}function Ur(t){return qt(e=>{const n=t(e);return n?Object(mt.a)(n).pipe(Object(Ut.a)(()=>e)):Object(yt.a)(e)})}class Fr extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const qr=new r.r("ROUTES");class Br{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(Object(Ut.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new Jn(We(i.injector.get(qr,void 0,r.q.Self|r.q.Optional)).map(ur),i)}),ee(t=>{throw e._loader$=void 0,t}));return e._loader$=new Vt.a(n,()=>new bt.a).pipe(Object(ve.a)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?Object(mt.a)(this.loader.load(t)):Xe(t()).pipe(Object(ie.a)(t=>t instanceof r.w?Object(yt.a)(t):Object(mt.a)(this.compiler.compileModuleAsync(t))))}}class Hr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new zr,this.attachRef=null}}class zr{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Hr,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Gr{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Kr(t){throw t}function Wr(t,e,n){return e.parse("/")}function $r(t,e){return Object(yt.a)(null)}let Qr=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new bt.a,this.errorHandler=Kr,this.malformedUriErrorHandler=Wr,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:$r,afterPreactivation:$r},this.urlHandlingStrategy=new Gr,this.routeReuseStrategy=new Fr,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.y),this.console=o.get(r.Y);const c=o.get(r.A);this.isNgZoneEnabled=c instanceof r.A&&r.A.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new en(new nn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Br(s,a,t=>this.triggerEvent(new je(t)),t=>this.triggerEvent(new De(t))),this.routerState=xn(this.currentUrlTree,this.rootComponentType),this.transitions=new wt({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Zt(t=>0!==t.id),Object(Ut.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),qt(t=>{let n=!1,r=!1;return Object(yt.a)(t).pipe(Object(be.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),qt(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(yt.a)(t).pipe(qt(t=>{const n=this.transitions.getValue();return e.next(new Ee(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Mt.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,qt(t=>function(t,e,n,r,i){return new Or(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(Ut.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(be.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(ie.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new Rr(t,e,n,r,i,o).recognize();return null===s?Nr(new kr):Object(yt.a)(s)}catch(Sw){return Nr(Sw)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(Ut.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(be.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new xe(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Ee(n,this.serializeUrl(r),i,o);e.next(a);const u=xn(r,this.rootComponentType).snapshot;return Object(yt.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Mt.a}),Ur(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(be.a)(t=>{const e=new Ae(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(Ut.a)(t=>Object.assign(Object.assign({},t),{guards:Tr(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(ie.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(yt.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(mt.a)(t).pipe(Object(ie.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(yt.a)(!0);const s=o.map(o=>{const s=Ir(o,e,i);let a;if(function(t){return t&&tr(t.canDeactivate)}(s))a=Xe(s.canDeactivate(t,e,n,r));else{if(!tr(s))throw new Error("Invalid CanDeactivate guard");a=Xe(s(t,e,n,r))}return a.pipe(ye())});return Object(yt.a)(s).pipe(rr())}(t.component,t.route,n,e,r)),ye(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(ie.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(mt.a)(e).pipe(oe(e=>Pt(function(t,e){return null!==t&&e&&e(new Pe(t)),Object(yt.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Le(t)),Object(yt.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Lt(()=>{const i=e.guards.map(i=>{const o=Ir(i,e.node,n);let s;if(function(t){return t&&tr(t.canActivateChild)}(o))s=Xe(o.canActivateChild(r,t));else{if(!tr(o))throw new Error("Invalid CanActivateChild guard");s=Xe(o(r,t))}return s.pipe(ye())});return Object(yt.a)(i).pipe(rr())}));return Object(yt.a)(i).pipe(rr())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(yt.a)(!0);const i=r.map(r=>Lt(()=>{const i=Ir(r,e,n);let o;if(function(t){return t&&tr(t.canActivate)}(i))o=Xe(i.canActivate(e,t));else{if(!tr(i))throw new Error("Invalid CanActivate guard");o=Xe(i(e,t))}return o.pipe(ye())}));return Object(yt.a)(i).pipe(rr())}(t,e.route,n))),ye(t=>!0!==t,!0))}(r,o,t,e):Object(yt.a)(n)),Object(Ut.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(be.a)(t=>{if(er(t.guardsResult)){const e=He(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new ke(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Zt(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Te(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Ur(t=>{if(t.guards.canActivateChecks.length)return Object(yt.a)(t).pipe(Object(be.a)(t=>{const e=new Ne(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),qt(t=>{let n=!1;return Object(yt.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(ie.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(yt.a)(t);let o=0;return Object(mt.a)(n).pipe(oe(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(yt.a)({});const o={};return Object(mt.a)(i).pipe(Object(ie.a)(i=>function(t,e,n,r){const i=Ir(t,e,r);return Xe(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(be.a)(t=>{o[i]=t}))),se(1),Object(ie.a)(()=>Object.keys(o).length===i.length?Object(yt.a)(o):Mt.a))}(t._resolve,t,e,r).pipe(Object(Ut.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),kn(t,n).resolve),null)))}(t.route,e,r,i)),Object(be.a)(()=>o++),se(1),Object(ie.a)(e=>o===n.length?Object(yt.a)(t):Mt.a))})),Object(be.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new Te(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(be.a)(t=>{const e=new Re(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Ur(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Ut.a)(t=>{const e=function(t,e,n){const r=Ln(t,e._root,n?n._root:void 0);return new In(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(be.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(Ut.a)(t=>(new Yn(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(be.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Te(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new _e(i))),ee(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=er(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Te(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Ie(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(Yh){t.reject(Yh)}}var i;return Mt.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){or(t),this.config=t.map(ur),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return qn(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Hn(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Qe(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Hn(n,e,r)}(n);if(o.toRoot())return qn(e.root,new nn([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new zn(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new zn(t,t===e.root,0)}const r=Un(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new zn(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Kn(s.segmentGroup,s.index,o.commands):Gn(s.segmentGroup,s.index,o.commands);return qn(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=er(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(Sw){e=this.malformedUriErrorHandler(Sw,this.urlSerializer,t)}return e}isActive(t,e){if(er(t))return Ye(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Ye(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Se(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.N),r.Rb(sn),r.Rb(zr),r.Rb(_),r.Rb(r.s),r.Rb(r.x),r.Rb(r.i),r.Rb(void 0))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Xr=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new bt.a,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:Zr(this.skipLocationChange),replaceUrl:Zr(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Zr(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Qr),r.Kb(An),r.Sb("tabindex"),r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.Ub("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.yb]}),t})(),Yr=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new bt.a,this.subscription=t.events.subscribe(t=>{t instanceof Se&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:Zr(this.skipLocationChange),replaceUrl:Zr(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Zr(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Qr),r.Kb(An),r.Kb(m))},t.\u0275dir=r.Fb({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.Ub("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.Qb("href",e.href,r.cc),r.Bb("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.yb]}),t})();function Zr(t){return""===t||!!t}let Jr=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||Fe,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new ti(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(zr),r.Kb(r.Q),r.Kb(r.j),r.Sb("name"),r.Kb(r.h))},t.\u0275dir=r.Fb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class ti{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===An?this.route:t===zr?this.childContexts:this.parent.get(t,e)}}class ei{}class ni{preload(t,e){return Object(yt.a)(null)}}let ri=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Br(e,n,e=>t.triggerEvent(new je(e)),e=>t.triggerEvent(new De(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Zt(t=>t instanceof Se),oe(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.y);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(mt.a)(n).pipe(Object(Dt.a)(),Object(Ut.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?Object(yt.a)(e._loadedConfig):this.loader.load(t.injector,e)).pipe(Object(ie.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Qr),r.Rb(r.x),r.Rb(r.i),r.Rb(r.s),r.Rb(ei))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),ii=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ee?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Se&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ue&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Ue(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Qr),r.Rb(V),r.Rb(void 0))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const oi=new r.r("ROUTER_CONFIGURATION"),si=new r.r("ROUTER_FORROOT_GUARD"),ai=[_,{provide:sn,useClass:an},{provide:Qr,useFactory:function(t,e,n,r,i,s,a,u={},c,l){const h=new Qr(null,t,e,n,r,i,s,We(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=o();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[sn,zr,_,r.s,r.x,r.i,qr,oi,[class{},new r.B],[class{},new r.B]]},zr,{provide:An,useFactory:function(t){return t.routerState.root},deps:[Qr]},{provide:r.x,useClass:r.K},ri,ni,class{preload(t,e){return e().pipe(ee(()=>Object(yt.a)(null)))}},{provide:oi,useValue:{enableTracing:!1}}];function ui(){return new r.z("Router",Qr)}let ci=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[ai,di(e),{provide:si,useFactory:fi,deps:[[Qr,new r.B,new r.J]]},{provide:oi,useValue:n||{}},{provide:m,useFactory:hi,deps:[a,[new r.p(b),new r.B],oi]},{provide:ii,useFactory:li,deps:[Qr,V,oi]},{provide:ei,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:ni},{provide:r.z,multi:!0,useFactory:ui},[pi,{provide:r.d,multi:!0,useFactory:gi,deps:[pi]},{provide:yi,useFactory:mi,deps:[pi]},{provide:r.b,multi:!0,useExisting:yi}]]}}static forChild(e){return{ngModule:t,providers:[di(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(si,8),r.Rb(Qr,8))},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({}),t})();function li(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new ii(t,e,n)}function hi(t,e,n={}){return n.useHash?new w(t,e):new v(t,e)}function fi(t){return"guarded"}function di(t){return[{provide:r.a,multi:!0,useValue:t},{provide:qr,multi:!0,useValue:t}]}let pi=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new bt.a}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Qr),r=this.injector.get(oi);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(yt.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(oi),n=this.injector.get(ri),i=this.injector.get(ii),o=this.injector.get(Qr),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();function gi(t){return t.appInitializer.bind(t)}function mi(t){return t.bootstrapListener.bind(t)}const yi=new r.r("Router Initializer");let bi=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-home"]],decls:0,vars:0,template:function(t,e){},styles:[""]}),t})();var vi=n("XoHu");function wi(t,e){return new It.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(mt.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const _i=new r.r("NgValueAccessor"),Oi={provide:_i,useExisting:Object(r.U)(()=>Ei),multi:!0},Ci=new r.r("CompositionEventMode");let Ei=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l),r.Kb(Ci,8))},t.\u0275dir=r.Fb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.Ub("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.zb([Oi])]}),t})();function Si(t){return null==t||0===t.length}function Ti(t){return null!=t&&"number"==typeof t.length}const Ii=new r.r("NgValidators"),xi=new r.r("NgAsyncValidators"),Ai=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ki{static min(t){return function(t){return e=>{if(Si(e.value)||Si(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(t)}static max(t){return function(t){return e=>{if(Si(e.value)||Si(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(t)}static required(t){return function(t){return Si(t.value)?{required:!0}:null}(t)}static requiredTrue(t){return function(t){return!0===t.value?null:{required:!0}}(t)}static email(t){return function(t){return Si(t.value)||Ai.test(t.value)?null:{email:!0}}(t)}static minLength(t){return function(t){return e=>Si(e.value)||!Ti(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static maxLength(t){return function(t){return e=>Ti(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static pattern(t){return function(t){if(!t)return Ni;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(Si(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return Li(t)}static composeAsync(t){return Ui(t)}}function Ni(t){return null}function Ri(t){return null!=t}function ji(t){const e=Object(r.rb)(t)?Object(mt.a)(t):t;return Object(r.qb)(e),e}function Di(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Pi(t,e){return e.map(e=>e(t))}function Mi(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function Li(t){if(!t)return null;const e=t.filter(Ri);return 0==e.length?null:function(t){return Di(Pi(t,e))}}function Vi(t){return null!=t?Li(Mi(t)):null}function Ui(t){if(!t)return null;const e=t.filter(Ri);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(Ot.a)(e))return wi(e,null);if(Object(vi.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return wi(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return wi(t=1===t.length&&Object(Ot.a)(t[0])?t[0]:t,null).pipe(Object(Ut.a)(t=>e(...t)))}return wi(t,null)}(Pi(t,e).map(ji)).pipe(Object(Ut.a)(Di))}}function Fi(t){return null!=t?Ui(Mi(t)):null}function qi(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Bi(t){return t._rawValidators}function Hi(t){return t._rawAsyncValidators}let zi=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Vi(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Fi(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t}),t})(),Gi=(()=>{class t extends zi{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return Ki(e||t)},t.\u0275dir=r.Fb({type:t,features:[r.xb]}),t})();const Ki=r.Pb(Gi);class Wi extends zi{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class $i{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}let Qi=(()=>{class t extends $i{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Wi,2))},t.\u0275dir=r.Fb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Cb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.xb]}),t})(),Xi=(()=>{class t extends $i{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Gi,10))},t.\u0275dir=r.Fb({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Cb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.xb]}),t})();function Yi(t,e){return[...e.path,t]}function Zi(t,e){eo(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&ro(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&ro(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Ji(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),no(t,e,!0),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function to(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function eo(t,e,n){const r=Bi(t);null!==e.validator?t.setValidators(qi(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=Hi(t);if(null!==e.asyncValidator?t.setAsyncValidators(qi(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();to(e._rawValidators,n),to(e._rawAsyncValidators,n)}}function no(t,e,n){let r=!1;if(null!==t){if(null!==e.validator){const n=Bi(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.validator);i.length!==n.length&&(r=!0,t.setValidators(i))}}if(null!==e.asyncValidator){const n=Hi(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.asyncValidator);i.length!==n.length&&(r=!0,t.setAsyncValidators(i))}}}if(n){const t=()=>{};to(e._rawValidators,t),to(e._rawAsyncValidators,t)}return r}function ro(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function io(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}function oo(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===Ei?n=t:Object.getPrototypeOf(t.constructor)===class{}?r=t:i=t}),i||r||n||null}function so(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ao="VALID",uo="INVALID",co="PENDING",lo="DISABLED";function ho(t){return(mo(t)?t.validators:t)||null}function fo(t){return Array.isArray(t)?Vi(t):t||null}function po(t,e){return(mo(e)?e.asyncValidators:t)||null}function go(t){return Array.isArray(t)?Fi(t):t||null}function mo(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class yo{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=fo(this._rawValidators),this._composedAsyncValidatorFn=go(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===ao}get invalid(){return this.status===uo}get pending(){return this.status==co}get disabled(){return this.status===lo}get enabled(){return this.status!==lo}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=fo(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=go(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=co,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=lo,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ao,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==ao&&this.status!==co||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?lo:ao}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=co,this._hasOwnPendingAsyncValidator=!0;const e=ji(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof vo?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof wo&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?lo:this.errors?uo:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(co)?co:this._anyControlsHaveStatus(uo)?uo:ao}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){mo(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class bo extends yo{constructor(t=null,e,n){super(ho(e),po(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){so(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){so(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class vo extends yo{constructor(t,e,n){super(ho(e),po(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof bo?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class wo extends yo{constructor(t,e,n){super(ho(e),po(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof bo?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}let _o=(()=>{class t extends Gi{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Yi(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}}return t.\u0275fac=function(e){return Oo(e||t)},t.\u0275dir=r.Fb({type:t,features:[r.xb]}),t})();const Oo=r.Pb(_o),Co={provide:Wi,useExisting:Object(r.U)(()=>So)},Eo=(()=>Promise.resolve(null))();let So=(()=>{class t extends Wi{constructor(t,e,n,i){super(),this.control=new bo,this._registered=!1,this.update=new r.n,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=oo(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),io(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?Yi(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Zi(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Eo.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;Eo.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Gi,9),r.Kb(Ii,10),r.Kb(xi,10),r.Kb(_i,10))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r.zb([Co]),r.xb,r.yb]}),t})(),To=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),Io=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({}),t})();const xo=new r.r("NgModelWithFormControlWarning"),Ao={provide:Gi,useExisting:Object(r.U)(()=>ko)};let ko=(()=>{class t extends Gi{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new r.n,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(no(this.form,this,!1),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return Zi(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){Ji(t.control||null,t,!1),so(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,e=this.directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=t.control,n=this.form.get(t.path);e!==n&&(Ji(e||null,t),n instanceof bo&&(Zi(n,t),t.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const e=this.form.get(t.path);(function(t,e){eo(t,e,!1)})(e,t),e.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const e=this.form.get(t.path);e&&function(t,e){return no(t,e,!1)}(e,t)&&e.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){eo(this.form,this,!1),this._oldForm&&no(this._oldForm,this,!1)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Ii,10),r.Kb(xi,10))},t.\u0275dir=r.Fb({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.Ub("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.zb([Ao]),r.xb,r.yb]}),t})();const No={provide:Gi,useExisting:Object(r.U)(()=>Ro)};let Ro=(()=>{class t extends _o{constructor(t,e,n){super(),this._parent=t,this._setValidators(e),this._setAsyncValidators(n)}_checkParentType(){Po(this._parent)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Gi,13),r.Kb(Ii,10),r.Kb(xi,10))},t.\u0275dir=r.Fb({type:t,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[r.zb([No]),r.xb]}),t})();const jo={provide:Gi,useExisting:Object(r.U)(()=>Do)};let Do=(()=>{class t extends Gi{constructor(t,e,n){super(),this._parent=t,this._setValidators(e),this._setAsyncValidators(n)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Yi(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){Po(this._parent)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Gi,13),r.Kb(Ii,10),r.Kb(xi,10))},t.\u0275dir=r.Fb({type:t,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[r.zb([jo]),r.xb]}),t})();function Po(t){return!(t instanceof Ro||t instanceof ko||t instanceof Do)}const Mo={provide:Wi,useExisting:Object(r.U)(()=>Lo)};let Lo=(()=>{class t extends Wi{constructor(t,e,n,i,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new r.n,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=oo(0,i)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),io(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Yi(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Gi,13),r.Kb(Ii,10),r.Kb(xi,10),r.Kb(_i,10),r.Kb(xo,8))},t.\u0275dir=r.Fb({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r.zb([Mo]),r.xb,r.yb]}),t._ngModelWarningSentOnce=!1,t})(),Vo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({imports:[[Io]]}),t})(),Uo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({imports:[Vo]}),t})(),Fo=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:xo,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({imports:[Vo]}),t})(),qo=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r,i=null,o=null;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(i=null!=e.validators?e.validators:null,o=null!=e.asyncValidators?e.asyncValidators:null,r=null!=e.updateOn?e.updateOn:void 0):(i=null!=e.validator?e.validator:null,o=null!=e.asyncValidator?e.asyncValidator:null)),new vo(n,{asyncValidators:o,updateOn:r,validators:i})}control(t,e,n){return new bo(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new wo(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof bo||t instanceof vo||t instanceof wo?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:function(){return new t},token:t,providedIn:Fo}),t})();var Bo=n("mrSG"),Ho=n("z6cu"),zo=n("VRyK"),Go=n("pxpQ"),Ko=n("qgXg"),Wo=n("Ylt2");class $o extends bt.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Qo(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new vt.a;if(this.isStopped||this.hasError?o=we.a.EMPTY:(this.observers.push(t),o=new Wo.a(this,t)),r&&t.add(t=new Go.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||Ko.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class Qo{constructor(t,e){this.time=t,this.value=e}}function Xo(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new $o(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function Yo(t,e){return e?qt(()=>t,e):qt(()=>t)}var Zo=n("tf+s"),Jo=n("spgP");const ts=new r.r("angularfire2.auth.use-emulator"),es=new r.r("angularfire2.auth.settings"),ns=new r.r("angularfire2.auth.tenant-id"),rs=new r.r("angularfire2.auth.langugage-code"),is=new r.r("angularfire2.auth.use-device-language"),os=new r.r("angularfire.auth.persistence");let ss=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new Jo.d(i),f=Object(Jo.h)(h),d=new bt.a,p=Object(yt.a)(void 0).pipe(Object(Go.b)(h.outsideAngular),qt(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(Ut.a)(()=>Object(Jo.g)(t,i,e)),Object(Ut.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(Jo.f)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),Xo({bufferSize:1,refCount:!1}));if(L(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(yt.a)(null);else{p.pipe(ye()).subscribe();const t=p.pipe(qt(t=>t.getRedirectResult().then(t=>t,()=>null)),f,Xo({bufferSize:1,refCount:!1})),e=t=>new It.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(qt(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(qt(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(Yo(n),Object(Zo.a)(h.outsideAngular),Object(Go.b)(h.insideAngular)),this.user=t.pipe(Yo(r),Object(Zo.a)(h.outsideAngular),Object(Go.b)(h.insideAngular)),this.idToken=this.user.pipe(qt(t=>t?Object(mt.a)(t.getIdToken()):Object(yt.a)(null))),this.idTokenResult=this.user.pipe(qt(t=>t?Object(mt.a)(t.getIdTokenResult()):Object(yt.a)(null))),this.credential=Object(zo.a)(t,d,this.authState.pipe(Zt(t=>!t))).pipe(Object(Ut.a)(t=>(null==t?void 0:t.user)?t:null),Object(Zo.a)(h.outsideAngular),Object(Go.b)(h.insideAngular))}return Object(Jo.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>d.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Jo.c),r.Rb(Jo.b,8),r.Rb(r.C),r.Rb(r.A),r.Rb(ts,8),r.Rb(es,8),r.Rb(ns,8),r.Rb(rs,8),r.Rb(is,8),r.Rb(os,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Rb)(Jo.c),Object(r.Rb)(Jo.b,8),Object(r.Rb)(r.C),Object(r.Rb)(r.A),Object(r.Rb)(ts,8),Object(r.Rb)(es,8),Object(r.Rb)(ns,8),Object(r.Rb)(rs,8),Object(r.Rb)(is,8),Object(r.Rb)(os,8))},token:t,providedIn:"any"}),t})();Object(Jo.e)(ss,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);let as=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[ss]}),t})();var us=n("D0XW");function cs(){return t=>t.lift(new ls)}class ls{call(t,e){return e.subscribe(new hs(t))}}class hs extends Ct.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}class fs{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new ds(t,this.compare,this.keySelector))}}class ds extends Ct.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var ps=n("Jgta"),gs=n("zIRd"),ms=n("qOnz"),ys=n("q/0M"),bs=function(t,e){return(bs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function vs(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var ws,_s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Os=Os||{},Cs=_s||self;function Es(){}function Ss(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Ts(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Is="closure_uid_"+(1e9*Math.random()>>>0),xs=0;function As(t,e,n){return t.call.apply(t.bind,arguments)}function ks(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Ns(t,e,n){return(Ns=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?As:ks).apply(null,arguments)}function Rs(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function js(){return Date.now()}function Ds(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Ps(){this.j=this.j,this.i=this.i}Ps.prototype.j=!1,Ps.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Is)&&t[Is]||(t[Is]=++xs)}(this)},Ps.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Ms=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Ls=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Vs(t){return Array.prototype.concat.apply([],arguments)}function Us(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Fs(t){return/^[\s\xa0]*$/.test(t)}var qs,Bs=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Hs(t,e){return-1!=t.indexOf(e)}function zs(t,e){return t<e?-1:t>e?1:0}t:{var Gs=Cs.navigator;if(Gs){var Ks=Gs.userAgent;if(Ks){qs=Ks;break t}}qs=""}function Ws(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function $s(t){var e={};for(var n in t)e[n]=t[n];return e}var Qs="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xs(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Qs.length;o++)n=Qs[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ys(t){return Ys[" "](t),t}Ys[" "]=Es;var Zs,Js,ta=Hs(qs,"Opera"),ea=Hs(qs,"Trident")||Hs(qs,"MSIE"),na=Hs(qs,"Edge"),ra=na||ea,ia=Hs(qs,"Gecko")&&!(Hs(qs.toLowerCase(),"webkit")&&!Hs(qs,"Edge"))&&!(Hs(qs,"Trident")||Hs(qs,"MSIE"))&&!Hs(qs,"Edge"),oa=Hs(qs.toLowerCase(),"webkit")&&!Hs(qs,"Edge");function sa(){var t=Cs.document;return t?t.documentMode:void 0}t:{var aa="",ua=(Js=qs,ia?/rv:([^\);]+)(\)|;)/.exec(Js):na?/Edge\/([\d\.]+)/.exec(Js):ea?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Js):oa?/WebKit\/(\S+)/.exec(Js):ta?/(?:Version)[ \/]?(\S+)/.exec(Js):void 0);if(ua&&(aa=ua?ua[1]:""),ea){var ca=sa();if(null!=ca&&ca>parseFloat(aa)){Zs=String(ca);break t}}Zs=aa}var la={};function ha(t){return function(t,e){var n=la;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=Bs(String(Zs)).split("."),r=Bs(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=zs(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||zs(0==s[2].length,0==a[2].length)||zs(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var fa=Cs.document&&ea&&(sa()||parseInt(Zs,10))||void 0,da=!ea||9<=Number(fa),pa=ea&&!ha("9"),ga=function(){if(!Cs.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Cs.addEventListener("test",Es,e),Cs.removeEventListener("test",Es,e)}catch(n){}return t}();function ma(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function ya(t,e){if(ma.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(ia){t:{try{Ys(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ba[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}ma.prototype.b=function(){this.defaultPrevented=!0},Ds(ya,ma);var ba={2:"touch",3:"pen",4:"mouse"};ya.prototype.b=function(){ya.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,pa)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var va="closure_listenable_"+(1e6*Math.random()|0),wa=0;function _a(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++wa,this.Y=this.Z=!1}function Oa(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Ca(t){this.src=t,this.a={},this.b=0}function Ea(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Ms(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Oa(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Sa(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Ca.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Sa(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new _a(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Ta="closure_lm_"+(1e6*Math.random()|0),Ia={};function xa(t,e,n,r,i){if(r&&r.once)return ka(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)xa(t,e[o],n,r,i);return null}return n=Va(n),t&&t[va]?t.va(e,n,Ts(r)?!!r.capture:!!r,i):Aa(t,e,n,!1,r,i)}function Aa(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Ts(i)?!!i.capture:!!i;if(s&&!da)return null;var a=Ma(t);if(a||(t[Ta]=a=new Ca(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Pa,e=da?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ga||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ja(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function ka(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)ka(t,e[o],n,r,i);return null}return n=Va(n),t&&t[va]?t.wa(e,n,Ts(r)?!!r.capture:!!r,i):Aa(t,e,n,!0,r,i)}function Na(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Na(t,e[o],n,r,i);else r=Ts(r)?!!r.capture:!!r,n=Va(n),t&&t[va]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=Sa(o=t.a[e],n,r,i))&&(Oa(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Ma(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Sa(e,n,r,i)),(n=-1<t?e[t]:null)&&Ra(n))}function Ra(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[va])Ea(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ja(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ma(e))?(Ea(n,t),0==n.b&&(n.src=null,e[Ta]=null)):Oa(t)}}}function ja(t){return t in Ia?Ia[t]:Ia[t]="on"+t}function Da(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Ra(t),n.call(r,e)}function Pa(t,e){if(t.Y)return!0;if(!da){if(!e)t:{e=["window","event"];for(var n=Cs,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Da(t,e=new ya(e,this))}return Da(t,new ya(e,this))}function Ma(t){return(t=t[Ta])instanceof Ca?t:null}var La="__closure_events_fn_"+(1e9*Math.random()>>>0);function Va(t){return"function"==typeof t?t:(t[La]||(t[La]=function(e){return t.handleEvent(e)}),t[La])}function Ua(){Ps.call(this),this.c=new Ca(this),this.J=this,this.C=null}function Fa(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new ma(e,t);else if(e instanceof ma)e.target=e.target||t;else{var i=e;Xs(e=new ma(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=qa(s,r,!0,e)&&i}if(i=qa(s=e.a=t,r,!0,e)&&i,i=qa(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=qa(s=e.a=n[o],r,!1,e)&&i}function qa(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&Ea(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Ds(Ua,Ps),Ua.prototype[va]=!0,(ws=Ua.prototype).addEventListener=function(t,e,n,r){xa(this,t,e,n,r)},ws.removeEventListener=function(t,e,n,r){Na(this,t,e,n,r)},ws.G=function(){if(Ua.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Oa(n[r]);delete e.a[t],e.b--}}this.C=null},ws.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},ws.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Ba=Cs.JSON.stringify;function Ha(){this.b=this.a=null}var za,Ga=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new Wa},function(t){t.reset()});function Ka(){var t=Ya,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Wa(){this.next=this.b=this.a=null}function $a(t){Cs.setTimeout(function(){throw t},0)}function Qa(t,e){za||function(){var t=Cs.Promise.resolve(void 0);za=function(){t.then(Za)}}(),Xa||(za(),Xa=!0),Ya.add(t,e)}Ha.prototype.add=function(t,e){var n=Ga.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Wa.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Wa.prototype.reset=function(){this.next=this.b=this.a=null};var Xa=!1,Ya=new Ha;function Za(){for(var t;t=Ka();){try{t.a.call(t.b)}catch(n){$a(n)}var e=Ga;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Xa=!1}function Ja(t,e){Ua.call(this),this.b=t||1,this.a=e||Cs,this.f=Ns(this.Za,this),this.g=js()}function tu(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function eu(t,e,n){if("function"==typeof t)n&&(t=Ns(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Ns(t.handleEvent,t)}return 2147483647<Number(e)?-1:Cs.setTimeout(t,e||0)}function nu(t){t.a=eu(function(){t.a=null,t.c&&(t.c=!1,nu(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Ds(Ja,Ua),(ws=Ja.prototype).aa=!1,ws.M=null,ws.Za=function(){if(this.aa){var t=js()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Fa(this,"tick"),this.aa&&(tu(this),this.start()))}},ws.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=js())},ws.G=function(){Ja.X.G.call(this),tu(this),delete this.a};var ru=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}bs(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:nu(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Cs.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Ps);function iu(t){Ps.call(this),this.b=t,this.a={}}Ds(iu,Ps);var ou=[];function su(t,e,n,r){Array.isArray(n)||(n&&(ou[0]=n.toString()),n=ou);for(var i=0;i<n.length;i++){var o=xa(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function au(t){Ws(t.a,function(t,e){this.a.hasOwnProperty(e)&&Ra(t)},t),t.a={}}function uu(){this.a=!0}function cu(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Ba(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}iu.prototype.G=function(){iu.X.G.call(this),au(this)},iu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},uu.prototype.info=function(){};var lu={},hu=null;function fu(){return hu=hu||new Ua}function du(t){ma.call(this,lu.Fa,t)}function pu(t){var e=fu();Fa(e,new du(e,t))}function gu(t,e){ma.call(this,lu.STAT_EVENT,t),this.stat=e}function mu(t){var e=fu();Fa(e,new gu(e,t))}function yu(t){ma.call(this,lu.Ga,t)}function bu(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Cs.setTimeout(function(){t()},e)}lu.Fa="serverreachability",Ds(du,ma),lu.STAT_EVENT="statevent",Ds(gu,ma),lu.Ga="timingevent",Ds(yu,ma);var vu={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},wu={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function _u(){}function Ou(){}_u.prototype.a=null;var Cu,Eu={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Su(){ma.call(this,"d")}function Tu(){ma.call(this,"c")}function Iu(){}function xu(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new iu(this),this.P=Au,this.R=new Ja(t=ra?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Ds(Su,ma),Ds(Tu,ma),Ds(Iu,_u),Cu=new Iu;var Au=45e3,ku={},Nu={};function Ru(t,e,n){t.H=1,t.i=tc($u(e)),t.j=n,t.I=!0,ju(t,null)}function ju(t,e){t.u=js(),Mu(t),t.l=$u(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),dc(n.b,"t",r),t.D=0,t.a=al(t.g,t.g.C?e:null),0<t.O&&(t.F=new ru(Ns(t.Ca,t,t.a),t.O)),su(t.J,t.a,"readystatechange",t.Xa),e=t.B?$s(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),pu(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function Du(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Pu(t,n);if(i==Nu){4==e&&(t.h=4,mu(14),r=!1),cu(t.c,t.f,null,"[Incomplete Response]");break}if(i==ku){t.h=4,mu(15),cu(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}cu(t.c,t.f,i,null),qu(t,i)}4==e&&0==n.length&&(t.h=1,mu(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Jc(e),e.F=!0,mu(11))):(cu(t.c,t.f,n,"[Invalid Chunked Response]"),Fu(t),Uu(t))}function Pu(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Nu:(n=Number(e.substring(n,r)),isNaN(n)?ku:(r+=1)+n>e.length?Nu:(e=e.substr(r,n),t.D=r+n,e))}function Mu(t){t.T=js()+t.P,Lu(t,t.P)}function Lu(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=bu(Ns(t.Va,t),e)}function Vu(t){t.o&&(Cs.clearTimeout(t.o),t.o=null)}function Uu(t){0==t.g.v||t.A||nl(t.g,t)}function Fu(t){Vu(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,tu(t.R),au(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function qu(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||wc(n.b,t)))if(n.I=t.N,!t.C&&wc(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(Bv){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;el(n),zc(n)}Zc(n),mu(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=bu(Ns(n.Sa,n),6e3));if(1>=vc(n.b)&&n.ea){try{n.ea()}catch(Bv){}n.ea=void 0}}else il(n,11)}else if((t.C||n.a==t)&&el(n),!Fs(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(Hs(l,"spdy")||Hs(l,"quic")||Hs(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(_c(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Ju(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=js()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=sl(u,u.C?u.ga:null,u.fa),d.C){Oc(u.b,d);var p=d,g=u.D;g&&p.setTimeout(g),p.o&&(Vu(p),Mu(p)),u.a=d}else Yc(u);0<n.g.length&&Wc(n)}else"stop"!=i[0]&&"close"!=i[0]||il(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?il(n,7):Hc(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);pu(4)}catch(Bv){}}function Bu(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Ss(t)||"string"==typeof t)Ls(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Ss(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Ss(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Hu(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Hu)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function zu(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Gu(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Gu(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Gu(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(ws=xu.prototype).setTimeout=function(t){this.P=t},ws.Xa=function(t){t=t.target;var e=this.F;e&&3==Uc(t)?e.f():this.Ca(t)},ws.Ca=function(t){try{if(t==this.a)t:{var e=Uc(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!ra&&!this.a.$())){this.A||4!=e||7==n||pu(8==n||0>=r?3:2),Vu(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Fs(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,mu(12),Fu(this),Uu(this);break t}cu(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,qu(this,u)}this.I?(Du(this,e,o),ra&&this.b&&3==e&&(su(this.J,this.R,"tick",this.Wa),this.R.start())):(cu(this.c,this.f,o,null),qu(this,o)),4==e&&Fu(this),this.b&&!this.A&&(4==e?nl(this.g,this):(this.b=!1,Mu(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,mu(12)):(this.h=0,mu(13)),Fu(this),Uu(this)}}}catch(c){}},ws.Wa=function(){if(this.a){var t=Uc(this.a),e=this.a.$();this.D<e.length&&(Vu(this),Du(this,t,e),this.b&&4!=t&&Mu(this))}},ws.cancel=function(){this.A=!0,Fu(this)},ws.Va=function(){this.o=null;var t=js();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(pu(3),mu(17)),Fu(this),this.h=2,Uu(this)):Lu(this,this.T-t)},(ws=Hu.prototype).K=function(){zu(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},ws.L=function(){return zu(this),this.a.concat()},ws.get=function(t,e){return Gu(this.b,t)?this.b[t]:e},ws.set=function(t,e){Gu(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},ws.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ku=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Wu(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Wu){this.a=void 0!==e?e:t.a,Qu(this,t.f),this.j=t.j,Xu(this,t.c),Yu(this,t.h),this.g=t.g,e=t.b;var n=new cc;n.c=e.c,e.a&&(n.a=new Hu(e.a),n.b=e.b),Zu(this,n),this.i=t.i}else t&&(n=String(t).match(Ku))?(this.a=!!e,Qu(this,n[1]||"",!0),this.j=ec(n[2]||""),Xu(this,n[3]||"",!0),Yu(this,n[4]),this.g=ec(n[5]||"",!0),Zu(this,n[6]||"",!0),this.i=ec(n[7]||"")):(this.a=!!e,this.b=new cc(null,this.a))}function $u(t){return new Wu(t)}function Qu(t,e,n){t.f=n?ec(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Xu(t,e,n){t.c=n?ec(e,!0):e}function Yu(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Zu(t,e,n){e instanceof cc?(t.b=e,function(t,e){e&&!t.f&&(lc(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(hc(this,e),dc(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=nc(e,ac)),t.b=new cc(e,t.a))}function Ju(t,e,n){t.b.set(e,n)}function tc(t){return Ju(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^js()).toString(36)),t}function ec(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function nc(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,rc),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function rc(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Wu.prototype.toString=function(){var t=[],e=this.f;e&&t.push(nc(e,ic,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(nc(e,ic,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(nc(n,"/"==n.charAt(0)?sc:oc,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",nc(n,uc)),t.join("")};var ic=/[#\/\?@]/g,oc=/[#\?:]/g,sc=/[#\?]/g,ac=/[#\?@]/g,uc=/#/g;function cc(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function lc(t){t.a||(t.a=new Hu,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function hc(t,e){lc(t),e=pc(t,e),Gu(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Gu((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&zu(t)))}function fc(t,e){return lc(t),e=pc(t,e),Gu(t.a.b,e)}function dc(t,e,n){hc(t,e),0<n.length&&(t.c=null,t.a.set(pc(t,e),Us(n)),t.b+=n.length)}function pc(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(ws=cc.prototype).add=function(t,e){lc(this),this.c=null,t=pc(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},ws.forEach=function(t,e){lc(this),this.a.forEach(function(n,r){Ls(n,function(n){t.call(e,n,r,this)},this)},this)},ws.L=function(){lc(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},ws.K=function(t){lc(this);var e=[];if("string"==typeof t)fc(this,t)&&(e=Vs(e,this.a.get(pc(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Vs(e,t[n])}return e},ws.set=function(t,e){return lc(this),this.c=null,fc(this,t=pc(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},ws.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},ws.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var gc=function(){return function(t,e){this.b=t,this.a=e}}();function mc(t){this.g=t||yc,t=Cs.PerformanceNavigationTiming?0<(t=Cs.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Cs.ia&&Cs.ia.ya&&Cs.ia.ya()&&Cs.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var yc=10;function bc(t){return!!t.b||!!t.a&&t.a.size>=t.f}function vc(t){return t.b?1:t.a?t.a.size:0}function wc(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function _c(t,e){t.a?t.a.add(e):t.b=e}function Oc(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Cc(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=vs(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Us(t.c)}function Ec(){}function Sc(){this.a=new Ec}function Tc(t,e,n){var r=n||"";try{Bu(t,function(t,n){var i=t;Ts(t)&&(i=Ba(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Sw){throw e.push(r+"type="+encodeURIComponent("_badmap")),Sw}}function Ic(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}mc.prototype.cancel=function(){var t,e;if(this.c=Cc(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=vs(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Ec.prototype.stringify=function(t){return Cs.JSON.stringify(t,void 0)},Ec.prototype.parse=function(t){return Cs.JSON.parse(t,void 0)};var xc=Cs.JSON.parse;function Ac(t){Ua.call(this),this.headers=new Hu,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=kc,this.D=this.F=!1}Ds(Ac,Ua);var kc="",Nc=/^https?$/i,Rc=["POST","PUT"];function jc(t){return"content-type"==t.toLowerCase()}function Dc(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Pc(t),Lc(t)}function Pc(t){t.u||(t.u=!0,Fa(t,"complete"),Fa(t,"error"))}function Mc(t){if(t.b&&void 0!==Os&&(!t.s[1]||4!=Uc(t)||2!=t.W()))if(t.l&&4==Uc(t))eu(t.za,0,t);else if(Fa(t,"readystatechange"),4==Uc(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Ku)[1]||null;if(!o&&Cs.self&&Cs.self.location){var s=Cs.self.location.protocol;o=s.substr(0,s.length-1)}i=!Nc.test(o?o.toLowerCase():"")}e=i}if(e)Fa(t,"complete"),Fa(t,"success");else{t.h=6;try{var a=2<Uc(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Pc(t)}}finally{Lc(t)}}}function Lc(t,e){if(t.a){Vc(t);var n=t.a,r=t.s[0]?Es:null;t.a=null,t.s=null,e||Fa(t,"ready");try{n.onreadystatechange=r}catch(Sw){}}}function Vc(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Cs.clearTimeout(t.m),t.m=null)}function Uc(t){return t.a?t.a.readyState:0}function Fc(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Ws(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ju(t,e,n))}function qc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Bc(t){this.pa=0,this.g=[],this.c=new uu,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=qc("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=qc("baseRetryDelayMs",5e3,t),this.Ra=qc("retryDelaySeedMs",1e4,t),this.Ma=qc("forwardChannelMaxRetries",2,t),this.ma=qc("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new mc(t&&t.concurrentRequestLimit),this.ka=new Sc,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Hc(t){if(Gc(t),3==t.v){var e=t.R++,n=$u(t.B);Ju(n,"SID",t.J),Ju(n,"RID",e),Ju(n,"TYPE","terminate"),Qc(t,n),(e=new xu(t,t.c,e,void 0)).H=2,e.i=tc($u(n)),n=!1,Cs.navigator&&Cs.navigator.sendBeacon&&(n=Cs.navigator.sendBeacon(e.i.toString(),"")),!n&&Cs.Image&&((new Image).src=e.i,n=!0),n||(e.a=al(e.g,null),e.a.ba(e.i)),e.u=js(),Mu(e)}ol(t)}function zc(t){t.a&&(Jc(t),t.a.cancel(),t.a=null)}function Gc(t){zc(t),t.j&&(Cs.clearTimeout(t.j),t.j=null),el(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Cs.clearTimeout(t.h),t.h=null)}function Kc(t,e){t.g.push(new gc(t.Oa++,e)),3==t.v&&Wc(t)}function Wc(t){bc(t.b)||t.h||(t.h=!0,Qa(t.Ba,t),t.u=0)}function $c(t,e){var n;n=e?e.f:t.R++;var r=$u(t.B);Ju(r,"SID",t.J),Ju(r,"RID",n),Ju(r,"AID",t.P),Qc(t,r),t.i&&t.l&&Fc(r,t.i,t.l),n=new xu(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Xc(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),_c(t.b,n),Ru(n,r,e)}function Qc(t,e){t.f&&Bu({},function(t,n){Ju(e,n,t)})}function Xc(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Ns(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Tc(l,s,"req"+c+"_")}catch(Ll){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Yc(t){t.a||t.j||(t.T=1,Qa(t.Aa,t),t.o=0)}function Zc(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=bu(Ns(t.Aa,t),rl(t,t.o)),t.o++,0))}function Jc(t){null!=t.s&&(Cs.clearTimeout(t.s),t.s=null)}function tl(t){t.a=new xu(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=$u(t.la);Ju(e,"RID","rpc"),Ju(e,"SID",t.J),Ju(e,"CI",t.H?"0":"1"),Ju(e,"AID",t.P),Qc(t,e),Ju(e,"TYPE","xmlhttp"),t.i&&t.l&&Fc(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=tc($u(e)),n.j=null,n.I=!0,ju(n,t)}function el(t){null!=t.m&&(Cs.clearTimeout(t.m),t.m=null)}function nl(t,e){var n=null;if(t.a==e){el(t),Jc(t),t.a=null;var r=2}else{if(!wc(t.b,e))return;n=e.s,Oc(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=js()-e.u;var i=t.u;Fa(r=fu(),new yu(r,n,e,i)),Wc(t)}else Yc(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(vc(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=bu(Ns(t.Ba,t,e),rl(t,t.u)),t.u++,0)))}(t,e)||2==r&&Zc(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:il(t,5);break;case 4:il(t,10);break;case 3:il(t,6);break;default:il(t,2)}}function rl(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function il(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Ns(t.Ya,t);n||(n=new Wu("//www.google.com/images/cleardot.gif"),Cs.location&&"http"==Cs.location.protocol||Qu(n,"https"),tc(n)),function(t,e){var n=new uu;if(Cs.Image){var r=new Image;r.onload=Rs(Ic,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Rs(Ic,n,r,"TestLoadImage: error",!1,e),r.onabort=Rs(Ic,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Rs(Ic,n,r,"TestLoadImage: timeout",!1,e),Cs.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else mu(2);t.v=0,t.f&&t.f.ra(e),ol(t),Gc(t)}function ol(t){t.v=0,t.I=-1,t.f&&(0==Cc(t.b).length&&0==t.g.length||(t.b.c.length=0,Us(t.g),t.g.length=0),t.f.qa())}function sl(t,e,n){var r=function(t){return t instanceof Wu?$u(t):new Wu(t,void 0)}(n);if(""!=r.c)e&&Xu(r,e+"."+r.c),Yu(r,r.h);else{var i=Cs.location;r=function(t,e,n,r){var i=new Wu(null,void 0);return t&&Qu(i,t),e&&Xu(i,e),n&&Yu(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Ws(t.V,function(t,e){Ju(r,e,t)}),n=t.na,(e=t.A)&&n&&Ju(r,e,n),Ju(r,"VER",t.ha),Qc(t,r),r}function al(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ac(t.Na)).F=t.C,e}function ul(){}function cl(){if(ea&&!(10<=Number(fa)))throw Error("Environmental error: no available transport.")}function ll(t,e){Ua.call(this),this.a=new Bc(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Fs(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Fs(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new dl(this)}function hl(t){Su.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function fl(){Tu.call(this),this.status=1}function dl(t){this.a=t}(ws=Ac.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Cu),this.a.onreadystatechange=Ns(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void Dc(this,o)}t=n||"";var i=new Hu(this.headers);r&&Bu(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=jc,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Cs.FormData&&t instanceof Cs.FormData,!(0<=Ms(Rc,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Vc(this),0<this.o&&((this.D=function(t){return ea&&ha(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Ns(this.xa,this)):this.m=eu(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Dc(this,o)}},ws.xa=function(){void 0!==Os&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Fa(this,"timeout"),this.abort(8))},ws.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Fa(this,"complete"),Fa(this,"abort"),Lc(this))},ws.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Lc(this,!0)),Ac.X.G.call(this)},ws.za=function(){this.j||(this.A||this.l||this.g?Mc(this):this.Ua())},ws.Ua=function(){Mc(this)},ws.W=function(){try{return 2<Uc(this)?this.a.status:-1}catch(Js){return-1}},ws.$=function(){try{return this.a?this.a.responseText:""}catch(Js){return""}},ws.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),xc(e)}},ws.ua=function(){return this.h},ws.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(ws=Bc.prototype).ha=8,ws.v=1,ws.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new xu(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Xs(r=$s(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Xc(this,n,e),Ju(i=$u(this.B),"RID",t),Ju(i,"CVER",22),this.A&&Ju(i,"X-HTTP-Session-Id",this.A),Qc(this,i),this.i&&r&&Fc(i,this.i,r),_c(this.b,n),this.Ia&&Ju(i,"TYPE","init"),this.da?(Ju(i,"$req",e),Ju(i,"SID","null"),n.U=!0,Ru(n,i,null)):Ru(n,i,e),this.v=2}}else 3==this.v&&(t?$c(this,t):0==this.g.length||bc(this.b)||$c(this))},ws.Aa=function(){if(this.j=null,tl(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=bu(Ns(this.Ta,this),t)}},ws.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,mu(10),zc(this),tl(this))},ws.Sa=function(){null!=this.m&&(this.m=null,zc(this),Zc(this),mu(19))},ws.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),mu(2)):(this.c.info("Failed to ping google.com"),mu(1))},(ws=ul.prototype).ta=function(){},ws.sa=function(){},ws.ra=function(){},ws.qa=function(){},ws.Ja=function(){},cl.prototype.a=function(t,e){return new ll(t,e)},Ds(ll,Ua),ll.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;mu(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=sl(t,null,t.fa),Wc(t)},ll.prototype.close=function(){Hc(this.a)},ll.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Kc(this.a,e)}else this.l?((e={}).__data__=Ba(t),Kc(this.a,e)):Kc(this.a,t)},ll.prototype.G=function(){this.a.f=null,delete this.f,Hc(this.a),delete this.a,ll.X.G.call(this)},Ds(hl,Su),Ds(fl,Tu),Ds(dl,ul),dl.prototype.ta=function(){Fa(this.a,"a")},dl.prototype.sa=function(t){Fa(this.a,new hl(t))},dl.prototype.ra=function(t){Fa(this.a,new fl(t))},dl.prototype.qa=function(){Fa(this.a,"b")},cl.prototype.createWebChannel=cl.prototype.a,ll.prototype.send=ll.prototype.h,ll.prototype.open=ll.prototype.g,ll.prototype.close=ll.prototype.close,vu.NO_ERROR=0,vu.TIMEOUT=8,vu.HTTP_ERROR=6,wu.COMPLETE="complete",Ou.EventType=Eu,Eu.OPEN="a",Eu.CLOSE="b",Eu.ERROR="c",Eu.MESSAGE="d",Ua.prototype.listen=Ua.prototype.va,Ac.prototype.listenOnce=Ac.prototype.wa,Ac.prototype.getLastError=Ac.prototype.Qa,Ac.prototype.getLastErrorCode=Ac.prototype.ua,Ac.prototype.getStatus=Ac.prototype.W,Ac.prototype.getResponseJson=Ac.prototype.Pa,Ac.prototype.getResponseText=Ac.prototype.$,Ac.prototype.send=Ac.prototype.ba;var pl=vu,gl=wu,ml=lu,yl=Ou,bl=Ac,vl=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();vl.o=-1;var wl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},_l=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Bo.c)(e,t),e}(Error),Ol=new ys.b("@firebase/firestore");function Cl(){return Ol.logLevel}function El(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ol.logLevel<=ys.a.DEBUG){var r=e.map(Il);Ol.debug.apply(Ol,Object(Bo.f)(["Firestore (8.5.0): "+t],r))}}function Sl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ol.logLevel<=ys.a.ERROR){var r=e.map(Il);Ol.error.apply(Ol,Object(Bo.f)(["Firestore (8.5.0): "+t],r))}}function Tl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ol.logLevel<=ys.a.WARN){var r=e.map(Il);Ol.warn.apply(Ol,Object(Bo.f)(["Firestore (8.5.0): "+t],r))}}function Il(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Sw){return t}}function xl(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.5.0) INTERNAL ASSERTION FAILED: "+t;throw Sl(e),new Error(e)}function Al(t,e){t||xl()}function kl(t,e){return t}function Nl(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Rl=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Nl(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function jl(t,e){return t<e?-1:t>e?1:0}function Dl(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Pl(t){return t+"\0"}var Ml=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new _l(wl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new _l(wl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new _l(wl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new _l(wl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?jl(this.nanoseconds,t.nanoseconds):jl(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Ll=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Ml(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Vl(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ul(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Fl(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ql=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&xl(),void 0===n?n=t.length-e:n>t.length-e&&xl(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Bl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Bo.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new _l(wl.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(ql),Hl=/^[_a-zA-Z][_a-zA-Z0-9]*$/,zl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Bo.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Hl.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new _l(wl.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new _l(wl.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new _l(wl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new _l(wl.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(ql),Gl=function(){function t(t){this.fields=t,t.sort(zl.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Dl(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),Kl=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return jl(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Kl.EMPTY_BYTE_STRING=new Kl("");var Wl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $l(t){if(Al(!!t),"string"==typeof t){var e=0,n=Wl.exec(t);if(Al(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ql(t.seconds),nanos:Ql(t.nanos)}}function Ql(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Xl(t){return"string"==typeof t?Kl.fromBase64String(t):Kl.fromUint8Array(t)}function Yl(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Zl(t){var e=t.mapValue.fields.__previous_value__;return Yl(e)?Zl(e):e}function Jl(t){var e=$l(t.mapValue.fields.__local_write_time__.timestampValue);return new Ml(e.seconds,e.nanos)}function th(t){return null==t}function eh(t){return 0===t&&1/t==-1/0}function nh(t){return"number"==typeof t&&Number.isInteger(t)&&!eh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var rh=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Bl.fromString(e))},t.fromName=function(e){return new t(Bl.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Bl.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Bl.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Bl(e.slice()))},t}();function ih(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Yl(t)?4:10:xl()}function oh(t,e){var n=ih(t);if(n!==ih(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Jl(t).isEqual(Jl(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=$l(t.timestampValue),r=$l(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Xl(t.bytesValue).isEqual(Xl(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Ql(t.geoPointValue.latitude)===Ql(e.geoPointValue.latitude)&&Ql(t.geoPointValue.longitude)===Ql(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Ql(t.integerValue)===Ql(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Ql(t.doubleValue),r=Ql(e.doubleValue);return n===r?eh(n)===eh(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Dl(t.arrayValue.values||[],e.arrayValue.values||[],oh);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Vl(n)!==Vl(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!oh(n[i],r[i])))return!1;return!0}(t,e);default:return xl()}}function sh(t,e){return void 0!==(t.values||[]).find(function(t){return oh(t,e)})}function ah(t,e){var n=ih(t),r=ih(e);if(n!==r)return jl(n,r);switch(n){case 0:return 0;case 1:return jl(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Ql(t.integerValue||t.doubleValue),r=Ql(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return uh(t.timestampValue,e.timestampValue);case 4:return uh(Jl(t),Jl(e));case 5:return jl(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Xl(t),r=Xl(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=jl(n[i],r[i]);if(0!==o)return o}return jl(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=jl(Ql(t.latitude),Ql(e.latitude));return 0!==n?n:jl(Ql(t.longitude),Ql(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=ah(n[i],r[i]);if(o)return o}return jl(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=jl(r[s],o[s]);if(0!==a)return a;var u=ah(n[r[s]],i[o[s]]);if(0!==u)return u}return jl(r.length,o.length)}(t.mapValue,e.mapValue);default:throw xl()}}function uh(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return jl(t,e);var n=$l(t),r=$l(e),i=jl(n.seconds,r.seconds);return 0!==i?i:jl(n.nanos,r.nanos)}function ch(t){return lh(t)}function lh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=$l(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Xl(t.bytesValue).toBase64():"referenceValue"in t?rh.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=lh(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+lh(t.fields[o])}return e+"}"}(t.mapValue):xl();var e}function hh(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function fh(t){return!!t&&"integerValue"in t}function dh(t){return!!t&&"arrayValue"in t}function ph(t){return!!t&&"nullValue"in t}function gh(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function mh(t){return!!t&&"mapValue"in t}var yh=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(zl.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach(function(t,n){t?e.set(n,t):e.delete(n)})},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return oh(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===ih(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),s=mh(o)?Object.assign({},o.mapValue.fields):{};return n.forEach(function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(s[n]=o,i=!0)}else null!==t?(s[n]=t,i=!0):s.hasOwnProperty(n)&&(delete s[n],i=!0)}),i?{mapValue:{fields:s}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(zl.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!mh(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function bh(t){var e=[];return Ul(t.fields||{},function(t,n){var r=new zl([t]);if(mh(n)){var i=bh(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new Gl(e)}var vh=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Ll.min(),yh.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,yh.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,yh.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=yh.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=yh.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),wh=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function _h(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new wh(t,e,n,r,i,o,s)}function Oh(t){var e=kl(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+ch(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),th(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Ph(e.startAt)),e.endAt&&(n+="|ub:",n+=Ph(e.endAt)),e.h=n}return e.h}function Ch(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Lh(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!oh(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Uh(t.startAt,e.startAt)&&Uh(t.endAt,e.endAt)}function Eh(t){return rh.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Sh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Bo.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Th(t,n,r):"array-contains"===n?new kh(t,r):"in"===n?new Nh(t,r):"not-in"===n?new Rh(t,r):"array-contains-any"===n?new jh(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Ih(t,n):new xh(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(ah(e,this.value)):null!==e&&ih(this.value)===ih(e)&&this.m(ah(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return xl()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Th=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=rh.fromName(r.referenceValue),i}return Object(Bo.c)(e,t),e.prototype.matches=function(t){var e=rh.comparator(t.key,this.key);return this.m(e)},e}(Sh),Ih=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Ah(0,n),r}return Object(Bo.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Sh),xh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Ah(0,n),r}return Object(Bo.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Sh);function Ah(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return rh.fromName(t.referenceValue)})}var kh=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Bo.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return dh(e)&&sh(e.arrayValue,this.value)},e}(Sh),Nh=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Bo.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&sh(this.value.arrayValue,e)},e}(Sh),Rh=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Bo.c)(e,t),e.prototype.matches=function(t){if(sh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!sh(this.value.arrayValue,e)},e}(Sh),jh=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Bo.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!dh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return sh(e.value.arrayValue,t)})},e}(Sh),Dh=function(t,e){this.position=t,this.before=e};function Ph(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return ch(t)}).join(",")}var Mh=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Lh(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Vh(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?rh.comparator(rh.fromName(s.referenceValue),n.key):ah(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Uh(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!oh(t.position[n],e.position[n]))return!1;return!0}var Fh=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function qh(t,e,n,r,i,o,s,a){return new Fh(t,e,n,r,i,o,s,a)}function Bh(t){return new Fh(t)}function Hh(t){return!th(t.limit)&&"F"===t.limitType}function zh(t){return!th(t.limit)&&"L"===t.limitType}function Gh(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Kh(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Wh(t){return null!==t.collectionGroup}function $h(t){var e=kl(t);if(null===e.p){e.p=[];var n=Kh(e),r=Gh(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Mh(n)),e.p.push(new Mh(zl.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Mh(zl.keyField(),u))}}}return e.p}function Qh(t){var e=kl(t);if(!e.T)if("F"===e.limitType)e.T=_h(e.path,e.collectionGroup,$h(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=$h(e);r<i.length;r++){var o=i[r];n.push(new Mh(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Dh(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Dh(e.startAt.position,!e.startAt.before):null;e.T=_h(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function Xh(t,e,n){return new Fh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Yh(t,e){return Ch(Qh(t),Qh(e))&&t.limitType===e.limitType}function Zh(t){return Oh(Qh(t))+"|lt:"+t.limitType}function Jh(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+ch(e.value);var e}).join(", ")+"]"),th(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Ph(t.startAt)),t.endAt&&(e+=", endAt: "+Ph(t.endAt)),"Target("+e+")"}(Qh(t))+"; limitType="+t.limitType+")"}function tf(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):rh.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Vh(t.startAt,$h(t),e)||t.endAt&&Vh(t.endAt,$h(t),e))}(t,e)}function ef(t){return function(e,n){for(var r=!1,i=0,o=$h(t);i<o.length;i++){var s=o[i],a=nf(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function nf(t,e,n){var r=t.field.isKeyField()?rh.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?ah(r,i):xl()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return xl()}}function rf(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eh(e)?"-0":e}}function of(t){return{integerValue:""+t}}function sf(t,e){return nh(e)?of(e):rf(t,e)}var af=function(){this._=void 0};function uf(t,e,n){return t instanceof hf?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof ff?df(t,e):t instanceof pf?gf(t,e):function(t,e){var n=lf(t,e),r=yf(n)+yf(t.A);return fh(n)&&fh(t.A)?of(r):rf(t.R,r)}(t,e)}function cf(t,e,n){return t instanceof ff?df(t,e):t instanceof pf?gf(t,e):n}function lf(t,e){return t instanceof mf?fh(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var hf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Bo.c)(e,t),e}(af),ff=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Bo.c)(e,t),e}(af);function df(t,e){for(var n=bf(e),r=function(t){n.some(function(e){return oh(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var pf=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Bo.c)(e,t),e}(af);function gf(t,e){for(var n=bf(e),r=function(t){n=n.filter(function(e){return!oh(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var mf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(Bo.c)(e,t),e}(af);function yf(t){return Ql(t.integerValue||t.doubleValue)}function bf(t){return dh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var vf=function(t,e){this.field=t,this.transform=e},wf=function(t,e){this.version=t,this.transformResults=e},_f=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Of(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Cf=function(){};function Ef(t,e,n){t instanceof Af?function(t,e,n){var r=t.value.clone(),i=Rf(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof kf?function(t,e,n){if(Of(t.precondition,e)){var r=Rf(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Nf(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Sf(t,e,n){t instanceof Af?function(t,e,n){if(Of(t.precondition,e)){var r=t.value.clone(),i=jf(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(xf(e),r).setHasLocalMutations()}}(t,e,n):t instanceof kf?function(t,e,n){if(Of(t.precondition,e)){var r=jf(t.fieldTransforms,n,e),i=e.data;i.setAll(Nf(t)),i.setAll(r),e.convertToFoundDocument(xf(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Of(t.precondition,e)&&e.convertToNoDocument(Ll.min())}(t,e)}function Tf(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=lf(o.transform,s||null);null!=a&&(null==n&&(n=yh.empty()),n.set(o.field,a))}return n||null}function If(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Dl(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ff&&e instanceof ff||t instanceof pf&&e instanceof pf?Dl(t.elements,e.elements,oh):t instanceof mf&&e instanceof mf?oh(t.A,e.A):t instanceof hf&&e instanceof hf}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function xf(t){return t.isFoundDocument()?t.version:Ll.min()}var Af=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(Bo.c)(e,t),e}(Cf),kf=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(Bo.c)(e,t),e}(Cf);function Nf(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function Rf(t,e,n){var r=new Map;Al(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,cf(s,a,n[i]))}return r}function jf(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,uf(a,u,e))}return r}var Df,Pf,Mf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(Bo.c)(e,t),e}(Cf),Lf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(Bo.c)(e,t),e}(Cf),Vf=function(t){this.count=t};function Uf(t){switch(t){case wl.OK:return xl();case wl.CANCELLED:case wl.UNKNOWN:case wl.DEADLINE_EXCEEDED:case wl.RESOURCE_EXHAUSTED:case wl.INTERNAL:case wl.UNAVAILABLE:case wl.UNAUTHENTICATED:return!1;case wl.INVALID_ARGUMENT:case wl.NOT_FOUND:case wl.ALREADY_EXISTS:case wl.PERMISSION_DENIED:case wl.FAILED_PRECONDITION:case wl.ABORTED:case wl.OUT_OF_RANGE:case wl.UNIMPLEMENTED:case wl.DATA_LOSS:return!0;default:return xl()}}function Ff(t){if(void 0===t)return Sl("GRPC error has no .code"),wl.UNKNOWN;switch(t){case Df.OK:return wl.OK;case Df.CANCELLED:return wl.CANCELLED;case Df.UNKNOWN:return wl.UNKNOWN;case Df.DEADLINE_EXCEEDED:return wl.DEADLINE_EXCEEDED;case Df.RESOURCE_EXHAUSTED:return wl.RESOURCE_EXHAUSTED;case Df.INTERNAL:return wl.INTERNAL;case Df.UNAVAILABLE:return wl.UNAVAILABLE;case Df.UNAUTHENTICATED:return wl.UNAUTHENTICATED;case Df.INVALID_ARGUMENT:return wl.INVALID_ARGUMENT;case Df.NOT_FOUND:return wl.NOT_FOUND;case Df.ALREADY_EXISTS:return wl.ALREADY_EXISTS;case Df.PERMISSION_DENIED:return wl.PERMISSION_DENIED;case Df.FAILED_PRECONDITION:return wl.FAILED_PRECONDITION;case Df.ABORTED:return wl.ABORTED;case Df.OUT_OF_RANGE:return wl.OUT_OF_RANGE;case Df.UNIMPLEMENTED:return wl.UNIMPLEMENTED;case Df.DATA_LOSS:return wl.DATA_LOSS;default:return xl()}}(Pf=Df||(Df={}))[Pf.OK=0]="OK",Pf[Pf.CANCELLED=1]="CANCELLED",Pf[Pf.UNKNOWN=2]="UNKNOWN",Pf[Pf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pf[Pf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pf[Pf.NOT_FOUND=5]="NOT_FOUND",Pf[Pf.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pf[Pf.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pf[Pf.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pf[Pf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pf[Pf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pf[Pf.ABORTED=10]="ABORTED",Pf[Pf.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pf[Pf.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pf[Pf.INTERNAL=13]="INTERNAL",Pf[Pf.UNAVAILABLE=14]="UNAVAILABLE",Pf[Pf.DATA_LOSS=15]="DATA_LOSS";var qf=function(){function t(t,e){this.comparator=t,this.root=e||Hf.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Hf.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hf.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Bf(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Bf(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Bf(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Bf(this.root,t,this.comparator,!0)},t}(),Bf=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Hf=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw xl();if(this.right.isRed())throw xl();var t=this.left.check();if(t!==this.right.check())throw xl();return t+(this.isRed()?0:1)},t}();Hf.EMPTY=null,Hf.RED=!0,Hf.BLACK=!1,Hf.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw xl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw xl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw xl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw xl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw xl()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Hf(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var zf=function(){function t(t){this.comparator=t,this.data=new qf(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Gf(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Gf(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Gf=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Kf=new qf(rh.comparator);function Wf(){return Kf}var $f=new qf(rh.comparator);function Qf(){return $f}var Xf=new qf(rh.comparator);function Yf(){return Xf}var Zf=new zf(rh.comparator);function Jf(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Zf,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var td=new zf(jl);function ed(){return td}var nd=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,rd.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Ll.min(),r,ed(),Wf(),Jf())},t}(),rd=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Kl.EMPTY_BYTE_STRING,n,Jf(),Jf(),Jf())},t}(),id=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},od=function(t,e){this.targetId=t,this.V=e},sd=function(t,e,n,r){void 0===n&&(n=Kl.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},ad=function(){function t(){this.S=0,this.D=ld(),this.C=Kl.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Jf(),e=Jf(),n=Jf();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:xl()}}),new rd(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=ld()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),ud=function(){function t(t){this.W=t,this.G=new Map,this.H=Wf(),this.J=cd(),this.Y=new zf(jl)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:xl()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Eh(i))if(0===n){var o=new rh(i.path);this.tt(e,o,vh.newNoDocument(o,Ll.min()))}else Al(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&Eh(o.target)){var s=new rh(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,vh.newNoDocument(s,t))}r.O&&(n.set(i,r.M()),r.L())}});var r=Jf();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new nd(t,n,this.Y,this.H,r);return this.H=Wf(),this.J=cd(),this.Y=new zf(jl),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new ad,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new zf(jl),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||El("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new ad),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function cd(){return new qf(rh.comparator)}function ld(){return new qf(rh.comparator)}var hd={asc:"ASCENDING",desc:"DESCENDING"},fd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dd=function(t,e){this.databaseId=t,this.I=e};function pd(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function gd(t,e){return t.I?e.toBase64():e.toUint8Array()}function md(t,e){return pd(t,e.toTimestamp())}function yd(t){return Al(!!t),Ll.fromTimestamp(function(t){var e=$l(t);return new Ml(e.seconds,e.nanos)}(t))}function bd(t,e){return function(t){return new Bl(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function vd(t){var e=Bl.fromString(t);return Al(Hd(e)),e}function wd(t,e){return bd(t.databaseId,e.path)}function _d(t,e){var n=vd(e);if(n.get(1)!==t.databaseId.projectId)throw new _l(wl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new _l(wl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new rh(Sd(n))}function Od(t,e){return bd(t.databaseId,e)}function Cd(t){var e=vd(t);return 4===e.length?Bl.emptyPath():Sd(e)}function Ed(t){return new Bl(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Sd(t){return Al(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Td(t,e,n){return{name:wd(t,e),fields:n.toProto().mapValue.fields}}function Id(t,e,n){var r=_d(t,e.name),i=yd(e.updateTime),o=new yh({mapValue:{fields:e.fields}}),s=vh.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function xd(t,e){var n;if(e instanceof Af)n={update:Td(t,e.key,e.value)};else if(e instanceof Mf)n={delete:wd(t,e.key)};else if(e instanceof kf)n={update:Td(t,e.key,e.data),updateMask:Bd(e.fieldMask)};else{if(!(e instanceof Lf))return xl();n={verify:wd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof hf)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ff)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof pf)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof mf)return{fieldPath:e.field.canonicalString(),increment:n.A};throw xl()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:md(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:xl()}(t,e.precondition)),n}function Ad(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?_f.updateTime(yd(t.updateTime)):void 0!==t.exists?_f.exists(t.exists):_f.none()}(e.currentDocument):_f.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Al("REQUEST_TIME"===e.setToServerValue),n=new hf):"appendMissingElements"in e?n=new ff(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new pf(e.removeAllFromArray.values||[]):"increment"in e?n=new mf(t,e.increment):xl();var r=zl.fromServerFormat(e.fieldPath);return new vf(r,n)}(t,e)}):[];if(e.update){var i=_d(t,e.update.name),o=new yh({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Gl((t.fieldPaths||[]).map(function(t){return zl.fromServerFormat(t)}))}(e.updateMask);return new kf(i,o,s,n,r)}return new Af(i,o,n,r)}if(e.delete){var a=_d(t,e.delete);return new Mf(a,n)}if(e.verify){var u=_d(t,e.verify);return new Lf(u,n)}return xl()}function kd(t,e){return{documents:[Od(t,e.path)]}}function Nd(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Od(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Od(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(gh(t.value))return{unaryFilter:{field:Vd(t.field),op:"IS_NAN"}};if(ph(t.value))return{unaryFilter:{field:Vd(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(gh(t.value))return{unaryFilter:{field:Vd(t.field),op:"IS_NOT_NAN"}};if(ph(t.value))return{unaryFilter:{field:Vd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vd(t.field),op:Ld(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:Vd(t.field),direction:Md(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||th(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Dd(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Dd(e.endAt)),n}function Rd(t){var e=Cd(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Al(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=jd(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new Mh(Ud(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return th(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Pd(n.startAt));var l=null;return n.endAt&&(l=Pd(n.endAt)),qh(e,i,a,s,u,"F",c,l)}function jd(t){return t?void 0!==t.unaryFilter?[qd(t)]:void 0!==t.fieldFilter?[Fd(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return jd(t)}).reduce(function(t,e){return t.concat(e)}):xl():[]}function Dd(t){return{before:t.before,values:t.position}}function Pd(t){return new Dh(t.values||[],!!t.before)}function Md(t){return hd[t]}function Ld(t){return fd[t]}function Vd(t){return{fieldPath:t.canonicalString()}}function Ud(t){return zl.fromServerFormat(t.fieldPath)}function Fd(t){return Sh.create(Ud(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return xl()}}(t.fieldFilter.op),t.fieldFilter.value)}function qd(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Ud(t.unaryFilter.field);return Sh.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Ud(t.unaryFilter.field);return Sh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ud(t.unaryFilter.field);return Sh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Ud(t.unaryFilter.field);return Sh.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return xl()}}function Bd(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function Hd(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function zd(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Kd(e)),e=Gd(t.get(n),e);return Kd(e)}function Gd(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Kd(t){return t+"\x01\x01"}function Wd(t){var e=t.length;if(Al(e>=2),2===e)return Al("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Bl.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&xl(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:xl()}o=s+2}return new Bl(r)}var $d=function(t,e){this.seconds=t,this.nanoseconds=e},Qd=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Qd.store="owner",Qd.key="owner";var Xd=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Xd.store="mutationQueues",Xd.keyPath="userId";var Yd=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Yd.store="mutations",Yd.keyPath="batchId",Yd.userMutationsIndex="userMutationsIndex",Yd.userMutationsKeyPath=["userId","batchId"];var Zd=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,zd(e)]},t.key=function(t,e,n){return[t,zd(e),n]},t}();Zd.store="documentMutations",Zd.PLACEHOLDER=new Zd;var Jd=function(t,e){this.path=t,this.readTime=e},tp=function(t,e){this.path=t,this.version=e},ep=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};ep.store="remoteDocuments",ep.readTimeIndex="readTimeIndex",ep.readTimeIndexPath="readTime",ep.collectionReadTimeIndex="collectionReadTimeIndex",ep.collectionReadTimeIndexPath=["parentPath","readTime"];var np=function(t){this.byteSize=t};np.store="remoteDocumentGlobal",np.key="remoteDocumentGlobalKey";var rp=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};rp.store="targets",rp.keyPath="targetId",rp.queryTargetsIndexName="queryTargetsIndex",rp.queryTargetsKeyPath=["canonicalId","targetId"];var ip=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};ip.store="targetDocuments",ip.keyPath=["targetId","path"],ip.documentTargetsIndex="documentTargetsIndex",ip.documentTargetsKeyPath=["path","targetId"];var op=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};op.key="targetGlobalKey",op.store="targetGlobal";var sp=function(t,e){this.collectionId=t,this.parent=e};sp.store="collectionParents",sp.keyPath=["collectionId","parent"];var ap=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};ap.store="clientMetadata",ap.keyPath="clientId";var up=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};up.store="bundles",up.keyPath="bundleId";var cp=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};cp.store="namedQueries",cp.keyPath="name";var lp=Object(Bo.f)(Object(Bo.f)([],Object(Bo.f)(Object(Bo.f)([],Object(Bo.f)(Object(Bo.f)([],Object(Bo.f)(Object(Bo.f)([],[Xd.store,Yd.store,Zd.store,ep.store,rp.store,Qd.store,op.store,ip.store]),[ap.store])),[np.store])),[sp.store])),[up.store,cp.store]),hp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",fp=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),dp=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},pp=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&xl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),gp=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new dp,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new bp(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Cp(e.target.error);n.ft.reject(new bp(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new bp(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(El("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new wp(e)},t}(),mp=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(ms.j)())&&Sl("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return El("SimpleDb","Removing database:",t),_p(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(ms.j)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(Bo.b)(this,void 0,void 0,function(){var e,n=this;return Object(Bo.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(El("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new bp(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new _l(wl.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new bp(t,n))},i.onupgradeneeded=function(t){El("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){El("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Bo.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(Bo.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(Bo.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=gp.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),pp.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return El("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),yp=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return _p(this.Pt.delete())},t}(),bp=function(t){function e(e,n){var r=this;return(r=t.call(this,wl.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Bo.c)(e,t),e}(_l);function vp(t){return"IndexedDbTransactionError"===t.name}var wp=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(El("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(El("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),_p(n)},t.prototype.add=function(t){return El("SimpleDb","ADD",this.store.name,t,t),_p(this.store.add(t))},t.prototype.get=function(t){var e=this;return _p(this.store.get(t)).next(function(n){return void 0===n&&(n=null),El("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return El("SimpleDb","DELETE",this.store.name,t),_p(this.store.delete(t))},t.prototype.count=function(){return El("SimpleDb","COUNT",this.store.name),_p(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){El("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new pp(function(n,r){e.onerror=function(t){var e=Cp(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new pp(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new yp(i),s=e(i.primaryKey,i.value,o);if(s instanceof pp){var a=s.catch(function(t){return o.done(),pp.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return pp.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function _p(t){return new pp(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Cp(t.target.error);n(e)}})}var Op=!1;function Cp(t){var e=mp._t(Object(ms.j)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new _l("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Op||(Op=!0,setTimeout(function(){throw r},0)),r}}return t}var Ep=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(Bo.c)(e,t),e}(fp);function Sp(t,e){var n=kl(t);return mp.It(n.Mt,e)}var Tp=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Ef(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Sf(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Sf(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Ll.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Jf())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Dl(this.mutations,t.mutations,function(t,e){return If(t,e)})&&Dl(this.baseMutations,t.baseMutations,function(t,e){return If(t,e)})},t}(),Ip=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Al(e.mutations.length===r.length);for(var i=Yf(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),xp=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Ll.min()),void 0===o&&(o=Ll.min()),void 0===s&&(s=Kl.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Ap=function(t){this.Lt=t};function kp(t,e){if(e.document)return Id(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=rh.fromSegments(e.noDocument.path),r=Pp(e.noDocument.readTime),i=vh.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=rh.fromSegments(e.unknownDocument.path);return r=Pp(e.unknownDocument.version),vh.newUnknownDocument(o,r)}return xl()}function Np(t,e,n){var r=Rp(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:wd(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:pd(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new ep(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Dp(e.version);return s=e.hasCommittedMutations,new ep(null,new Jd(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Dp(e.version);return new ep(new tp(c,l),null,null,!0,r,i)}return xl()}function Rp(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function jp(t){var e=new Ml(t[0],t[1]);return Ll.fromTimestamp(e)}function Dp(t){var e=t.toTimestamp();return new $d(e.seconds,e.nanoseconds)}function Pp(t){var e=new Ml(t.seconds,t.nanoseconds);return Ll.fromTimestamp(e)}function Mp(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Ad(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Ad(t.Lt,e)}),o=Ml.fromMillis(e.localWriteTimeMs);return new Tp(e.batchId,o,n,i)}function Lp(t){var e,n,r=Pp(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Pp(t.lastLimboFreeSnapshotVersion):Ll.min();return void 0!==t.query.documents?(Al(1===(n=t.query).documents.length),e=Qh(Bh(Cd(n.documents[0])))):e=function(t){return Qh(Rd(t))}(t.query),new xp(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Kl.fromBase64String(t.resumeToken))}function Vp(t,e){var n,r=Dp(e.snapshotVersion),i=Dp(e.lastLimboFreeSnapshotVersion);n=Eh(e.target)?kd(t.Lt,e.target):Nd(t.Lt,e.target);var o=e.resumeToken.toBase64();return new rp(e.targetId,Oh(e.target),r,o,e.sequenceNumber,i,n)}function Up(t){var e=Rd({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Xh(e,e.limit,"L"):e}var Fp=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return qp(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Pp(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return qp(t).put({bundleId:(n=e).id,createTime:Dp(yd(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Bp(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:Up(e.bundledQuery),readTime:Pp(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return Bp(t).put(function(t){return{name:t.name,readTime:Dp(yd(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function qp(t){return Sp(t,up.store)}function Bp(t){return Sp(t,cp.store)}var Hp=function(){function t(){this.Bt=new zp}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),pp.resolve()},t.prototype.getCollectionParents=function(t,e){return pp.resolve(this.Bt.getEntries(e))},t}(),zp=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new zf(Bl.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new zf(Bl.comparator)).toArray()},t}(),Gp=function(){function t(){this.qt=new zp}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:zd(i)};return Kp(t).put(o)}return pp.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Pl(e),""],!1,!0);return Kp(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Wd(o.parent))}return n})},t}();function Kp(t){return Sp(t,sp.store)}var Wp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$p=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function Qp(t,e,n){var r=t.store(Yd.store),i=t.store(Zd.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Ot({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Al(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=Zd.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return pp.waitFor(o).next(function(){return c})}function Xp(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw xl();e=t.noDocument}return JSON.stringify(e).length}$p.DEFAULT_COLLECTION_PERCENTILE=10,$p.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$p.DEFAULT=new $p(41943040,$p.DEFAULT_COLLECTION_PERCENTILE,$p.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$p.DISABLED=new $p(-1,0,0);var Yp=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return Al(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Jp(t).Ot({index:Yd.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=tg(t),s=Jp(t);return s.add({}).next(function(a){Al("number"==typeof a);for(var u=new Tp(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return xd(t.Lt,e)}),i=n.mutations.map(function(e){return xd(t.Lt,e)});return new Yd(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new zf(function(t,e){return jl(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],g=Zd.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,Zd.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[a]=u.keys()}),pp.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Jp(t).get(e).next(function(t){return t?(Al(t.userId===n.userId),Mp(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?pp.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Jp(t).Ot({index:Yd.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Al(e.batchId>=r),o=Mp(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Jp(t).Ot({index:Yd.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Jp(t).Nt(Yd.userMutationsIndex,n).next(function(t){return t.map(function(t){return Mp(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Zd.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return tg(t).Ot({range:i},function(r,i,s){var a=r[0],u=r[2],c=Wd(r[1]);if(a===n.userId&&e.path.isEqual(c))return Jp(t).get(u).next(function(t){if(!t)throw xl();Al(t.userId===n.userId),o.push(Mp(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new zf(jl),i=[];return e.forEach(function(e){var o=Zd.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=tg(t).Ot({range:s},function(t,i,o){var s=t[0],a=t[2],u=Wd(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),pp.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Zd.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new zf(jl);return tg(t).Ot({range:s},function(t,e,o){var s=t[0],u=t[2],c=Wd(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Jp(t).get(e).next(function(t){if(null===t)throw xl();Al(t.userId===n.userId),r.push(Mp(n.R,t))}))}),pp.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return Qp(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),pp.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return pp.resolve();var r=IDBKeyRange.lowerBound(Zd.prefixForUser(e.userId)),i=[];return tg(t).Ot({range:r},function(t,n,r){if(t[0]===e.userId){var o=Wd(t[1]);i.push(o)}else r.done()}).next(function(){Al(0===i.length)})})},t.prototype.containsKey=function(t,e){return Zp(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return eg(t).get(this.userId).next(function(t){return t||new Xd(e.userId,-1,"")})},t}();function Zp(t,e,n){var r=Zd.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return tg(t).Ot({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function Jp(t){return Sp(t,Yd.store)}function tg(t){return Sp(t,Zd.store)}function eg(t){return Sp(t,Xd.store)}var ng=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),rg=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new ng(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return Ll.fromTimestamp(new Ml(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return ig(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return Al(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return ig(t).Ot(function(s,a){var u=Lp(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return pp.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return ig(t).Ot(function(t,n){var r=Lp(n);e(r)})},t.prototype.Xt=function(t){return og(t).get(op.key).next(function(t){return Al(null!==t),t})},t.prototype.Zt=function(t,e){return og(t).put(op.key,e)},t.prototype.te=function(t,e){return ig(t).put(Vp(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=Oh(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return ig(t).Ot({range:r,index:rp.queryTargetsIndexName},function(t,n,r){var o=Lp(n);Ch(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=sg(t);return e.forEach(function(e){var s=zd(e.path);i.push(o.put(new ip(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),pp.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=sg(t);return pp.forEach(e,function(e){var o=zd(e.path);return pp.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=sg(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=sg(t),i=Jf();return r.Ot({range:n,kt:!0},function(t,e,n){var r=Wd(t[1]),o=new rh(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=zd(e.path),r=IDBKeyRange.bound([n],[Pl(n)],!1,!0),i=0;return sg(t).Ot({index:ip.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return ig(t).get(e).next(function(t){return t?Lp(t):null})},t}();function ig(t){return Sp(t,rp.store)}function og(t){return Sp(t,op.store)}function sg(t){return Sp(t,ip.store)}function ag(t){return Object(Bo.b)(this,void 0,void 0,function(){return Object(Bo.d)(this,function(e){if(t.code!==wl.FAILED_PRECONDITION||t.message!==hp)throw t;return El("LocalStore","Unexpectedly lost primary lease"),[2]})})}function ug(t,e){var n=t[1],r=e[1],i=jl(t[0],e[0]);return 0===i?jl(n,r):i}var cg=function(){function t(t){this.ne=t,this.buffer=new zf(ug),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();ug(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),lg=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;El("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(Bo.b)(e,void 0,void 0,function(){var e;return Object(Bo.d)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return vp(e=n.sent())?(El("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,ag(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),hg=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return pp.resolve(vl.o);var r=new cg(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(El("LruGarbageCollector","Garbage collection skipped; disabled"),pp.resolve(Wp)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(El("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Wp):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(El("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Cl()<=ys.a.DEBUG&&El("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),pp.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),fg=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new hg(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return dg(t,n)},t.prototype.removeReference=function(t,e,n){return dg(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return dg(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return eg(t).$t(function(r){return Zp(t,r,e).next(function(t){return t&&(n=!0),pp.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),sg(t).delete([0,zd(s.path)])})});i.push(u)}}).next(function(){return pp.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return dg(t,e)},t.prototype.we=function(t,e){var n,r=sg(t),i=vl.o;return r.Ot({index:ip.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==vl.o&&e(new rh(Wd(n)),i),i=s,n=o):i=vl.o}).next(function(){i!==vl.o&&e(new rh(Wd(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function dg(t,e){return sg(t).put(function(t,e){return new ip(0,zd(t.path),e)}(e,t.currentSequenceNumber))}var pg=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Ul(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return Fl(this.inner)},t}(),gg=function(){function t(){this.changes=new pg(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Ll.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:vh.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?pp.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),mg=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return vg(t).put(wg(e),n)},t.prototype.removeEntry=function(t,e){var n=vg(t),r=wg(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return vg(t).get(wg(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return vg(t).get(wg(e)).next(function(t){return{document:n.ye(e,t),size:Xp(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=Wf();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=Wf(),i=new qf(rh.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Xp(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return pp.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return vg(t).Ot({range:r},function(t,e,r){for(var s=rh.fromSegments(t);o&&rh.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Wf(),o=e.path.length+1,s={};if(n.isEqual(Ll.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Rp(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=ep.collectionReadTimeIndex}return vg(t).Ot(s,function(t,n,s){if(t.length===o){var a=kp(r.R,n);e.path.isPrefixOf(a.key.path)?tf(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new yg(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return bg(t).get(np.key).next(function(t){return Al(!!t),t})},t.prototype.me=function(t,e){return bg(t).put(np.key,e)},t.prototype.ye=function(t,e){if(e){var n=kp(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Ll.min()))return n}return vh.newInvalidDocument(t)},t}(),yg=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new pg(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Bo.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new zf(function(t,e){return jl(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=Np(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Xp(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=Np(e.Ie.R,vh.newNoDocument(o,Ll.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),pp.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(gg);function bg(t){return Sp(t,np.store)}function vg(t){return Sp(t,ep.store)}function wg(t){return t.path.toArray()}var _g=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Al(n<r&&n>=0&&r<=11);var o=new gp("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Qd.store)}(t),function(t){t.createObjectStore(Xd.store,{keyPath:Xd.keyPath}),t.createObjectStore(Yd.store,{keyPath:Yd.keyPath,autoIncrement:!0}).createIndex(Yd.userMutationsIndex,Yd.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Zd.store)}(t),Og(t),function(t){t.createObjectStore(ep.store)}(t));var s=pp.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(ip.store),t.deleteObjectStore(rp.store),t.deleteObjectStore(op.store)}(t),Og(t)),s=s.next(function(){return function(t){var e=t.store(op.store),n=new op(0,0,Ll.min().toTimestamp(),0);return e.put(op.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(Yd.store).Nt().next(function(n){t.deleteObjectStore(Yd.store),t.createObjectStore(Yd.store,{keyPath:Yd.keyPath,autoIncrement:!0}).createIndex(Yd.userMutationsIndex,Yd.userMutationsKeyPath,{unique:!0});var r=e.store(Yd.store),i=n.map(function(t){return r.put(t)});return pp.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(ap.store,{keyPath:ap.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(np.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(ep.store);e.createIndex(ep.readTimeIndex,ep.readTimeIndexPath,{unique:!1}),e.createIndex(ep.collectionReadTimeIndex,ep.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(up.store,{keyPath:up.keyPath})}(t),function(t){t.createObjectStore(cp.store,{keyPath:cp.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(ep.store).Ot(function(t,n){e+=Xp(n)}).next(function(){var n=new np(e);return t.store(np.store).put(np.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(Xd.store),r=t.store(Yd.store);return n.Nt().next(function(n){return pp.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Yd.userMutationsIndex,i).next(function(r){return pp.forEach(r,function(r){Al(r.userId===n.userId);var i=Mp(e.R,r);return Qp(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(ip.store),n=t.store(ep.store);return t.store(op.store).get(op.key).next(function(t){var r=[];return n.Ot(function(n,i){var o=new Bl(n),s=function(t){return[0,zd(t)]}(o);r.push(e.get(s).next(function(n){return n?pp.resolve():function(n){return e.put(new ip(0,zd(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return pp.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(sp.store,{keyPath:sp.keyPath});var n=e.store(sp.store),r=new zp,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:zd(i)})}};return e.store(ep.store).Ot({kt:!0},function(t,e){var n=new Bl(t);return i(n.popLast())}).next(function(){return e.store(Zd.store).Ot({kt:!0},function(t,e){var n=Wd(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(rp.store);return n.Ot(function(t,r){var i=Lp(r),o=Vp(e.R,i);return n.put(o)})},t}();function Og(t){t.createObjectStore(ip.store,{keyPath:ip.keyPath}).createIndex(ip.documentTargetsIndex,ip.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(rp.store,{keyPath:rp.keyPath}).createIndex(rp.queryTargetsIndexName,rp.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(op.store)}var Cg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Eg=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new _l(wl.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new fg(this,i),this.Le=n+"main",this.R=new Ap(u),this.Be=new mp(this.Le,11,new _g(this.R)),this.qe=new rg(this.referenceDelegate,this.R),this.Ut=new Gp,this.Ue=function(t,e){return new mg(t,e)}(this.R,this.Ut),this.Qe=new Fp,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&Sl("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new _l(wl.FAILED_PRECONDITION,Cg);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new vl(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(Bo.b)(e,void 0,void 0,function(){return Object(Bo.d)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return Object(Bo.b)(e,void 0,void 0,function(){return Object(Bo.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return Object(Bo.b)(e,void 0,void 0,function(){return Object(Bo.d)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Tg(e).put(new ap(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(vp(e))return El("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return El("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return Sg(t).get(Qd.key).next(function(t){return pp.resolve(e.tn(t))})},t.prototype.en=function(t){return Tg(t).delete(this.clientId)},t.prototype.nn=function(){return Object(Bo.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Bo.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Sp(t,ap.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return pp.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?pp.resolve(!0):Sg(t).get(Qd.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new _l(wl.FAILED_PRECONDITION,Cg);return!1}}return!(!e.networkEnabled||!e.inForeground)||Tg(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&El("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(Bo.b)(this,void 0,void 0,function(){var t=this;return Object(Bo.d)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Qd.store,ap.store],function(e){var n=new Ep(e,vl.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Tg(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Yp.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return El("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",lp,function(o){return r=new Ep(o,i.Ne?i.Ne.next():vl.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw Sl("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new _l(wl.FAILED_PRECONDITION,hp);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return Sg(t).get(Qd.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new _l(wl.FAILED_PRECONDITION,Cg)})},t.prototype.Ze=function(t){var e=new Qd(this.clientId,this.allowTabSynchronization,Date.now());return Sg(t).put(Qd.key,e)},t.yt=function(){return mp.yt()},t.prototype.Xe=function(t){var e=this,n=Sg(t);return n.get(Qd.key).next(function(t){return e.tn(t)?(El("IndexedDbPersistence","Releasing primary lease."),n.delete(Qd.key)):pp.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Sl("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return El("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Sl("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Sl("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Sg(t){return Sp(t,Qd.store)}function Tg(t){return Sp(t,ap.store)}function Ig(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var xg=function(t,e){this.progress=t,this.wn=e},Ag=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return rh.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Wh(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new rh(e)).next(function(t){var e=Qf();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Qf();return this.Ut.getCollectionParents(t,i).next(function(s){return pp.forEach(s,function(s){var a=function(t,e){return new Fh(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=vh.newInvalidDocument(c),r=r.insert(c,l)),Sf(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){tf(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=Jf(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof kf&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),kg=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Jf(),i=Jf(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Ng=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Ll.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(Hh(e)||zh(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(Cl()<=ys.a.DEBUG&&El("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Jh(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new zf(ef(t));return e.forEach(function(e,r){tf(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Cl()<=ys.a.DEBUG&&El("QueryEngine","Using full collection scan to execute query:",Jh(e)),this.Sn.getDocumentsMatchingQuery(t,e,Ll.min())},t}(),Rg=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new qf(jl),this.kn=new pg(function(t){return Oh(t)},Ch),this.On=Ll.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Ag(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function jg(t,e,n,r){return new Rg(t,e,n,r)}function Dg(t,e){return Object(Bo.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Bo.d)(this,function(s){switch(s.label){case 0:return n=kl(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Ag(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=Jf(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)s=s.add(m[g].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function Pg(t,e){var n=kl(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=pp.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);Al(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function Mg(t){var e=kl(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function Lg(t,e){var n=kl(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Al(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=Wf();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(Vg(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(Ll.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return pp.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function Vg(t,e,n,r,i){var o=Jf();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=Wf();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(Ll.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):El("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function Ug(t,e){var n=kl(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function Fg(t,e){var n=kl(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?pp.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new xp(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function qg(t,e,n){return Object(Bo.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Bo.d)(this,function(a){switch(a.label){case 0:r=kl(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!vp(s=a.sent()))throw s;return El("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function Bg(t,e,n){var r=kl(t),i=Ll.min(),o=Jf();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=kl(t),i=r.kn.get(n);return void 0!==i?pp.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,Qh(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Ll.min(),n?o:Jf())}).next(function(t){return{documents:t,Bn:o}})})}function Hg(t,e){var n=kl(t),r=kl(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function zg(t){var e=kl(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=kl(t),i=Wf(),o=Rp(n),s=vg(e),a=IDBKeyRange.lowerBound(o,!0);return s.Ot({index:ep.readTimeIndex,range:a},function(t,e){var n=kp(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:jp(o)}})}(e.$n,t,e.On)}).then(function(t){var n=t.wn;return e.On=t.readTime,n})}function Gg(t){return Object(Bo.b)(this,void 0,void 0,function(){var e;return Object(Bo.d)(this,function(n){return[2,(e=kl(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=vg(t),n=Ll.min();return e.Ot({index:ep.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=jp(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.On=t})]})})}function Kg(t,e,n,r){return Object(Bo.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return Object(Bo.d)(this,function(p){switch(p.label){case 0:for(i=kl(t),o=Jf(),s=Wf(),a=Yf(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return f=i.$n.newChangeBuffer({trackRemovals:!0}),[4,Fg(i,function(t){return Qh(Bh(Bl.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return Vg(t,f,s,Ll.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.qe.addMatchingKeys(t,o,d.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function Wg(t,e,n){return void 0===n&&(n=Jf()),Object(Bo.b)(this,void 0,void 0,function(){var r,i;return Object(Bo.d)(this,function(o){switch(o.label){case 0:return[4,Fg(t,Qh(Up(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=kl(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=yd(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var s=r.withResumeToken(Kl.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var $g=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return pp.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:yd(n.createTime)}),pp.resolve()},t.prototype.getNamedQuery=function(t,e){return pp.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Up(t.bundledQuery),readTime:yd(t.readTime)}}(e)),pp.resolve()},t}(),Qg=function(){function t(){this.Wn=new zf(Xg.Gn),this.zn=new zf(Xg.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Xg(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new Xg(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new rh(new Bl([])),r=new Xg(n,t),i=new Xg(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new rh(new Bl([])),n=new Xg(e,t),r=new Xg(e,t+1),i=Jf();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Xg(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Xg=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return rh.comparator(t.key,e.key)||jl(t.ns,e.ns)},t.Hn=function(t,e){return jl(t.ns,e.ns)||rh.comparator(t.key,e.key)},t}(),Yg=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new zf(Xg.Gn)}return t.prototype.checkEmpty=function(t){return pp.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new Tp(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new Xg(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return pp.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return pp.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return pp.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return pp.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return pp.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Xg(e,0),i=new Xg(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),pp.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new zf(jl);return e.forEach(function(t){var e=new Xg(t,0),i=new Xg(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),pp.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;rh.isDocumentKey(i)||(i=i.child(""));var o=new Xg(new rh(i),0),s=new zf(jl);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),pp.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Al(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return pp.forEach(e.mutations,function(i){var o=new Xg(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Xg(e,0),r=this.rs.firstAfterOrEqual(n);return pp.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return pp.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Zg=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new qf(rh.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return pp.resolve(n?n.document.clone():vh.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Wf();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():vh.newInvalidDocument(t))}),pp.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Wf(),i=new rh(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||tf(e,u)&&(r=r.insert(u.key,u.clone()))}return pp.resolve(r)},t.prototype.fs=function(t,e){return pp.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new Jg(this)},t.prototype.getSize=function(t){return pp.resolve(this.size)},t}(),Jg=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(Bo.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),pp.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(gg),tm=function(){function t(t){this.persistence=t,this.ds=new pg(function(t){return Oh(t)},Ch),this.lastRemoteSnapshotVersion=Ll.min(),this.highestTargetId=0,this.ws=0,this._s=new Qg,this.targetCount=0,this.ys=ng.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),pp.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return pp.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return pp.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),pp.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),pp.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new ng(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,pp.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),pp.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,pp.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),pp.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return pp.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return pp.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),pp.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),pp.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),pp.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return pp.resolve(n)},t.prototype.containsKey=function(t,e){return pp.resolve(this._s.containsKey(e))},t}(),em=function(){function t(t,e){var n=this;this.gs={},this.Ne=new vl(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new tm(this),this.Ut=new Hp,this.Ue=function(t,e){return new Zg(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new Ap(e),this.Qe=new $g(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Yg(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;El("MemoryPersistence","Starting transaction:",t);var i=new nm(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return pp.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),nm=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(Bo.c)(e,t),e}(fp),rm=function(){function t(t){this.persistence=t,this.As=new Qg,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw xl()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),pp.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),pp.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),pp.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pp.forEach(this.vs,function(r){var i=rh.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return pp.or([function(){return pp.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),im=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function om(t,e){return"firestore_clients_"+t+"_"+e}function sm(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function am(t,e){return"firestore_targets_"+t+"_"+e}im.UNAUTHENTICATED=new im(null),im.GOOGLE_CREDENTIALS=new im("google-credentials-uid"),im.FIRST_PARTY=new im("first-party-uid");var um=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new _l(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Sl("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),cm=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new _l(i.error.code,i.error.message)),o?new t(e,i.state,r):(Sl("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),lm=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ed(),s=0;i&&s<r.activeTargetIds.length;++s)i=nh(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Sl("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),hm=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Sl("SharedClientState","Failed to parse online state: "+e),null)},t}(),fm=function(){function t(){this.activeTargetIds=ed()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),dm=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new qf(jl),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=om(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new fm),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Bo.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(Bo.d)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(om(this.persistenceKey,r)))&&(o=lm.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.Os;u<c.length;u++)this.Fs(c[u]);return this.Os=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(am(this.persistenceKey,t));if(n){var r=cm.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(am(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return El("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){El("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){El("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(El("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void Sl("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return Object(Bo.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(Bo.d)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=vl.o;if(null!=t)try{var n=JSON.parse(t);Al("number"==typeof n),e=n}catch(t){Sl("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==vl.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new um(this.currentUser,t,e,n),i=sm(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=sm(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=am(this.persistenceKey,t),i=new cm(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return lm.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return um.Vs(new im(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return cm.Vs(r,e)},t.prototype.js=function(t){return hm.Vs(t)},t.prototype.ii=function(t){return Object(Bo.b)(this,void 0,void 0,function(){return Object(Bo.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(El("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=ed();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),pm=function(){function t(){this.li=new fm,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new fm,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),gm=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),mm=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){El("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){El("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),ym={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},bm=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),vm=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(Bo.c)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new bl;s.listenOnce(gl.COMPLETE,function(){try{switch(s.getLastErrorCode()){case pl.NO_ERROR:var e=s.getResponseJson();El("Connection","XHR received:",JSON.stringify(e)),i(e);break;case pl.TIMEOUT:El("Connection",'RPC "'+t+'" timed out'),o(new _l(wl.DEADLINE_EXCEEDED,"Request time out"));break;case pl.HTTP_ERROR:var n=s.getStatus();if(El("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(wl).indexOf(e)>=0?e:wl.UNKNOWN}(r.status);o(new _l(a,r.message))}else o(new _l(wl.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new _l(wl.UNAVAILABLE,"Connection failed."));break;default:xl()}}finally{El("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new cl,i=fu(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(o.initMessageHeaders,e),Object(ms.o)()||Object(ms.q)()||Object(ms.m)()||Object(ms.n)()||Object(ms.r)()||Object(ms.l)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");El("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new bm({Ei:function(t){c?El("Connection","Not sending because WebChannel is closed:",t):(u||(El("Connection","Opening WebChannel transport."),a.open(),u=!0),El("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,yl.EventType.OPEN,function(){c||El("Connection","WebChannel transport opened.")}),h(a,yl.EventType.CLOSE,function(){c||(c=!0,El("Connection","WebChannel transport closed"),l.Vi())}),h(a,yl.EventType.ERROR,function(t){c||(c=!0,Tl("Connection","WebChannel transport errored:",t),l.Vi(new _l(wl.UNAVAILABLE,"The operation could not be completed")))}),h(a,yl.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Al(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){El("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Df[t];if(void 0!==e)return Ff(e)}(i),s=r.message;void 0===o&&(o=wl.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new _l(o,s)),a.close()}else El("Connection","WebChannel received:",n),l.Si(n)}}),h(i,ml.STAT_EVENT,function(t){10===t.stat?El("Connection","Detected buffering proxy"):11===t.stat&&El("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);El("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return El("RestConnection","Received: ",t),t},function(e){throw Tl("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.5.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+ym[t]},t}());function wm(){return"undefined"!=typeof window?window:null}function _m(){return"undefined"!=typeof document?document:null}function Om(t){return new dd(t,!0)}var Cm=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&El("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Em=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Cm(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(Bo.b)(this,void 0,void 0,function(){return Object(Bo.d)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(Bo.b)(this,void 0,void 0,function(){return Object(Bo.d)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(Bo.b)(this,void 0,void 0,function(){return Object(Bo.d)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===wl.RESOURCE_EXHAUSTED?(Sl(e.toString()),Sl("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===wl.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new _l(wl.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return Object(Bo.b)(t,void 0,void 0,function(){return Object(Bo.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return El("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(El("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Sm=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Object(Bo.c)(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:xl()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Al(void 0===e||"string"==typeof e),Kl.fromBase64String(e||"")):(Al(void 0===e||e instanceof Uint8Array),Kl.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?wl.UNKNOWN:Ff(t.code);return new _l(e,t.message||"")}(a);n=new sd(r,i,o,s||null)}else if("documentChange"in e){i=_d(t,(r=e.documentChange).document.name),o=yd(r.document.updateTime);var a=new yh({mapValue:{fields:r.document.fields}}),u=(s=vh.newFoundDocument(i,o,a),r.targetIds||[]);n=new id(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=_d(t,(r=e.documentDelete).document),o=r.readTime?yd(r.readTime):Ll.min(),a=vh.newNoDocument(i,o),n=new id([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=_d(t,(r=e.documentRemove).document),n=new id([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return xl();var c=e.filter;i=new Vf(r=c.count||0),n=new od(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Ll.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Ll.min():e.readTime?yd(e.readTime):Ll.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Ed(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Eh(r)?{documents:kd(t,r)}:{query:Nd(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=gd(t,e.resumeToken):e.snapshotVersion.compareTo(Ll.min())>0&&(n.readTime=pd(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return xl()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Ed(this.R),e.removeTarget=t,this.cr(e)},e}(Em),Tm=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Object(Bo.c)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(Al(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Al(void 0!==e),t.map(function(t){return function(t,e){var n=yd(t.updateTime?t.updateTime:e);return n.isEqual(Ll.min())&&(n=yd(e)),new wf(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=yd(t.commitTime);return this.listener.Tr(n,e)}return Al(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Ed(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return xd(e.R,t)})};this.cr(n)},e}(Em),Im=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(Bo.c)(e,t),e.prototype.br=function(){if(this.Rr)throw new _l(wl.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===wl.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new _l(wl.UNKNOWN,t.toString())})},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Oi(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===wl.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new _l(wl.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),xm=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Sl(e),this.Vr=!1):El("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Am=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return Object(Bo.b)(o,void 0,void 0,function(){return Object(Bo.d)(this,function(t){switch(t.label){case 0:return Vm(this)?(El("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Bo.b)(this,void 0,void 0,function(){var e;return Object(Bo.d)(this,function(n){switch(n.label){case 0:return(e=kl(t)).$r.add(4),[4,Nm(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,km(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new xm(n,r)};function km(t){return Object(Bo.b)(this,void 0,void 0,function(){var e,n;return Object(Bo.d)(this,function(r){switch(r.label){case 0:if(!Vm(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Nm(t){return Object(Bo.b)(this,void 0,void 0,function(){var e,n;return Object(Bo.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Rm(t,e){var n=kl(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),Lm(n)?Mm(n):Jm(n).er()&&Dm(n,e))}function jm(t,e){var n=kl(t),r=Jm(n);n.Or.delete(e),r.er()&&Pm(n,e),0===n.Or.size&&(r.er()?r.ir():Vm(n)&&n.Br.set("Unknown"))}function Dm(t,e){t.qr.U(e.targetId),Jm(t).mr(e)}function Pm(t,e){t.qr.U(e),Jm(t).yr(e)}function Mm(t){t.qr=new ud({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),Jm(t).start(),t.Br.Sr()}function Lm(t){return Vm(t)&&!Jm(t).tr()&&t.Or.size>0}function Vm(t){return 0===kl(t).$r.size}function Um(t){t.qr=void 0}function Fm(t){return Object(Bo.b)(this,void 0,void 0,function(){return Object(Bo.d)(this,function(e){return t.Or.forEach(function(e,n){Dm(t,e)}),[2]})})}function qm(t,e){return Object(Bo.b)(this,void 0,void 0,function(){return Object(Bo.d)(this,function(n){return Um(t),Lm(t)?(t.Br.Nr(e),Mm(t)):t.Br.set("Unknown"),[2]})})}function Bm(t,e,n){return Object(Bo.b)(this,void 0,void 0,function(){var r,i,o;return Object(Bo.d)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof sd&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Bo.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Bo.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Or.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Or.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),El("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Hm(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof id?t.qr.X(e):e instanceof od?t.qr.rt(e):t.qr.et(e),n.isEqual(Ll.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Mg(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(Kl.EMPTY_BYTE_STRING,n.snapshotVersion)),Pm(t,e);var r=new xp(n.target,e,1,n.sequenceNumber);Dm(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return El("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Hm(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function Hm(t,e,n){return Object(Bo.b)(this,void 0,void 0,function(){var r=this;return Object(Bo.d)(this,function(i){switch(i.label){case 0:if(!vp(e))throw e;return t.$r.add(1),[4,Nm(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Mg(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(Bo.b)(r,void 0,void 0,function(){return Object(Bo.d)(this,function(e){switch(e.label){case 0:return El("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,km(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function zm(t,e){return e().catch(function(n){return Hm(t,n,e)})}function Gm(t){return Object(Bo.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Bo.d)(this,function(s){switch(s.label){case 0:e=kl(t),n=ty(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Vm(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Ug(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=ty(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Hm(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Km(e)&&Wm(e),[2]}})})}function Km(t){return Vm(t)&&!ty(t).tr()&&t.kr.length>0}function Wm(t){ty(t).start()}function $m(t){return Object(Bo.b)(this,void 0,void 0,function(){return Object(Bo.d)(this,function(e){return ty(t).Ar(),[2]})})}function Qm(t){return Object(Bo.b)(this,void 0,void 0,function(){var e,n,r;return Object(Bo.d)(this,function(i){for(e=ty(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function Xm(t,e,n){return Object(Bo.b)(this,void 0,void 0,function(){var r,i;return Object(Bo.d)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Ip.from(r,e,n),[4,zm(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,Gm(t)];case 2:return o.sent(),[2]}})})}function Ym(t,e){return Object(Bo.b)(this,void 0,void 0,function(){return Object(Bo.d)(this,function(n){switch(n.label){case 0:return e&&ty(t).pr?[4,function(t,e){return Object(Bo.b)(this,void 0,void 0,function(){var n,r;return Object(Bo.d)(this,function(i){switch(i.label){case 0:return Uf(r=e.code)&&r!==wl.ABORTED?(n=t.kr.shift(),ty(t).sr(),[4,zm(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,Gm(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Km(t)&&Wm(t),[2]}})})}function Zm(t,e){return Object(Bo.b)(this,void 0,void 0,function(){var n;return Object(Bo.d)(this,function(r){switch(r.label){case 0:return n=kl(t),e?(n.$r.delete(2),[4,km(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,Nm(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Jm(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=kl(t);return r.br(),new Sm(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Fm.bind(null,t),Ri:qm.bind(null,t),_r:Bm.bind(null,t)}),t.Mr.push(function(n){return Object(Bo.b)(e,void 0,void 0,function(){return Object(Bo.d)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Lm(t)?Mm(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Um(t),e.label=3;case 3:return[2]}})})})),t.Ur}function ty(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=kl(t);return r.br(),new Tm(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:$m.bind(null,t),Ri:Ym.bind(null,t),Ir:Qm.bind(null,t),Tr:Xm.bind(null,t)}),t.Mr.push(function(n){return Object(Bo.b)(e,void 0,void 0,function(){return Object(Bo.d)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,Gm(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(El("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var ey=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new dp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new _l(wl.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function ny(t,e){if(Sl("AsyncQueue",e+": "+t),vp(t))return new _l(wl.UNAVAILABLE,e+": "+t);throw t}var ry=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||rh.comparator(e.key,n.key)}:function(t,e){return rh.comparator(t.key,e.key)},this.keyedMap=Qf(),this.sortedSet=new qf(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),iy=function(){function t(){this.Kr=new qf(rh.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):xl():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),oy=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,ry.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Yh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),sy=function(){this.Wr=void 0,this.listeners=[]},ay=function(){this.queries=new pg(function(t){return Zh(t)},Yh),this.onlineState="Unknown",this.Gr=new Set};function uy(t,e){return Object(Bo.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Bo.d)(this,function(c){switch(c.label){case 0:if(n=kl(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new sy),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=ny(a,"Initialization of query '"+Jh(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&fy(n),[2]}})})}function cy(t,e){return Object(Bo.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Bo.d)(this,function(a){return n=kl(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function ly(t,e){for(var n=kl(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&fy(n)}function hy(t,e,n){var r=kl(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function fy(t){t.Gr.forEach(function(t){t.next()})}var dy=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new oy(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=oy.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),py=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),gy=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return _d(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Id(this.R,t.document,!1):vh.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return yd(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new gy(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||Jf()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(Bo.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(Bo.d)(this,function(o){switch(o.label){case 0:return[4,Kg(this.localStore,new gy(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,Wg(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new xg(Object.assign({},this.progress),t))]}})})}}();var my=function(t){this.key=t},yy=function(t){this.key=t},by=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Jf(),this.mutatedKeys=Jf(),this.lo=ef(t),this.fo=new ry(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new iy,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=Hh(this.query)&&i.size===this.query.limit?i.last():null,c=zh(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=tf(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),Hh(this.query)||zh(this.query))for(;s.size>this.query.limit;){var l=Hh(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xl()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new oy(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new iy,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Jf(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new yy(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new my(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Jf();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return oy.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),vy=function(t,e,n){this.query=t,this.targetId=e,this.view=n},wy=function(t){this.key=t,this.bo=!1},_y=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new pg(function(t){return Zh(t)},Yh),this.Vo=new Map,this.So=new Set,this.Do=new qf(rh.comparator),this.Co=new Map,this.No=new Qg,this.xo={},this.Fo=new Map,this.ko=ng.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function Oy(t,e){return Object(Bo.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Bo.d)(this,function(a){switch(a.label){case 0:return n=Yy(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,Fg(n.localStore,Qh(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,Cy(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&Rm(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function Cy(t,e,n,r){return Object(Bo.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(Bo.d)(this,function(l){switch(l.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return Object(Bo.b)(this,void 0,void 0,function(){var i,o,s;return Object(Bo.d)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,Bg(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(My(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,Bg(t.localStore,e,!0)];case 1:return i=l.sent(),o=new by(e,i.Bn),s=o._o(i.documents),a=rd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),My(t,n,u.To),c=new vy(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function Ey(t,e){return Object(Bo.b)(this,void 0,void 0,function(){var n,r,i;return Object(Bo.d)(this,function(o){switch(o.label){case 0:return n=kl(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!Yh(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,qg(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),jm(n.remoteStore,r.targetId),Dy(n,r.targetId)}).catch(ag)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Dy(n,r.targetId),[4,qg(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function Sy(t,e,n){return Object(Bo.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Bo.d)(this,function(a){switch(a.label){case 0:r=Zy(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=kl(t),i=Ml.now(),o=e.reduce(function(t,e){return t.add(e.key)},Jf());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Tf(c,n.get(c.key));null!=l&&s.push(new kf(c.key,l,bh(l.toProto().mapValue),_f.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new qf(jl)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Uy(r,i.changes)];case 3:return a.sent(),[4,Gm(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=ny(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function Ty(t,e){return Object(Bo.b)(this,void 0,void 0,function(){var n,r;return Object(Bo.d)(this,function(i){switch(i.label){case 0:n=kl(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Lg(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(Al(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Al(r.bo):t.removedDocuments.size>0&&(Al(r.bo),r.bo=!1))}),[4,Uy(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,ag(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Iy(t,e,n){var r=kl(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=kl(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&fy(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function xy(t,e,n){return Object(Bo.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Bo.d)(this,function(c){switch(c.label){case 0:return(r=kl(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new qf(rh.comparator)).insert(o,vh.newNoDocument(o,Ll.min())),a=Jf().add(o),u=new nd(Ll.min(),new Map,new zf(jl),s,a),[4,Ty(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Vy(r),[3,4];case 2:return[4,qg(r.localStore,e,!1).then(function(){return Dy(r,e,n)}).catch(ag)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Ay(t,e){return Object(Bo.b)(this,void 0,void 0,function(){var n,r,i;return Object(Bo.d)(this,function(o){switch(o.label){case 0:n=kl(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Pg(n.localStore,e)];case 2:return i=o.sent(),jy(n,r,null),Ry(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Uy(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,ag(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function ky(t,e,n){return Object(Bo.b)(this,void 0,void 0,function(){var r,i;return Object(Bo.d)(this,function(o){switch(o.label){case 0:r=kl(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=kl(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return Al(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),jy(r,e,n),Ry(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Uy(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,ag(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Ny(t,e){return Object(Bo.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Bo.d)(this,function(a){switch(a.label){case 0:Vm((n=kl(t)).remoteStore)||El("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=kl(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=ny(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function Ry(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function jy(t,e,n){var r=kl(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Dy(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||Py(t,e)})}function Py(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(jm(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Vy(t))}function My(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof my?(t.No.addReference(o.key,e),Ly(t,o)):o instanceof yy?(El("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Py(t,o.key)):xl()}}function Ly(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(El("SyncEngine","New document in limbo: "+n),t.So.add(r),Vy(t))}function Vy(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new rh(Bl.fromString(e)),r=t.ko.next();t.Co.set(r,new wy(n)),t.Do=t.Do.insert(n,r),Rm(t.remoteStore,new xp(Qh(Bh(n.path)),r,2,vl.o))}}function Uy(t,e,n){return Object(Bo.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Bo.d)(this,function(a){switch(a.label){case 0:return r=kl(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.$o(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=kg.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return Object(Bo.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(Bo.d)(this,function(l){switch(l.label){case 0:n=kl(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return pp.forEach(e,function(e){return pp.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return pp.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!vp(r=l.sent()))throw r;return El("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function Fy(t,e){return Object(Bo.b)(this,void 0,void 0,function(){var n,r;return Object(Bo.d)(this,function(i){switch(i.label){case 0:return(n=kl(t)).currentUser.isEqual(e)?[3,3]:(El("SyncEngine","User change. New user:",e.toKey()),[4,Dg(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new _l(wl.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Uy(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function qy(t,e){var n=kl(t),r=n.Co.get(e);if(r&&r.bo)return Jf().add(r.key);var i=Jf(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function By(t,e){return Object(Bo.b)(this,void 0,void 0,function(){var n,r,i;return Object(Bo.d)(this,function(o){switch(o.label){case 0:return[4,Bg((n=kl(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&My(n,e.targetId,i.To),i)]}})})}function Hy(t){return Object(Bo.b)(this,void 0,void 0,function(){var e;return Object(Bo.d)(this,function(n){return[2,zg((e=kl(t)).localStore).then(function(t){return Uy(e,t)})]})})}function zy(t,e,n,r){return Object(Bo.b)(this,void 0,void 0,function(){var i,o;return Object(Bo.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=kl(t),r=kl(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):pp.resolve(null)})})}((i=kl(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Gm(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(jy(i,e,r||null),Ry(i,e),function(t,e){kl(kl(t)._n).Gt(e)}(i.localStore,e)):xl(),s.label=4;case 4:return[4,Uy(i,o)];case 5:return s.sent(),[3,7];case 6:El("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function Gy(t,e){return Object(Bo.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Bo.d)(this,function(c){switch(c.label){case 0:return Yy(n=kl(t)),Zy(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Ky(n,r.toArray())]);case 1:return i=c.sent(),n.Oo=!0,[4,Zm(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)Rm(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return Dy(n,e),qg(n.localStore,e,!0)}),jm(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,Ky(n,a)];case 5:return c.sent(),function(t){var e=kl(t);e.Co.forEach(function(t,n){jm(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new qf(rh.comparator)}(n),n.Oo=!1,[4,Zm(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function Ky(t,e,n){return Object(Bo.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return Object(Bo.d)(this,function(g){switch(g.label){case 0:n=kl(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,Fg(n.localStore,Qh(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.Po.get(h[l]),[4,By(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Hg(n.localStore,a)];case 8:return p=g.sent(),[4,Fg(n.localStore,p)];case 9:return u=g.sent(),[4,Cy(n,Wy(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function Wy(t){return qh(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function $y(t){var e=kl(t);return kl(kl(e.localStore).persistence).fn()}function Qy(t,e,n,r){return Object(Bo.b)(this,void 0,void 0,function(){var i,o,s;return Object(Bo.d)(this,function(a){switch(a.label){case 0:return(i=kl(t)).Oo?(El("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,zg(i.localStore)];case 3:return o=a.sent(),s=nd.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Uy(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,qg(i.localStore,e,!0)];case 6:return a.sent(),Dy(i,e,r),[3,8];case 7:xl(),a.label=8;case 8:return[2]}})})}function Xy(t,e,n){return Object(Bo.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(Bo.d)(this,function(f){switch(f.label){case 0:if(!(r=Yy(t)).Oo)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(El("SyncEngine","Adding an already active target "+s),[3,5]):[4,Hg(r.localStore,s)]:[3,6];case 2:return a=f.sent(),[4,Fg(r.localStore,a)];case 3:return u=f.sent(),[4,Cy(r,Wy(a),u.targetId,!1)];case 4:f.sent(),Rm(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Bo.d)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,qg(r.localStore,t,!1).then(function(){jm(r.remoteStore,t),Dy(r,t)}).catch(ag)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function Yy(t){var e=kl(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ty.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qy.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xy.bind(null,e),e.vo._r=ly.bind(null,e.eventManager),e.vo.Mo=hy.bind(null,e.eventManager),e}function Zy(t){var e=kl(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ay.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ky.bind(null,e),e}var Jy=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Bo.b)(this,void 0,void 0,function(){return Object(Bo.d)(this,function(e){switch(e.label){case 0:return this.R=Om(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return jg(this.persistence,new Ng,t.initialUser,this.R)},t.prototype.qo=function(t){return new em(rm.bs,this.R)},t.prototype.Bo=function(t){return new pm},t.prototype.terminate=function(){return Object(Bo.b)(this,void 0,void 0,function(){return Object(Bo.d)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),tb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Bo.c)(e,t),e.prototype.initialize=function(e){return Object(Bo.b)(this,void 0,void 0,function(){return Object(Bo.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Gg(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,Zy(this.Ko.syncEngine)];case 4:return n.sent(),[4,Gm(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return jg(this.persistence,new Ng,t.initialUser,this.R)},e.prototype.Uo=function(t){return new lg(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=Ig(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?$p.withCacheSize(this.cacheSizeBytes):$p.DEFAULT;return new Eg(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,wm(),_m(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new pm},e}(Jy),eb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Bo.c)(e,t),e.prototype.initialize=function(e){return Object(Bo.b)(this,void 0,void 0,function(){var n,r=this;return Object(Bo.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof dm?(this.sharedClientState.syncEngine={ui:zy.bind(null,n),ai:Qy.bind(null,n),hi:Xy.bind(null,n),fn:$y.bind(null,n),ci:Hy.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return Object(Bo.b)(r,void 0,void 0,function(){return Object(Bo.d)(this,function(e){switch(e.label){case 0:return[4,Gy(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=wm();if(!dm.yt(e))throw new _l(wl.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Ig(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new dm(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(tb),nb=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Bo.b)(this,void 0,void 0,function(){var n=this;return Object(Bo.d)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Iy(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Fy.bind(null,this.syncEngine),[4,Zm(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new ay},t.prototype.createDatastore=function(t){var e=Om(t.databaseInfo.databaseId),n=new vm(t.databaseInfo);return function(t,e,n){return new Im(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Iy(s.syncEngine,t,0)},o=mm.yt()?new mm:new gm,new Am(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new _y(t,e,n,r,i,o);return s&&(a.Oo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(Bo.b)(this,void 0,void 0,function(){var e;return Object(Bo.d)(this,function(n){switch(n.label){case 0:return e=kl(t),El("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,Nm(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),rb=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),ib=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new dp,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(Bo.b)(this,void 0,void 0,function(){return Object(Bo.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return Object(Bo.b)(this,void 0,void 0,function(){return Object(Bo.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return Object(Bo.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(Bo.d)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new py(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return Object(Bo.b)(this,void 0,void 0,function(){var t,e;return Object(Bo.d)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return Object(Bo.b)(this,void 0,void 0,function(){var e;return Object(Bo.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(Bo.b)(this,void 0,void 0,function(){var t,e;return Object(Bo.d)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(Bo.b)(this,void 0,void 0,function(){var e,n=this;return Object(Bo.d)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new _l(wl.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Bo.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Bo.d)(this,function(u){switch(u.label){case 0:return n=kl(t),r=Ed(n.R)+"/documents",i={documents:e.map(function(t){return wd(n.R,t)})},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Al(!!e.found);var n=_d(t,e.found.name),r=yd(e.found.updateTime),i=new yh({mapValue:{fields:e.found.fields}});return vh.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Al(!!e.missing),Al(!!e.readTime);var n=_d(t,e.missing),r=yd(e.readTime);return vh.newNoDocument(n,r)}(t,e):xl()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Al(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Mf(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(Bo.b)(this,void 0,void 0,function(){var t,e=this;return Object(Bo.d)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=rh.fromPath(n);e.mutations.push(new Lf(r,e.precondition(r)))}),[4,function(t,e){return Object(Bo.b)(this,void 0,void 0,function(){var n,r,i;return Object(Bo.d)(this,function(o){switch(o.label){case 0:return n=kl(t),r=Ed(n.R)+"/documents",i={writes:e.map(function(t){return xd(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw xl();e=Ll.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new _l(wl.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?_f.updateTime(e):_f.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Ll.min()))throw new _l(wl.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _f.updateTime(e)}return _f.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),ob=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Cm(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return Object(Bo.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(Bo.d)(this,function(r){return t=new ib(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!th(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Uf(e)}return!1},t}(),sb=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=im.UNAUTHENTICATED,this.clientId=Rl.u(),this.credentialListener=function(){},this.receivedInitialUser=new dp,this.credentials.setChangeListener(function(t){El("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return Object(Bo.b)(this,void 0,void 0,function(){return Object(Bo.d)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new _l(wl.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new dp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Bo.b)(t,void 0,void 0,function(){var t,n;return Object(Bo.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=ny(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function ab(t,e){return Object(Bo.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(Bo.d)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),El("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return Object(Bo.b)(i,void 0,void 0,function(){return Object(Bo.d)(this,function(t){switch(t.label){case 0:return[4,Dg(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function ub(t,e){return Object(Bo.b)(this,void 0,void 0,function(){var n,r;return Object(Bo.d)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,cb(t)];case 1:return n=i.sent(),El("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return Object(Bo.b)(this,void 0,void 0,function(){var n,r;return Object(Bo.d)(this,function(i){switch(i.label){case 0:return(n=kl(t)).asyncQueue.verifyOperationInProgress(),El("RemoteStore","RemoteStore received new credentials"),r=Vm(n),n.$r.add(3),[4,Nm(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,km(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function cb(t){return Object(Bo.b)(this,void 0,void 0,function(){return Object(Bo.d)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(El("FirestoreClient","Using default OfflineComponentProvider"),[4,ab(t,new Jy)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function lb(t){return Object(Bo.b)(this,void 0,void 0,function(){return Object(Bo.d)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(El("FirestoreClient","Using default OnlineComponentProvider"),[4,ub(t,new nb)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function hb(t){return cb(t).then(function(t){return t.persistence})}function fb(t){return cb(t).then(function(t){return t.localStore})}function db(t){return lb(t).then(function(t){return t.remoteStore})}function pb(t){return lb(t).then(function(t){return t.syncEngine})}function gb(t){return Object(Bo.b)(this,void 0,void 0,function(){var e,n;return Object(Bo.d)(this,function(r){switch(r.label){case 0:return[4,lb(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Oy.bind(null,e.syncEngine),n.onUnlisten=Ey.bind(null,e.syncEngine),n)]}})})}function mb(t,e,n){var r=this;void 0===n&&(n={});var i=new dp;return t.asyncQueue.enqueueAndForget(function(){return Object(Bo.b)(r,void 0,void 0,function(){var r;return Object(Bo.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new rb({next:function(o){e.enqueueAndForget(function(){return cy(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new _l(wl.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new _l(wl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new dy(Bh(n.path),o,{includeMetadataChanges:!0,so:!0});return uy(t,s)},[4,gb(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function yb(t,e,n){var r=this;void 0===n&&(n={});var i=new dp;return t.asyncQueue.enqueueAndForget(function(){return Object(Bo.b)(r,void 0,void 0,function(){var r;return Object(Bo.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new rb({next:function(n){e.enqueueAndForget(function(){return cy(t,s)}),n.fromCache&&"server"===r.source?i.reject(new _l(wl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new dy(n,o,{includeMetadataChanges:!0,so:!0});return uy(t,s)},[4,gb(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var bb=function(t,e,n,r,i,o,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s},vb=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),wb=new Map,_b=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Ob=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(im.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Cb=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(this.token.user)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Eb=function(){function t(t){var e=this;this.oc=null,this.currentUser=im.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then(function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(El("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Al("string"==typeof n.accessToken),new _b(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return Al(null===t||"string"==typeof t),new im(t)},t}(),Sb=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n,this.type="FirstParty",this.user=im.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.lc&&(t["X-Goog-Iam-Authorization-Token"]=this.lc),t},enumerable:!1,configurable:!0}),t}(),Tb=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n}return t.prototype.getToken=function(){return Promise.resolve(new Sb(this.ac,this.hc,this.lc))},t.prototype.setChangeListener=function(t){t(im.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Ib(t,e,n){if(!n)throw new _l(wl.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function xb(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new _l(wl.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Ab(t,e,n,r){if(!0===e&&!0===r)throw new _l(wl.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function kb(t){if(!rh.isDocumentKey(t))throw new _l(wl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Nb(t){if(rh.isDocumentKey(t))throw new _l(wl.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Rb(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":xl()}function jb(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new _l(wl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Rb(t);throw new _l(wl.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Db(t,e){if(e<=0)throw new _l(wl.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Pb=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new _l(wl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new _l(wl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Ab("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Mb=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pb({}),this._settingsFrozen=!1,t instanceof vb?(this._databaseId=t,this._credentials=new Ob):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new _l(wl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vb(t.options.projectId)}(t),this._credentials=new Eb(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new _l(wl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new _l(wl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pb(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Ob;switch(t.type){case"gapi":var e=t.client;return Al(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Tb(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new _l(wl.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=wb.get(this))&&(El("ComponentProvider","Removing Datastore"),wb.delete(this),t.terminate()),Promise.resolve();var t},t}(),Lb=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Ub(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Vb=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Ub=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Bh(r))||this)._path=r,i.type="collection",i}return Object(Bo.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Lb(this.firestore,null,new rh(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Vb);function Fb(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(ms.i)(t),Ib("collection","path",e),t instanceof Mb)return Nb(n=Bl.fromString.apply(Bl,Object(Bo.f)([e],r))),new Ub(t,null,n);if(!(t instanceof Lb||t instanceof Ub))throw new _l(wl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Nb(n=Bl.fromString.apply(Bl,Object(Bo.f)([t.path],r)).child(Bl.fromString(e))),new Ub(t.firestore,null,n)}function qb(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(ms.i)(t),1===arguments.length&&(e=Rl.u()),Ib("doc","path",e),t instanceof Mb)return kb(n=Bl.fromString.apply(Bl,Object(Bo.f)([e],r))),new Lb(t,null,new rh(n));if(!(t instanceof Lb||t instanceof Ub))throw new _l(wl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return kb(n=t._path.child(Bl.fromString.apply(Bl,Object(Bo.f)([e],r)))),new Lb(t.firestore,t instanceof Ub?t.converter:null,new rh(n))}function Bb(t,e){return t=Object(ms.i)(t),e=Object(ms.i)(e),(t instanceof Lb||t instanceof Ub)&&(e instanceof Lb||e instanceof Ub)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Hb(t,e){return t=Object(ms.i)(t),e=Object(ms.i)(e),t instanceof Vb&&e instanceof Vb&&t.firestore===e.firestore&&Yh(t._query,e._query)&&t.converter===e.converter}var zb=function(){function t(){var t=this;this.fc=Promise.resolve(),this.dc=[],this.wc=!1,this._c=[],this.mc=null,this.yc=!1,this.gc=[],this.Zi=new Cm(this,"async_queue_retry"),this.Ec=function(){var e=_m();e&&El("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=_m();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ec)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.wc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Tc(),this.Ic(t)},t.prototype.enterRestrictedMode=function(){if(!this.wc){this.wc=!0;var t=_m();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ec)}},t.prototype.enqueue=function(t){return this.Tc(),this.wc?new Promise(function(t){}):this.Ic(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.dc.push(t),e.Ac()})},t.prototype.Ac=function(){return Object(Bo.b)(this,void 0,void 0,function(){var t,e=this;return Object(Bo.d)(this,function(n){switch(n.label){case 0:if(0===this.dc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.dc[0]()];case 2:return n.sent(),this.dc.shift(),this.Zi.reset(),[3,4];case 3:if(!vp(t=n.sent()))throw t;return El("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.dc.length>0&&this.Zi.ji(function(){return e.Ac()}),n.label=5;case 5:return[2]}})})},t.prototype.Ic=function(t){var e=this,n=this.fc.then(function(){return e.yc=!0,t().catch(function(t){throw e.mc=t,e.yc=!1,Sl("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.yc=!1,t})});return this.fc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Tc(),this.gc.indexOf(t)>-1&&(e=0);var i=ey.createAndSchedule(this,t,e,n,function(t){return r.Rc(t)});return this._c.push(i),i},t.prototype.Tc=function(){this.mc&&xl()},t.prototype.verifyOperationInProgress=function(){},t.prototype.bc=function(){return Object(Bo.b)(this,void 0,void 0,function(){var t;return Object(Bo.d)(this,function(e){switch(e.label){case 0:return[4,t=this.fc];case 1:e.sent(),e.label=2;case 2:if(t!==this.fc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.vc=function(t){for(var e=0,n=this._c;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Pc=function(t){var e=this;return this.bc().then(function(){e._c.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e._c;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.bc()})},t.prototype.Vc=function(t){this.gc.push(t)},t.prototype.Rc=function(t){var e=this._c.indexOf(t);this._c.splice(e,1)},t}();function Gb(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new dp,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var Kb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new zb,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(Bo.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||$b(this),this._firestoreClient.terminate()},e}(Mb);function Wb(t){return t._firestoreClient||$b(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function $b(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new bb(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new sb(t._credentials,t._queue,r)}function Qb(t,e,n){var r=this,i=new dp;return t.asyncQueue.enqueue(function(){return Object(Bo.b)(r,void 0,void 0,function(){var r;return Object(Bo.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,ab(t,n)];case 1:return o.sent(),[4,ub(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===wl.FAILED_PRECONDITION||t.code===wl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function Xb(t){if(t._initialized||t._terminated)throw new _l(wl.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Yb=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new _l(wl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zl(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Zb=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Kl.fromBase64String(e))}catch(e){throw new _l(wl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Kl.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Jb=function(t){this._methodName=t},tv=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new _l(wl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new _l(wl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return jl(this._lat,t._lat)||jl(this._long,t._long)},t}(),ev=/^__.*__$/,nv=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new kf(t,this.data,this.fieldMask,e,this.fieldTransforms):new Af(t,this.data,e,this.fieldTransforms)},t}(),rv=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new kf(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function iv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xl()}}var ov=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dc",{get:function(){return this.settings.Dc},enumerable:!1,configurable:!0}),t.prototype.Cc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Nc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Fc(t),r},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Sc(),r},t.prototype.Oc=function(t){return this.Cc({path:void 0,xc:!0})},t.prototype.$c=function(t){return Sv(t,this.settings.methodName,this.settings.Mc||!1,this.path,this.settings.Lc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Sc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fc(this.path.get(t))},t.prototype.Fc=function(t){if(0===t.length)throw this.$c("Document fields must not be empty");if(iv(this.Dc)&&ev.test(t))throw this.$c('Document fields cannot begin and end with "__"')},t}(),sv=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Om(t)}return t.prototype.Bc=function(t,e,n,r){return void 0===r&&(r=!1),new ov({Dc:t,methodName:e,Lc:n,path:zl.emptyPath(),xc:!1,Mc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function av(t){var e=t._freezeSettings(),n=Om(t._databaseId);return new sv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function uv(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Bc(o.merge||o.mergeFields?2:0,e,n,i);_v("Data must be an object, but it was:",s,r);var a,u,c=vv(r,s);if(o.merge)a=new Gl(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=Ov(e,f[h],n);if(!s.contains(d))throw new _l(wl.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Tv(l,d)||l.push(d)}a=new Gl(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new nv(new yh(c),a,u)}var cv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Bo.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Dc)throw t.$c(1===t.Dc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Jb);function lv(t,e,n){return new ov({Dc:3,Lc:e.settings.Lc,methodName:t._methodName,xc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var hv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Bo.c)(e,t),e.prototype._toFieldTransform=function(t){return new vf(t.path,new hf)},e.prototype.isEqual=function(t){return t instanceof e},e}(Jb),fv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(Bo.c)(e,t),e.prototype._toFieldTransform=function(t){var e=lv(this,t,!0),n=this.qc.map(function(t){return bv(t,e)}),r=new ff(n);return new vf(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Jb),dv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(Bo.c)(e,t),e.prototype._toFieldTransform=function(t){var e=lv(this,t,!0),n=this.qc.map(function(t){return bv(t,e)}),r=new pf(n);return new vf(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Jb),pv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return Object(Bo.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new mf(t.R,sf(t.R,this.Uc));return new vf(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Jb);function gv(t,e,n,r){var i=t.Bc(1,e,n);_v("Data must be an object, but it was:",i,r);var o=[],s=yh.empty();Ul(r,function(t,r){var a=Ev(e,t,n);r=Object(ms.i)(r);var u=i.kc(a);if(r instanceof cv)o.push(a);else{var c=bv(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new Gl(o);return new rv(s,a,i.fieldTransforms)}function mv(t,e,n,r,i,o){var s=t.Bc(1,e,n),a=[Ov(e,r,n)],u=[i];if(o.length%2!=0)throw new _l(wl.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Ov(e,o[c])),u.push(o[c+1]);for(var l=[],h=yh.empty(),f=a.length-1;f>=0;--f)if(!Tv(l,a[f])){var d=a[f],p=u[f];p=Object(ms.i)(p);var g=s.kc(d);if(p instanceof cv)l.push(d);else{var m=bv(p,g);null!=m&&(l.push(d),h.set(d,m))}}var y=new Gl(l);return new rv(h,y,s.fieldTransforms)}function yv(t,e,n,r){return void 0===r&&(r=!1),bv(n,t.Bc(r?4:3,e))}function bv(t,e){if(wv(t=Object(ms.i)(t)))return _v("Unsupported field value:",e,t),vv(t,e);if(t instanceof Jb)return function(t,e){if(!iv(e.Dc))throw e.$c(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.$c(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xc&&4!==e.Dc)throw e.$c("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=bv(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(ms.i)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return sf(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Ml.fromDate(t);return{timestampValue:pd(e.R,n)}}if(t instanceof Ml)return n=new Ml(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:pd(e.R,n)};if(t instanceof tv)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Zb)return{bytesValue:gd(e.R,t._byteString)};if(t instanceof Lb){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.$c("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:bd(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.$c("Unsupported field value: "+Rb(t))}(t,e)}function vv(t,e){var n={};return Fl(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ul(t,function(t,r){var i=bv(r,e.Nc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function wv(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ml||t instanceof tv||t instanceof Zb||t instanceof Lb||t instanceof Jb)}function _v(t,e,n){if(!wv(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Rb(n);throw e.$c("an object"===r?t+" a custom object":t+" "+r)}}function Ov(t,e,n){if((e=Object(ms.i)(e))instanceof Yb)return e._internalPath;if("string"==typeof e)return Ev(t,e);throw Sv("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Cv=new RegExp("[~\\*/\\[\\]]");function Ev(t,e,n){if(e.search(Cv)>=0)throw Sv("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Yb.bind.apply(Yb,Object(Bo.f)([void 0],e.split(".")))))._internalPath}catch(r){throw Sv("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Sv(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new _l(wl.INVALID_ARGUMENT,(a+=". ")+t+u)}function Tv(t,e){return t.some(function(t){return t.isEqual(e)})}var Iv=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Lb(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new xv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Av("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),xv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Bo.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Iv);function Av(t,e){return"string"==typeof e?Ev(t,e):e instanceof Yb?e._internalPath:e._delegate._internalPath}var kv=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Nv=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(Bo.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Rv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Av("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Iv),Rv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Bo.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Nv),jv=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new kv(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new Rv(n._firestore,n._userDataWriter,r.key,r,new kv(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new _l(wl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new Rv(t._firestore,t._userDataWriter,e.doc.key,e.doc,new kv(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Rv(t._firestore,t._userDataWriter,e.doc.key,e.doc,new kv(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Dv(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Dv(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xl()}}function Pv(t,e){return t instanceof Nv&&e instanceof Nv?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof jv&&e instanceof jv&&t._firestore===e._firestore&&Hb(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Mv(t){if(zh(t)&&0===t.explicitOrderBy.length)throw new _l(wl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Lv=function(){};function Vv(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Uv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.Kc=n,i.jc=r,i.type="where",i}return Object(Bo.c)(e,t),e.prototype._apply=function(t){var e=av(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new _l(wl.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Kv(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(Gv(r,t,l[c]));a={arrayValue:{values:u}}}else a=Gv(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Kv(s,o),a=yv(n,"where",s,"in"===o||"not-in"===o);var h=Sh.create(i,o,a);return function(t,e){if(e.g()){var n=Kh(t);if(null!==n&&!n.isEqual(e.field))throw new _l(wl.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Gh(t);null!==r&&Wv(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new _l(wl.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Qc,this.Kc,this.jc);return new Vb(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Fh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Lv),Fv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Wc=n,r.type="orderBy",r}return Object(Bo.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new _l(wl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new _l(wl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Mh(e,n);return function(t,e){if(null===Gh(t)){var n=Kh(t);null!==n&&Wv(0,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Wc);return new Vb(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Fh(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Lv),qv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Gc=n,i.zc=r,i}return Object(Bo.c)(e,t),e.prototype._apply=function(t){return new Vb(t.firestore,t.converter,Xh(t._query,this.Gc,this.zc))},e}(Lv),Bv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(Bo.c)(e,t),e.prototype._apply=function(t){var e=zv(t,this.type,this.Hc,this.Jc);return new Vb(t.firestore,t.converter,function(t,e){return new Fh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Lv),Hv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(Bo.c)(e,t),e.prototype._apply=function(t){var e=zv(t,this.type,this.Hc,this.Jc);return new Vb(t.firestore,t.converter,function(t,e){return new Fh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Lv);function zv(t,e,n,r){if(n[0]=Object(ms.i)(n[0]),n[0]instanceof Iv)return function(t,e,n,r,i){if(!r)throw new _l(wl.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=$h(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(hh(e,r.key));else{var c=r.data.field(u.field);if(Yl(c))throw new _l(wl.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new _l(wl.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Dh(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=av(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new _l(wl.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new _l(wl.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Wh(t)&&-1!==c.indexOf("/"))throw new _l(wl.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Bl.fromString(c));if(!rh.isDocumentKey(l))throw new _l(wl.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new rh(l);a.push(hh(e,h))}else{var f=yv(n,r,c);a.push(f)}}return new Dh(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Gv(t,e,n){if("string"==typeof(n=Object(ms.i)(n))){if(""===n)throw new _l(wl.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wh(e)&&-1!==n.indexOf("/"))throw new _l(wl.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Bl.fromString(n));if(!rh.isDocumentKey(r))throw new _l(wl.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return hh(t,new rh(r))}if(n instanceof Lb)return hh(t,n._key);throw new _l(wl.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Rb(n)+".")}function Kv(t,e){if(!Array.isArray(t)||0===t.length)throw new _l(wl.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new _l(wl.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Wv(t,e,n){if(!n.isEqual(e))throw new _l(wl.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var $v=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),ih(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ql(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Xl(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw xl()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Ul(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new tv(Ql(t.latitude),Ql(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Zl(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Jl(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=$l(t);return new Ml(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Bl.fromString(t);Al(Hd(n));var r=new vb(n.get(1),n.get(3)),i=new rh(n.popFirst(5));return r.isEqual(e)||Sl("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Qv(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Xv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Bo.c)(e,t),e.prototype.convertBytes=function(t){return new Zb(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Lb(this.firestore,null,e)},e}($v),Yv=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=av(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Zv(t,this._firestore),i=Qv(r.converter,e,n),o=uv(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,_f.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=Zv(t,this._firestore);return o="string"==typeof(e=Object(ms.i)(e))||e instanceof Yb?mv(this._dataReader,"WriteBatch.update",s._key,e,n,r):gv(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,_f.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Zv(t,this._firestore);return this._mutations=this._mutations.concat(new Mf(e._key,_f.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new _l(wl.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Zv(t,e){if((t=Object(ms.i)(t)).firestore!==e)throw new _l(wl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Jv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Bo.c)(e,t),e.prototype.convertBytes=function(t){return new Zb(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Lb(this.firestore,null,e)},e}($v);function tw(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=jb(t,Lb);var o=jb(t.firestore,Kb),s=av(o);return nw(o,[("string"==typeof(e=Object(ms.i)(e))||e instanceof Yb?mv(s,"updateDoc",t._key,e,n,r):gv(s,"updateDoc",t._key,e)).toMutation(t._key,_f.exists(!0))])}function ew(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Object(ms.i)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Gb(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(Gb(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Lb)c=jb(t.firestore,Kb),l=Bh(t._key.path),u={next:function(e){i[a]&&i[a](rw(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=jb(t,Vb);c=jb(d.firestore,Kb),l=d._query;var p=new Jv(c);u={next:function(t){i[a]&&i[a](new jv(c,p,d,t))},error:i[a+1],complete:i[a+2]},Mv(t._query)}return function(t,e,n,r){var i=this,o=new rb(r),s=new dy(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(Bo.b)(i,void 0,void 0,function(){var e;return Object(Bo.d)(this,function(n){switch(n.label){case 0:return e=uy,[4,gb(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Bo.b)(i,void 0,void 0,function(){var e;return Object(Bo.d)(this,function(n){switch(n.label){case 0:return e=cy,[4,gb(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(Wb(c),l,h,u)}function nw(t,e){return function(t,e){var n=this,r=new dp;return t.asyncQueue.enqueueAndForget(function(){return Object(Bo.b)(n,void 0,void 0,function(){var n;return Object(Bo.d)(this,function(i){switch(i.label){case 0:return n=Sy,[4,pb(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(Wb(t),e)}function rw(t,e,n){var r=n.docs.get(e._key),i=new Jv(t);return new Nv(t,i,e._key,r,new kv(n.hasPendingWrites,n.fromCache),e.converter)}var iw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(Bo.c)(e,t),e.prototype.get=function(e){var n=this,r=Zv(e,this._firestore),i=new Jv(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Nv(n._firestore,i,r._key,t._document,new kv(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=av(t)}return t.prototype.get=function(t){var e=this,n=Zv(t,this._firestore),r=new Xv(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return xl();var i=t[0];if(i.isFoundDocument())return new Iv(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Iv(e._firestore,r,n._key,null,n.converter);throw xl()})},t.prototype.set=function(t,e,n){var r=Zv(t,this._firestore),i=Qv(r.converter,e,n),o=uv(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Zv(t,this._firestore);return o="string"==typeof(e=Object(ms.i)(e))||e instanceof Yb?mv(this._dataReader,"Transaction.update",s._key,e,n,r):gv(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=Zv(t,this._firestore);return this._transaction.delete(e._key),this},t}());function ow(){if("undefined"==typeof Uint8Array)throw new _l(wl.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function sw(){if("undefined"==typeof atob)throw new _l(wl.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var aw=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return sw(),new t(Zb.fromBase64String(e))},t.fromUint8Array=function(e){return ow(),new t(Zb.fromUint8Array(e))},t.prototype.toBase64=function(){return sw(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return ow(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),uw=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Xb(t=jb(t,Kb));var n=Wb(t),r=t._freezeSettings(),i=new nb;return Qb(n,i,new tb(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Xb(t=jb(t,Kb));var e=Wb(t),n=t._freezeSettings(),r=new nb;return Qb(e,r,new eb(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new _l(wl.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new dp;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Bo.b)(e,void 0,void 0,function(){var e;return Object(Bo.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Bo.b)(this,void 0,void 0,function(){return Object(Bo.d)(this,function(e){switch(e.label){case 0:return mp.yt()?[4,mp.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Ig(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),cw=function(){function t(t,e,n){var r=this;this._delegate=e,this.Yc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof vb||(this.Xc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=jb(t,Mb))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Tl("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=Object(ms.e)(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new _l(wl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new Cb(new _b(o,new im(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Bo.b)(e,void 0,void 0,function(){var e,n;return Object(Bo.d)(this,function(r){switch(r.label){case 0:return[4,hb(t)];case 1:return e=r.sent(),[4,db(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=kl(t);return e.$r.delete(0),km(e)}(n))]}})})})}(Wb(jb(this._delegate,Kb)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Bo.b)(e,void 0,void 0,function(){var e,n;return Object(Bo.d)(this,function(r){switch(r.label){case 0:return[4,hb(t)];case 1:return e=r.sent(),[4,db(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(Bo.b)(this,void 0,void 0,function(){var e;return Object(Bo.d)(this,function(n){switch(n.label){case 0:return(e=kl(t)).$r.add(0),[4,Nm(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(Wb(jb(this._delegate,Kb)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Ab("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Yc.enableMultiTabIndexedDbPersistence(this):this.Yc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Yc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Xc&&(this.Xc._removeServiceInstance("firestore"),this.Xc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new dp;return t.asyncQueue.enqueueAndForget(function(){return Object(Bo.b)(e,void 0,void 0,function(){var e;return Object(Bo.d)(this,function(r){switch(r.label){case 0:return e=Ny,[4,pb(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(Wb(jb(this._delegate,Kb)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new rb(e);return t.asyncQueue.enqueueAndForget(function(){return Object(Bo.b)(n,void 0,void 0,function(){var e;return Object(Bo.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){kl(t).Gr.add(e),e.next()},[4,gb(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Bo.b)(n,void 0,void 0,function(){var e;return Object(Bo.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){kl(t).Gr.delete(e)},[4,gb(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(Wb(t=jb(t,Kb)),Gb(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Xc)throw new _l(wl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Xc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Cw(this,Fb(this._delegate,t))}catch(t){throw gw(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new pw(this,qb(this._delegate,t))}catch(t){throw gw(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new ww(this,function(t,e){if(t=jb(t,Mb),Ib("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new _l(wl.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Vb(t,null,function(t){return new Fh(Bl.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw gw(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new dp;return t.asyncQueue.enqueueAndForget(function(){return Object(Bo.b)(n,void 0,void 0,function(){var n;return Object(Bo.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return lb(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new ob(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(Wb(t),function(n){return e(new iw(t,n))})}(this._delegate,function(n){return t(new hw(e,n))})},t.prototype.batch=function(){var t=this;return Wb(this._delegate),new fw(new Yv(this._delegate,function(e){return nw(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new _l(wl.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new _l(wl.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),lw=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Bo.c)(e,t),e.prototype.convertBytes=function(t){return new aw(new Zb(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return pw.Zc(e,this.firestore,null)},e}($v),hw=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new lw(t)}return t.prototype.get=function(t){var e=this,n=Ew(t);return this._delegate.get(n).then(function(t){return new bw(e._firestore,new Nv(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=Ew(t);return n?(xb("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Ew(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Bo.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Ew(t);return this._delegate.delete(e),this},t}(),fw=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Ew(t);return n?(xb("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Ew(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Bo.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Ew(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),dw=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Rv(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new vw(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.tu=function(e,n){var r=t.eu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new lw(e),n),i.set(n,o)),o},t}();dw.eu=new WeakMap;var pw=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new lw(t)}return t.nu=function(e,n,r){if(e.length%2!=0)throw new _l(wl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Lb(n._delegate,r,new rh(e)))},t.Zc=function(e,n,r){return new t(n,new Lb(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Cw(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Cw(this.firestore,Fb(this._delegate,t))}catch(t){throw gw(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(ms.i)(t))instanceof Lb&&Bb(this._delegate,t)},t.prototype.set=function(t,e){e=xb("DocumentReference.set",e);try{return function(t,e,n){t=jb(t,Lb);var r=jb(t.firestore,Kb),i=Qv(t.converter,e,n);return nw(r,[uv(av(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,_f.none())])}(this._delegate,t,e)}catch(t){throw gw(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?tw(this._delegate,t):tw.apply(void 0,Object(Bo.f)([this._delegate,t,e],n))}catch(t){throw gw(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return nw(jb((t=this._delegate).firestore,Kb),[new Mf(t._key,_f.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=mw(e),i=yw(e,function(e){return new bw(t.firestore,new Nv(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return ew(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=jb(t,Lb);var e=jb(t.firestore,Kb),n=Wb(e),r=new Jv(e);return function(t,e){var n=this,r=new dp;return t.asyncQueue.enqueueAndForget(function(){return Object(Bo.b)(n,void 0,void 0,function(){var n;return Object(Bo.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Bo.b)(this,void 0,void 0,function(){var r,i;return Object(Bo.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=kl(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new _l(wl.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=ny(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,fb(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new Nv(e,r,t._key,n,new kv(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=jb(t,Lb);var e=jb(t.firestore,Kb);return mb(Wb(e),t._key,{source:"server"}).then(function(n){return rw(e,t,n)})}(this._delegate):function(t){t=jb(t,Lb);var e=jb(t.firestore,Kb);return mb(Wb(e),t._key).then(function(n){return rw(e,t,n)})}(this._delegate)).then(function(t){return new bw(e.firestore,new Nv(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?dw.tu(this.firestore,e):null))},t}();function gw(t,e,n){return t.message=t.message.replace(e,n),t}function mw(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Gb(r))return r}return{}}function yw(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Gb(t[0])?t[0]:Gb(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var bw=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new pw(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Pv(this._delegate,t._delegate)},t}(),vw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Bo.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(bw),ww=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new lw(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Vv(this._delegate,function(t,e,n){var r=e,i=Av("where",t);return new Uv(i,r,n)}(e,n,r)))}catch(e){throw gw(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Vv(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Av("orderBy",t);return new Fv(r,n)}(e,n)))}catch(e){throw gw(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Vv(this._delegate,function(t){return Db("limit",t),new qv("limit",t,"F")}(e)))}catch(e){throw gw(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Vv(this._delegate,function(t){return Db("limitToLast",t),new qv("limitToLast",t,"L")}(e)))}catch(e){throw gw(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Vv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Bv("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw gw(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Vv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Bv("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw gw(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Vv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Hv("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw gw(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Vv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Hv("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw gw(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Hb(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=jb(t,Vb);var e=jb(t.firestore,Kb),n=Wb(e),r=new Jv(e);return function(t,e){var n=this,r=new dp;return t.asyncQueue.enqueueAndForget(function(){return Object(Bo.b)(n,void 0,void 0,function(){var n;return Object(Bo.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Bo.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(Bo.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Bg(t,e,!0)];case 1:return a=u.sent(),r=new by(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=ny(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,fb(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new jv(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=jb(t,Vb);var e=jb(t.firestore,Kb),n=Wb(e),r=new Jv(e);return yb(n,t._query,{source:"server"}).then(function(n){return new jv(e,r,t,n)})}(this._delegate):function(t){t=jb(t,Vb);var e=jb(t.firestore,Kb),n=Wb(e),r=new Jv(e);return Mv(t._query),yb(n,t._query).then(function(n){return new jv(e,r,t,n)})}(this._delegate)).then(function(t){return new Ow(e.firestore,new jv(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=mw(e),i=yw(e,function(e){return new Ow(t.firestore,new jv(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return ew(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?dw.tu(this.firestore,e):null))},t}(),_w=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new vw(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Ow=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new ww(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new vw(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new _w(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new vw(n._firestore,r))})},t.prototype.isEqual=function(t){return Pv(this._delegate,t._delegate)},t}(),Cw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(Bo.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new pw(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new pw(this.firestore,void 0===t?qb(this._delegate):qb(this._delegate,t))}catch(t){throw gw(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=jb(t.firestore,Kb),r=qb(t),i=Qv(t.converter,e);return nw(n,[uv(av(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,_f.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new pw(e.firestore,t)})},e.prototype.isEqual=function(t){return Bb(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?dw.tu(this.firestore,t):null))},e}(ww);function Ew(t){return jb(t,Lb)}var Sw,Tw=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Yb.bind.apply(Yb,Object(Bo.f)([void 0],t)))}return t.documentId=function(){return new t(zl.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(ms.i)(t))instanceof Yb&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Iw=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new hv("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new cv("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new fv("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new dv("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new pv("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),xw=n("/6Yf"),Aw={Firestore:cw,GeoPoint:tv,Timestamp:Ml,Blob:aw,Transaction:hw,WriteBatch:fw,DocumentReference:pw,DocumentSnapshot:bw,Query:ww,QueryDocumentSnapshot:vw,QuerySnapshot:Ow,CollectionReference:Cw,FieldPath:Tw,FieldValue:Iw,setLogLevel:function(t){Ol.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function kw(t,e){return function(t,e=us.b){return new It.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function Nw(t,e){return kw(t,e).pipe(Object(Ut.a)(t=>({payload:t,type:"query"})))}function Rw(t,e){return Nw(t,e).pipe($t(void 0),cs(),Object(Ut.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function jw(t,e,n){return Rw(t,n).pipe(Qt((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return Dw(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Dw(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Dw(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),t=>t.lift(new fs(void 0,void 0)),Object(Ut.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function Dw(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function Pw(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(function(t,e){t.INTERNAL.registerComponent(new xw.a("firestore",function(t){return function(t,e){return new cw(t,new Kb(t,e),new uw)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Aw)))})(Sw=gs.a),Sw.registerVersion("@firebase/firestore","2.3.0");class Mw{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=Rw(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(Ut.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe($t(void 0),cs(),Zt(([t,e])=>e.length>0||!t),Object(Ut.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Qt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Pw(t);return jw(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Nw(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Ut.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(mt.a)(this.query.get(t)).pipe(Object(Go.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new Lw(this.ref.doc(t),this.afs)}}class Lw{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=Hw(n,e);return new Mw(r,i,this.afs)}snapshotChanges(){return kw(this.ref,this.afs.schedulers.outsideAngular).pipe($t(void 0),cs(),Object(Ut.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(Ut.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(mt.a)(this.ref.get(t)).pipe(Object(Go.b)(this.afs.schedulers.insideAngular))}}class Vw{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Rw(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Ut.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Zt(t=>t.length>0),this.afs.keepUnstableUntilFirst):Rw(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Qt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Pw(t);return jw(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Nw(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Ut.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(mt.a)(this.query.get(t)).pipe(Object(Go.b)(this.afs.schedulers.insideAngular))}}const Uw=new r.r("angularfire2.enableFirestorePersistence"),Fw=new r.r("angularfire2.firestore.persistenceSettings"),qw=new r.r("angularfire2.firestore.settings"),Bw=new r.r("angularfire2.firestore.use-emulator");function Hw(t,e=(t=>t)){return{query:e(t),ref:t}}let zw=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new Jo.d(o),this.keepUnstableUntilFirst=Object(Jo.h)(this.schedulers);const c=Object(Jo.g)(t,o,e);!ps.a.auth&&u&&Object(Jo.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(Jo.f)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!L(i)){const e=()=>{try{return Object(mt.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(Sw){return"undefined"!=typeof console&&console.warn(Sw),Object(yt.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(yt.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=Hw(n,e),o=this.schedulers.ngZone.run(()=>r);return new Mw(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new Vw(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new Lw(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Jo.c),r.Rb(Jo.b,8),r.Rb(Uw,8),r.Rb(qw,8),r.Rb(r.C),r.Rb(r.A),r.Rb(Fw,8),r.Rb(Bw,8),r.Rb(ts,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Rb)(Jo.c),Object(r.Rb)(Jo.b,8),Object(r.Rb)(Uw,8),Object(r.Rb)(qw,8),Object(r.Rb)(r.C),Object(r.Rb)(r.A),Object(r.Rb)(Fw,8),Object(r.Rb)(Bw,8),Object(r.Rb)(ts,8))},token:t,providedIn:"any"}),t})(),Gw=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:Uw,useValue:!0},{provide:Fw,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[zw]}),t})(),Kw=(()=>{class t{constructor(t,e,n){this.auth=t,this.db=e,this.router=n,this.logged=new wt(!1),this.logged$=this.logged.asObservable()}signIn(t){return Object(Bo.b)(this,void 0,void 0,function*(){return new Promise((e,n)=>{this.auth.signInWithEmailAndPassword(t.username,t.password).then(t=>{var r;this.db.collection("users").doc(null===(r=t.user)||void 0===r?void 0:r.uid).valueChanges().subscribe(t=>{if(t.claims.isActiveUser){const n=t.claims;localStorage.setItem("userCredentials",JSON.stringify(n)),this.logged.next(!0),e(n)}else n("El usuario debe ser activado antes de ingresar al sistema por primera vez, para activarlo revise su correo electr\xf3nico o contactes\xe9 con un administrador.")})}).catch(t=>n(t.message))})})}signOut(){return Object(Bo.b)(this,void 0,void 0,function*(){localStorage.removeItem("userCredentials"),this.logged.next(!1),this.router.navigate(["/home"])})}isLogged(){return null!==localStorage.getItem("userCredentials")}getCurrentUser(){const t=localStorage.getItem("userCredentials"),e=t?JSON.parse(t):t;return null==e?void 0:e.email}handleError(t){let e="";return e=t.error instanceof ErrorEvent?`An error ocurred: ${t.error.message}`:`Server returned code: ${t.status}, error message is: ${t.message}`,Object(Ho.a)(e)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(ss),r.Rb(zw),r.Rb(Qr))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Ww=(()=>{class t{constructor(){this.emitChangeSource=new bt.a,this.changeEmitted$=this.emitChangeSource.asObservable()}emitChange(t){this.emitChangeSource.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),$w=(()=>{class t{constructor(){this.emitChangeSource=new bt.a,this.changeEmitted$=this.emitChangeSource.asObservable()}emitChange(t){this.emitChangeSource.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Qw(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",16),r.Nb(1,"button",17),r.Ub("click",function(){return r.bc(t),r.Wb().auto("admin")}),r.fc(2,"Admin"),r.Mb(),r.Nb(3,"button",18),r.Ub("click",function(){return r.bc(t),r.Wb().auto("paciente")}),r.fc(4,"Paciente"),r.Mb(),r.Nb(5,"button",19),r.Ub("click",function(){return r.bc(t),r.Wb().auto("especialista")}),r.fc(6,"Especialista"),r.Mb(),r.Mb()}}let Xw=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.auth=e,this.login=n,this.fb=r,this._loading=i,this.autoCompletarDatos=!1}ngOnInit(){this.form=this.initForm()}initForm(){return this.fb.group({username:["",[ki.required]],password:["",[ki.required]]})}switch(){this.autoCompletarDatos=!this.autoCompletarDatos}signin(){this._loading.emitChange(!0),localStorage.removeItem("user");const t={username:this.form.get("username").value,password:this.form.get("password").value};this.auth.signIn(t).then(t=>{this.router.navigate(["home"])},t=>{alert(t),this.form.reset()}).finally(()=>{this._loading.emitChange(!1)})}auto(t){var e,n,r,i,o,s;switch(t){case"admin":null===(e=this.form.get("username"))||void 0===e||e.patchValue("admin@user.com"),null===(n=this.form.get("password"))||void 0===n||n.patchValue("123456Q!");break;case"especialista":null===(r=this.form.get("username"))||void 0===r||r.patchValue("especialista@user.com"),null===(i=this.form.get("password"))||void 0===i||i.patchValue("123456Q!");break;case"paciente":null===(o=this.form.get("username"))||void 0===o||o.patchValue("paciente@user.com"),null===(s=this.form.get("password"))||void 0===s||s.patchValue("123456Q!")}}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Qr),r.Kb(Kw),r.Kb(Ww),r.Kb(qo),r.Kb($w))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-signin-form"]],decls:24,vars:2,consts:[["id","frm_signin","action","",3,"formGroup"],["src","./../../../../assets/logo2.png","alt","",2,"height","100px","justify-self","center","margin-bottom","20px"],[1,"card-title",2,"margin-bottom","15px"],[1,"input-group","mb-3"],["id","basic-addon1",1,"input-group-text"],[1,"fas","fa-user"],["type","text","placeholder","Usuario","aria-label","Username","formControlName","username",1,"form-control"],[1,"fas","fa-key"],["type","password","placeholder","Clave","aria-label","Password","formControlName","password",1,"form-control"],[1,"custom-control","custom-switch",2,"display","flex","align-items","center","margin-bottom","20px"],["type","checkbox",1,"custom-control-input",2,"margin-right","5px",3,"change"],["for","customSwitch1",1,"custom-control-label"],["class","row","style","margin: -10px 0 20px 0;",4,"ngIf"],[1,"row"],["type","submit","value","Ingresar",1,"btn","btn-danger","col-sm-5",2,"margin","0 5px 20px 5px",3,"click"],["routerLink","/signup"],[1,"row",2,"margin","-10px 0 20px 0"],["type","button",1,"btn","btn-outline-secondary","btn-sm","col-sm-3",2,"margin","auto","font-size","9px",3,"click"],["type","button",1,"btn","btn-outline-success","btn-sm","col-sm-3",2,"margin","auto","font-size","9px",3,"click"],["type","button",1,"btn","btn-outline-info","btn-sm","col-sm-3",2,"margin","auto","font-size","9px",3,"click"]],template:function(t,e){1&t&&(r.Nb(0,"form",0),r.Lb(1,"img",1),r.Nb(2,"h5",2),r.fc(3,"Acceda a su cuenta"),r.Mb(),r.Nb(4,"div",3),r.Nb(5,"span",4),r.Lb(6,"i",5),r.Mb(),r.Lb(7,"input",6),r.Mb(),r.Nb(8,"div",3),r.Nb(9,"span",4),r.Lb(10,"i",7),r.Mb(),r.Lb(11,"input",8),r.Mb(),r.Nb(12,"div",9),r.Nb(13,"input",10),r.Ub("change",function(){return e.switch()}),r.Mb(),r.Nb(14,"label",11),r.fc(15,"Auto completar datos"),r.Mb(),r.Mb(),r.ec(16,Qw,7,0,"div",12),r.Nb(17,"div",13),r.Nb(18,"input",14),r.Ub("click",function(){return e.signin()}),r.Mb(),r.Mb(),r.Nb(19,"p"),r.fc(20,"\xbfNo est\xe1s registrado? "),r.Nb(21,"a",15),r.fc(22,"Ingresa aqu\xed"),r.Mb(),r.fc(23,"."),r.Mb(),r.Mb()),2&t&&(r.Xb("formGroup",e.form),r.Ab(16),r.Xb("ngIf",e.autoCompletarDatos))},directives:[To,Xi,ko,Ei,Qi,Lo,j,Yr],styles:["","[_nghost-%COMP%] {\n        \n        margin: auto;\n        padding: 2px;\n        width: 100%;\n        height: 100%;\n    }\n\n    #frm_signin[_ngcontent-%COMP%] {\n        \n        width: 100%;\n        height: 100%;\n        padding: 50px;\n    }"]}),t})(),Yw=(()=>{class t{constructor(){this.prompt={show:!1},this.message=""}ngOnInit(){}onPrompt(t){this.prompt.show=!0,this.prompt.message=t,this.prompt.buttons=["Ok"]}onResponse(t){this.prompt=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-signin"]],inputs:{prompt:"prompt"},decls:1,vars:0,template:function(t,e){1&t&&r.Lb(0,"app-signin-form")},directives:[Xw],styles:["","[_nghost-%COMP%] {\n        height: 100%;\n        display: grid;\n        grid-template-columns: auto 350px auto;\n        grid-template-rows: 75px 650px auto;\n        background-color:rgb(255,255,255);\n    }\n\n    @media only screen and (max-width: 1080px) {\n        [_nghost-%COMP%] {\n        }\n    }\n\n    .route-container[_ngcontent-%COMP%] {\n        display: flex;\n        height: 100%;\n        justify-content: center;\n    }\n\n    app-signin-form[_ngcontent-%COMP%] {\n        grid-column: 2;\n        grid-row: 2;\n    }"]}),t})();function Zw(t,e=us.a){return n=>n.lift(new Jw(t,e))}class Jw{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new t_(t,this.dueTime,this.scheduler))}}class t_ extends Ct.a{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(e_,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function e_(t){t.debouncedNext()}function n_(t,e){return{type:7,name:t,definitions:e,options:{}}}function r_(t,e=null){return{type:4,styles:e,timings:t}}function i_(t){return{type:6,styles:t,offset:null}}function o_(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function s_(t,e,n=null){return{type:11,selector:t,animation:e,options:n}}n_("slideInAnimation",[o_("* <=> *",[s_(":enter, :leave",i_({position:"fixed",width:"100%",zIndex:2}),{optional:!0}),function(t,e=null){return{type:3,steps:t,options:e}}([s_(":enter",[i_({transform:"translateX(100%)"}),r_("0.5s ease-out",i_({transform:"translateX(0%)"}))],{optional:!0}),s_(":leave",[i_({transform:"translateX(0%)"}),r_("0.5s ease-out",i_({transform:"translateX(-100%)"}))],{optional:!0})])])]),n_("openClose",[o_(":enter",[i_({transform:"translateX(-100%)",backgroundColor:"rgba(30,30,30,0)"}),r_("0.2s 100ms ease-out",i_({transform:"translateX(0%)"})),r_("0.3s 100ms ease-in",i_({backgroundColor:"rgba(30,30,30,0.5)"}))]),o_(":leave",[r_("0.3s 100ms ease-in",i_({backgroundColor:"rgba(30,30,30,0)"})),r_("0.2s 100ms ease-in",i_({transform:"translateX(-100%)",backgroundColor:"rgba(30,30,30,0)"}))])]);const a_=n_("prompt",[o_(":enter",[i_({position:"fixed",top:"0",right:"0",bottom:"0",left:"-100%",height:"100%",width:"100%",overflow:"hidden",backgroundColor:"rgba(30,30,30,0)"}),r_("0.2s 100ms ease-out",i_({position:"fixed",top:"0",right:"0",bottom:"0",left:"0",height:"100%",width:"100%",overflow:"hidden"})),r_("0.5s 100ms ease-out",i_({backgroundColor:"rgba(30,30,30,0.5)"}))]),o_(":leave",[r_("0.5s 100ms ease-out",i_({backgroundColor:"rgba(30,30,30,0)"})),r_("0.2s 100ms ease-out",i_({position:"fixed",top:"0",right:"0",bottom:"0",left:"-100%",height:"100%",width:"100%",overflow:"hidden"}))])]);let u_=(()=>{class t{constructor(){this.errors={required:{message:"Campo requerido.",class:"INVALID"},minRange:{message:"Este campo debe tener por lo menos 3 caracteres.",class:"INVALID"},maxRange:{message:"Este campo debe tener un maximo de 15 caracteres.",class:"INVALID"},whiteSpaces:{message:"Este campo no debe contener espacios.",class:"INVALID"},notNumeric:{message:"Este campo no puede contener caracteres num\xe9ricos.",class:"INVALID"},pattern:{message:"Minimo 8 caracteres y debe ser alfanum\xe9rica.",class:"INVALID"},age:{message:"Formato incorrecto.",class:"INVALID"},dni:{message:"Formato DNI incorrecto.",class:"INVALID"},min:{message:"Debajo del m\xednimo permitido.",class:"INVALID"},max:{message:"Supero el m\xe1ximo permitido.",class:"INVALID"},confirm:{message:"Las claves ingresadas no coinciden.",class:"INVALID"},email:{message:"Este campo debe ser un email v\xe1lido.",class:"INVALID"},succeeded:{message:"",class:"VALID"},extension:{message:"Formato de archivo incorrecto.",class:"INVALID"}}}getState(t){return this.errors[t]}setState(t,e,n){let r=e.replace(/^.+[.]/,"");t[r].message=n.message,t[r].class=n.class}clearState(t,e){let n=e.replace(/^.+[.]/,"");t[n].message="",t[n].class=""}validateNames(t){var e,n,r;return(null===(e=t.value)||void 0===e?void 0:e.length)<3?{minRange:!0}:(null===(n=t.value)||void 0===n?void 0:n.length)>15?{maxRange:!0}:(null===(r=t.value)||void 0===r?void 0:r.includes(" "))?{whiteSpaces:!0}:/\d/.test(t.value)?{notNumeric:!0}:null}validateObraSocial(t){var e,n;return(null===(e=t.value)||void 0===e?void 0:e.length)<4?{minRange:!0}:(null===(n=t.value)||void 0===n?void 0:n.length)>8?{maxRange:!0}:/\d/.test(t.value)?{notNumeric:!0}:null}validateFileExtension(t){return/\.(jpe?g|png)$/i.test(t.value)?null:{extension:!0}}validateDNI(t){return!/^\d+$/.test(t.value)||t.value.length<7||t.value.length>9?{dni:!0}:null}validateAge(t){return/^\d+$/.test(t.value)?null:{age:!0}}passwordCheck(t){const e=t.get("password"),n=t.get("confirm");if(e&&n){if((n.dirty||n.touched)&&""===n.value)return{required:!0};if(e.dirty&&""===n.value)return{required:!0};if(e.dirty&&n.dirty&&n.value!==e.value)return{confirm:!0}}return null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var c_="firebasestorage.googleapis.com",l_=function(t){function e(n,r){var i=t.call(this,h_(n),"Firebase Storage: "+r+" ("+h_(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return Object(Bo.c)(e,t),e.prototype._codeEquals=function(t){return h_(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?this._baseMessage+"\n"+this.customData.serverResponse:this._baseMessage},enumerable:!1,configurable:!0}),e}(ms.c);function h_(t){return"storage/"+t}function f_(){return new l_("unknown","An unknown error occurred, please check the error payload for server response.")}function d_(){return new l_("canceled","User canceled the upload/download.")}function p_(){return new l_("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function g_(t){return new l_("invalid-argument",t)}function m_(){return new l_("app-deleted","The Firebase app was deleted.")}function y_(t){return new l_("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function b_(t,e){return new l_("invalid-format","String does not match format '"+t+"': "+e)}function v_(t){throw new l_("internal-error","Internal error: "+t)}var w_={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},__=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function O_(t,e){switch(t){case w_.RAW:return new __(C_(e));case w_.BASE64:case w_.BASE64URL:return new __(E_(t,e));case w_.DATA_URL:return new __((n=new S_(e)).base64?E_(w_.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(Sw){throw b_(w_.DATA_URL,"Malformed data URL.")}return C_(e)}(n.rest),new S_(e).contentType)}var n;throw f_()}function C_(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function E_(t,e){switch(t){case w_.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw b_(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case w_.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw b_(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(Sw){throw b_(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var S_=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw b_(w_.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),T_={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function I_(t){switch(t){case"running":case"pausing":case"canceling":return T_.RUNNING;case"paused":return T_.PAUSED;case"success":return T_.SUCCESS;case"canceled":return T_.CANCELED;case"error":default:return T_.ERROR}}var x_=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),A_=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=x_.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=x_.ABORT,e(t)}),t.xhr_.addEventListener("error",function(){t.errorCode_=x_.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(){e(t)})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw v_("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw v_("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw v_("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Sw){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw v_("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),k_=function(){function t(){}return t.prototype.createXhrIo=function(){return new A_},t}(),N_=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(Sw){return new t(e,"")}if(""===r.path)return r;throw new l_("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)",o=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}for(var a=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://"+(n===c_?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:s}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(e);if(h){var f=h[l.indices.path];f||(f=""),r=new t(h[l.indices.bucket],f),l.postModify(r);break}}if(null==r)throw function(t){return new l_("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),R_=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function j_(t){return"string"==typeof t||t instanceof String}function D_(t){return P_()&&t instanceof Blob}function P_(){return"undefined"!=typeof Blob}function M_(t,e,n,r){if(r<e)throw g_("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw g_("Invalid value for '"+t+"'. Expected "+n+" or less.")}function L_(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function V_(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}var U_=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(Sw){o(Sw)}else null!==s?((r=f_()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?m_():d_():new l_("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new F_(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout(function(){o=null,function(e,n){if(n)e(!1,new F_(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===x_.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new F_(s,n))}else{var a=n.getErrorCode()===x_.ABORT;e(!1,new F_(!1,null,a))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(f,u())},e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Object(Bo.f)([null,t],e));else{var r;u()||s?l.call.apply(l,Object(Bo.f)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var d=!1;function p(t){d||(d=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout(function(){s=!0,p(!0)},r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),F_=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function q_(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function B_(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=q_();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(P_())return new Blob(t);throw new l_("unsupported-environment","This browser doesn't seem to support creating Blobs")}var H_=function(){function t(t,e){var n=0,r="";D_(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(D_(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(P_()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(B_.apply(null,r))}var i=e.map(function(t){return j_(t)?O_(w_.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();function z_(t){var e,n;try{e=JSON.parse(t)}catch(Sw){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function G_(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function K_(t,e){return e}var W_=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||K_}}(),$_=null;function Q_(){if($_)return $_;var t=[];t.push(new W_("bucket")),t.push(new W_("generation")),t.push(new W_("metageneration")),t.push(new W_("name","fullPath",!0));var e=new W_("name");e.xform=function(t,e){return function(t){return!j_(t)||t.length<2?t:G_(t)}(e)},t.push(e);var n=new W_("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new W_("timeCreated")),t.push(new W_("updated")),t.push(new W_("md5Hash",null,!0)),t.push(new W_("cacheControl",null,!0)),t.push(new W_("contentDisposition",null,!0)),t.push(new W_("contentEncoding",null,!0)),t.push(new W_("contentLanguage",null,!0)),t.push(new W_("contentType",null,!0)),t.push(new W_("metadata","customMetadata",!0)),$_=t}function X_(t,e,n){var r=z_(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new N_(t.bucket,t.fullPath);return e._makeStorageReference(n)}})}(r,t),r}(t,r,n)}function Y_(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var Z_=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function J_(t){if(!t)throw f_()}function tO(t,e){return function(n,r){var i=X_(t,r,e);return J_(null!==i),i}}function eO(t){return function(e,n){var r;return(r=401===e.getStatus()?e.getResponseText().includes("Firebase App Check token is invalid")?new l_("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new l_("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new l_("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new l_("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function nO(t){var e=eO(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new l_("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function rO(t,e,n){var r=L_(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new Z_(r,"GET",tO(t,n),i);return o.errorHandler=nO(e),o}function iO(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var oO=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function sO(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(Sw){J_(!1)}return J_(!!n&&-1!==(e||["active"]).indexOf(n)),n}var aO=262144,uO=function(){return function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}();function cO(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var lO=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=Q_(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}})},t.prototype._createResumable=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=iO(e,r,i),a={name:s.fullPath},u=L_(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=Y_(s,n),h=new Z_(u,"POST",function(t){var e;sO(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(Sw){J_(!1)}return J_(j_(e)),e},t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=eO(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(n,r){var i=function(t,e,n,r){var i=new Z_(n,"POST",function(t){var e=sO(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Sw){J_(!1)}n||J_(!1);var i=Number(n);return J_(!isNaN(i)),new oO(i,r.size(),"final"===e)},t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=eO(e),i}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then(function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},t.prototype._continueUpload=function(){var t=this,e=aO*this._chunkMultiplier,n=new oO(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i,o){var s;try{s=function(t,e,n,r,i,o,s,a){var u=new oO(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new l_("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(h,h+l);if(null===d)throw p_();var p=new Z_(n,"POST",function(t,n){var i,s=sO(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?tO(e,o)(t,n):null,new oO(a,c,"final"===s,i)},e.maxUploadRetryTime);return p.headers=f,p.body=d.uploadData(),p.progressCallback=a||null,p.errorHandler=eO(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(Sw){return t._error=Sw,void t._transition("error")}var a=t._ref.storage._makeRequest(s,i,o);t._request=a,a.getPromise().then(function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()},t._errorHandler)})},t.prototype._increaseMultiplier=function(){aO*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e,n){var r=rO(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._transition("success")},t._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=iO(e,r,i),c=Y_(u,n),l=H_.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw p_();var h={name:u.fullPath},f=L_(o,t.host),d=t.maxUploadRetryTime,p=new Z_(f,"POST",tO(t,n),d);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=eO(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")},t._errorHandler)})},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=d_(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=I_(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new uO(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(e){t._notifyObserver(e)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(I_(this._state)){case T_.SUCCESS:cO(this._resolve.bind(null,this.snapshot))();break;case T_.CANCELED:case T_.ERROR:cO(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(I_(this._state)){case T_.RUNNING:case T_.PAUSED:t.next&&cO(t.next.bind(t,this.snapshot))();break;case T_.SUCCESS:t.complete&&cO(t.complete.bind(t))();break;case T_.CANCELED:case T_.ERROR:t.error&&cO(t.error.bind(t,this._error))();break;default:t.error&&cO(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),hO=function(){function t(t,e){this._service=t,this._location=e instanceof N_?e:N_.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new N_(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return G_(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new N_(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw y_(t)},t}();function fO(t){var e={prefixes:[],items:[]};return dO(t,e).then(function(){return e})}function dO(t,e,n){return Object(Bo.b)(this,void 0,void 0,function(){var r,i,o;return Object(Bo.d)(this,function(s){switch(s.label){case 0:return[4,pO(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,dO(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function pO(t,e){return Object(Bo.b)(this,void 0,void 0,function(){var n,r;return Object(Bo.d)(this,function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&M_("options.maxResults",1,1e3,e.maxResults),r=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=L_(e.bucketOnlyServerUrl(),t.host),a=t.maxOperationRetryTime,u=new Z_(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=z_(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new N_(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t._makeStorageReference(new N_(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return J_(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=eO(e),u}(t.storage,t._location,"/",(n=e||{}).pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}})})}function gO(t,e){var n=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new N_(t._location.bucket,n);return new hO(t.storage,r)}function mO(t){return/^[A-Za-z]+:\/\//.test(t)}function yO(t,e){if(t instanceof wO){var n=t;if(null==n._bucket)throw new l_("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new hO(n,n._bucket);return null!=e?yO(r,e):r}if(void 0!==e){if(e.includes(".."))throw g_('`path` param cannot contain ".."');return gO(t,e)}return t}function bO(t,e){if(e&&mO(e)){if(t instanceof wO)return new hO(t,e);throw g_("To use ref(service, url), the first argument must be a Storage instance.")}return yO(t,e)}function vO(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:N_.makeFromBucketSpec(n,t)}var wO=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=c_,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?N_.makeFromBucketSpec(i,this._host):vO(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,this._bucket=null!=this._url?N_.makeFromBucketSpec(this._url,t):vO(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){M_("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){M_("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return Object(Bo.b)(this,void 0,void 0,function(){var t,e;return Object(Bo.d)(this,function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}})})},t.prototype._getAppCheckToken=function(){return Object(Bo.b)(this,void 0,void 0,function(){var t;return Object(Bo.d)(this,function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new hO(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new R_(m_());var i=function(t,e,n,r,i,o){var s=V_(t.urlParams),a=t.url+s,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new U_(a,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then(function(){return r._requests.delete(i)},function(){return r._requests.delete(i)}),i},t.prototype.makeRequestWithTokens=function(t){return Object(Bo.b)(this,void 0,void 0,function(){var e;return Object(Bo.d)(this,function(n){switch(n.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=n.sent(),[2,this._makeRequest(t,e[0],e[1])]}})})},t}();function _O(t,e){return bO(t=Object(ms.i)(t),e)}var OO,CO,EO=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),SO=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new EO(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then(function(e){if(t)return t(new EO(e,n,n._ref))},e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new EO(t,i,i._ref))}:{next:e.next?function(t){return e.next(new EO(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),TO=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new IO(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new IO(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),IO=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return gO(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new SO(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new lO(t,new H_(e),n)}(t=Object(ms.i)(t),e,n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=w_.RAW),this._throwIfRoot("putString");var r=O_(e,t),i=Object(Bo.a)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new SO(new lO(this._delegate,new H_(r.data,!0),i),this)},t.prototype.listAll=function(){var t,e=this;return(t=this._delegate,fO(t=Object(ms.i)(t))).then(function(t){return new TO(t,e.storage)})},t.prototype.list=function(t){var e=this;return function(t,e){return pO(t=Object(ms.i)(t),e)}(this._delegate,t||void 0).then(function(t){return new TO(t,e.storage)})},t.prototype.getMetadata=function(){return t=this._delegate,function(t){return Object(Bo.b)(this,void 0,void 0,function(){var e;return Object(Bo.d)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=rO(t.storage,t._location,Q_()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=Object(ms.i)(t));var t},t.prototype.updateMetadata=function(t){return function(t,e){return function(t,e){return Object(Bo.b)(this,void 0,void 0,function(){var n;return Object(Bo.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=L_(e.fullServerUrl(),t.host),o=Y_(n,r),s=t.maxOperationRetryTime,a=new Z_(i,"PATCH",tO(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=nO(e),a}(t.storage,t._location,e,Q_()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}})})}(t=Object(ms.i)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return t=this._delegate,function(t){return Object(Bo.b)(this,void 0,void 0,function(){var e;return Object(Bo.d)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=L_(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new Z_(r,"GET",function(t,e){return function(n,r){var i=X_(t,r,e);return J_(null!==i),function(t,e,n){var r=z_(e);if(null===r)return null;if(!j_(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map(function(e){var r=t.fullPath;return L_("/b/"+o(t.bucket)+"/o/"+o(r),n)+V_({alt:"media",token:e})})[0]}(i,r,t.host)}}(t,n),i);return o.errorHandler=nO(e),o}(t.storage,t._location,Q_()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then(function(t){if(null===t)throw new l_("no-download-url","The given file does not have any download URLs.");return t})]}})})}(t=Object(ms.i)(t));var t},t.prototype.delete=function(){return this._throwIfRoot("delete"),t=this._delegate,function(t){return Object(Bo.b)(this,void 0,void 0,function(){var e;return Object(Bo.d)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=L_(e.fullServerUrl(),t.host),r=new Z_(n,"DELETE",function(t,e){},t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=nO(e),r}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=Object(ms.i)(t));var t},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw y_(t)},t}(),xO=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(mO(t))throw g_("ref() expected a child path but got a URL, use refFromURL instead.");return new IO(_O(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!mO(t))throw g_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{N_.makeFromUrl(t,this._delegate.host)}catch(Sw){throw g_("refFromUrl() expected a valid full URL but got an invalid one.")}return new IO(_O(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();function AO(t){const e=function(t){return new It.a(e=>{const n=t=>e.next(t);n(t.snapshot);const r=t.on("state_changed",n);return t.then(t=>{n(t),e.complete()},r=>{n(t.snapshot),(t=>{e.error(t)})(r)}),function(){r()}}).pipe(Zw(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Object(Ut.a)(t=>t.bytesTransferred/t.totalBytes*100))}}function kO(t,e,n){return{getDownloadURL:()=>Object(yt.a)(void 0).pipe(Object(Go.b)(e.outsideAngular),qt(()=>t.getDownloadURL()),n),getMetadata:()=>Object(yt.a)(void 0).pipe(Object(Go.b)(e.outsideAngular),qt(()=>t.getMetadata()),n),delete:()=>Object(mt.a)(t.delete()),child:r=>kO(t.child(r),e,n),updateMetadata:e=>Object(mt.a)(t.updateMetadata(e)),put:(e,n)=>AO(t.put(e,n)),putString:(e,n,r)=>AO(t.putString(e,n,r)),listAll:()=>Object(mt.a)(t.listAll())}}CO={TaskState:T_,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:w_,Storage:wO,Reference:IO},(OO=gs.a).INTERNAL.registerComponent(new xw.a("storage",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new xO(r,new wO(r,i,o,new k_,n,gs.a.SDK_VERSION))},"PUBLIC").setServiceProps(CO).setMultipleInstances(!0)),OO.registerVersion("@firebase/storage","0.5.2");const NO=new r.r("angularfire2.storageBucket"),RO=new r.r("angularfire2.storage.maxUploadRetryTime"),jO=new r.r("angularfire2.storage.maxOperationRetryTime");let DO=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new Jo.d(i),this.keepUnstableUntilFirst=Object(Jo.h)(this.schedulers);const a=Object(Jo.g)(t,i,e);this.storage=Object(Jo.f)(`${a.name}.storage.${n}`,"AngularFireStorage",a,()=>{const t=i.runOutsideAngular(()=>a.storage(n||void 0));return o&&t.setMaxUploadRetryTime(o),s&&t.setMaxOperationRetryTime(s),t},[o,s])}ref(t){return kO(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst)}refFromURL(t){return kO(this.storage.refFromURL(t),this.schedulers,this.keepUnstableUntilFirst)}upload(t,e,n){return kO(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst).put(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Jo.c),r.Rb(Jo.b,8),r.Rb(NO,8),r.Rb(r.C),r.Rb(r.A),r.Rb(RO,8),r.Rb(jO,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Rb)(Jo.c),Object(r.Rb)(Jo.b,8),Object(r.Rb)(NO,8),Object(r.Rb)(r.C),Object(r.Rb)(r.A),Object(r.Rb)(RO,8),Object(r.Rb)(jO,8))},token:t,providedIn:"any"}),t})(),PO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({}),t})(),MO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[DO],imports:[PO]}),t})(),LO=(()=>{class t{constructor(t){this.storage=t}uploadFiles(t){return Object(Bo.b)(this,void 0,void 0,function*(){return new Promise((e,n)=>{t.length>0&&t[0]&&this.uploadFile(t[0]).then(n=>{t[1]?this.uploadFile(t[1]).then(t=>{e([n,t])}):e([n])})})})}uploadFile(t){return Object(Bo.b)(this,void 0,void 0,function*(){return new Promise((e,n)=>{const r=this.storage.ref(t.filename).put(t.stream,{contentType:t.contentType});r.task.on("state_changed",t=>{console.log("Upload is "+t.bytesTransferred/t.totalBytes*100+"% done")},function(t){console.log("error",t),n()},function(){r.task.snapshot.ref.getDownloadURL().then(t=>{e(t)})})})})}deleteFileByUrl(t){return Object(Bo.b)(this,void 0,void 0,function*(){try{this.storage.storage.refFromURL(t).delete()}catch(Sw){alert(Sw)}})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(DO))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),VO=(()=>{class t{constructor(t,e,n,r,i){this.auth=t,this.db=e,this.blob=n,this.router=r,this.logged=i}registerPatient(t,e){return new Promise((n,r)=>{this.createUserWithEmailAndPassword(t.credentials).then(r=>{t.profile.claims.uid=r.user.uid;const i=this.setFileName(t.profile.claims.uid,e);this.uploadProfilePictures(i).then(e=>{t.profile.claims.photoUrls=e,this.uploadProfile(t.profile),n(r.user.uid)})})})}createUserWithEmailAndPassword(t){return this.auth.createUserWithEmailAndPassword(t.username,t.password)}setFileName(t,e){let n=0;return e.map(e=>{e.filename=`users/${t}_${Date.now()}_${n}.jpeg`,n++}),e}uploadProfilePictures(t){return this.blob.uploadFiles(t)}uploadProfile(t){return this.db.collection("users").doc(t.claims.uid).set(t).then(t=>{console.log(t)},t=>this.handleError(t))}handleError(t){let e="";return e=t.error instanceof ErrorEvent?`An error ocurred: ${t.error.message}`:`Server returned code: ${t.status}, error message is: ${t.message}`,Object(Ho.a)(e)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(ss),r.Rb(zw),r.Rb(LO),r.Rb(Qr),r.Rb(Ww))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class UO{}class FO{}class qO{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof qO?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new qO;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof qO?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class BO{encodeKey(t){return HO(t)}encodeValue(t){return HO(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function HO(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class zO{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new BO,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new zO({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function GO(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function KO(t){return"undefined"!=typeof Blob&&t instanceof Blob}function WO(t){return"undefined"!=typeof FormData&&t instanceof FormData}class $O{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new qO),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new zO,this.urlWithParams=e}serializeBody(){return null===this.body?null:GO(this.body)||KO(this.body)||WO(this.body)||"string"==typeof this.body?this.body:this.body instanceof zO?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||WO(this.body)?null:KO(this.body)?this.body.type||null:GO(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof zO?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new $O(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var QO=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class XO{constructor(t,e=200,n="OK"){this.headers=t.headers||new qO,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class YO extends XO{constructor(t={}){super(t),this.type=QO.ResponseHeader}clone(t={}){return new YO({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class ZO extends XO{constructor(t={}){super(t),this.type=QO.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new ZO({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class JO extends XO{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function tC(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let eC=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof $O)r=t;else{let i,o;i=n.headers instanceof qO?n.headers:new qO(n.headers),n.params&&(o=n.params instanceof zO?n.params:new zO({fromObject:n.params})),r=new $O(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Object(yt.a)(r).pipe(oe(t=>this.handler.handle(t)));if(t instanceof $O||"events"===n.observe)return i;const o=i.pipe(Zt(t=>t instanceof ZO));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(Object(Ut.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(Object(Ut.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(Object(Ut.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(Object(Ut.a)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new zO).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,tC(n,e))}post(t,e,n={}){return this.request("POST",t,tC(n,e))}put(t,e,n={}){return this.request("PUT",t,tC(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(UO))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class nC{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const rC=new r.r("HTTP_INTERCEPTORS");let iC=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const oC=/^\)\]\}',?\n/;class sC{}let aC=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),uC=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new It.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new qO(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new YO({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(oC,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new ZO({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new JO({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new JO({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:QO.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:QO.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:QO.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",s),n.removeEventListener("timeout",a),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(sC))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const cC=new r.r("XSRF_COOKIE_NAME"),lC=new r.r("XSRF_HEADER_NAME");class hC{}let fC=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=x(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s),r.Rb(r.C),r.Rb(cC))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),dC=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(hC),r.Rb(lC))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),pC=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(rC,[]);this.chain=t.reduceRight((t,e)=>new nC(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(FO),r.Rb(r.s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),gC=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:dC,useClass:iC}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:cC,useValue:e.cookieName}:[],e.headerName?{provide:lC,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[dC,{provide:rC,useExisting:dC,multi:!0},{provide:hC,useClass:fC},{provide:cC,useValue:"XSRF-TOKEN"},{provide:lC,useValue:"X-XSRF-TOKEN"}]}),t})(),mC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[eC,{provide:UO,useClass:pC},uC,{provide:FO,useExisting:uC},aC,{provide:sC,useExisting:aC}],imports:[[gC.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})(),yC=(()=>{class t{constructor(t){this.http=t,this.url="https://mguelpa-lab-iv-tp-clinica.herokuapp.com/mailer",this.countriesUrl="https://restcountries.eu/rest/v2"}getCountries(){return console.log("asdfsa"),this.http.get(this.countriesUrl).pipe(Object(be.a)(t=>console.log(t)),ee(this.handleError))}sendMessage(t){return this.http.post(this.url,t).pipe(Object(be.a)(t=>console.log(t)),ee(this.handleError))}sendMessage2(t){return this.http.post(this.url,t)}handleError(t){let e="";return e=t.error instanceof ErrorEvent?`An error ocurred: ${t.error.message}`:`Server returned code: ${t.status}, error message is: ${t.message}`,console.log(e),Object(Ho.a)(e)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(eC))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),bC=(()=>{class t{constructor(){this.value=new r.n}ngOnInit(){}onConfirm(t){var e;const n=null===(e=t.target)||void 0===e?void 0:e.value;this.value.emit("yes"===n)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-prompt"]],outputs:{value:"value"},decls:11,vars:0,consts:[["id","prompt-margin"],["id","prompt"],[1,"prompt-title"],[1,"prompt-text"],[2,"display","block","text-align","center"],["value","yes",3,"click"],["value","no",3,"click"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Nb(1,"div",1),r.Nb(2,"p",2),r.fc(3,"Warning!"),r.Mb(),r.Nb(4,"p",3),r.fc(5,"are you sure you want to delete this item?"),r.Mb(),r.Nb(6,"div",4),r.Nb(7,"button",5),r.Ub("click",function(t){return e.onConfirm(t)}),r.fc(8,"Yes"),r.Mb(),r.Nb(9,"button",6),r.Ub("click",function(t){return e.onConfirm(t)}),r.fc(10,"No"),r.Mb(),r.Mb(),r.Mb(),r.Mb())},styles:['@import url("https://fonts.googleapis.com/css2?family=Permanent+Marker&display=swap");[_nghost-%COMP%]{background-color:rgba(30,30,30,.5);position:fixed;top:0;right:0;bottom:0;left:0;height:100%;width:100%;overflow:hidden}#prompt-margin[_ngcontent-%COMP%]{background-color:#f5f5f5;width:350px;border-radius:10px;border:2px solid #000;display:flex;padding:2px;margin-left:auto;margin-right:auto;margin-top:300px}#prompt[_ngcontent-%COMP%]{background-color:#3e2d5f;flex:1;border-radius:8px;justify-content:center;align-items:center}.prompt-title[_ngcontent-%COMP%]{font-size:24px;color:#e5e510;text-shadow:-2px 0 #000,0 2px #000,2px 0 #000,0 -2px #000}.prompt-text[_ngcontent-%COMP%], .prompt-title[_ngcontent-%COMP%]{font-family:Permanent Marker,cursive;text-align:center}.prompt-text[_ngcontent-%COMP%]{color:#f5f5f5}button[_ngcontent-%COMP%]{margin:5px;width:50px}']}),t})();function vC(t,e){1&t&&r.Lb(0,"app-prompt",26),2&t&&r.Xb("@prompt",void 0)}const wC=function(t,e){return{"is-invalid":t,"is-valid":e}},_C=function(t,e){return{"invalid-feedback":t,"valid-feedback":e}};let OC=(()=>{class t{constructor(t,e,n,r,i,o){this.fb=t,this.pv=e,this.ps=n,this.ms=r,this._loading=i,this.router=o,this.prompt=!1,this.subscriptions=[],this.controlNames=["firstname","lastname","dni","age","obrasocial","photo01","photo02","username","passwordGroup","passwordGroup.password","passwordGroup.confirm"],this.pictures=[],this.states={firstname:{message:"",class:""},lastname:{message:"",class:""},dni:{message:"",class:""},age:{message:"",class:""},username:{message:"",class:""},password:{message:"",class:""},confirm:{message:"",class:""},obrasocial:{message:"",class:""},passwordGroup:{message:"",class:""},photo01:{message:"",class:""},photo02:{message:"",class:""}}}setMessage(t,e){if(this.pv.clearState(this.states,e),t.errors&&(t.touched||t.dirty)){let n=Object.keys(t.errors)[0];this.pv.setState(this.states,e,this.pv.getState(n))}t.errors||!t.touched&&!t.dirty||this.pv.setState(this.states,e,this.pv.getState("succeeded"))}ngOnInit(){this.form=this.initForm(),this.watchForm(...this.controlNames)}initForm(){return this.fb.group({uid:[""],firstname:["",[ki.required,this.pv.validateNames]],lastname:["",[ki.required,this.pv.validateNames]],age:["",[ki.required,ki.min(0),ki.max(105),this.pv.validateAge]],username:["",[ki.required,ki.email]],passwordGroup:new vo({password:new bo("",[ki.required,ki.pattern(/^(?=[^a-zA-Z]*[a-zA-Z])(?=\D*\d).{8,}$/)]),confirm:new bo("")},this.pv.passwordCheck),dni:["",[ki.required,this.pv.validateDNI]],obrasocial:["",[ki.required]],photo01:["",[ki.required,this.pv.validateFileExtension]],photo02:["",[ki.required,this.pv.validateFileExtension]]})}watchForm(...t){t.map(t=>{const e=this.form.get(t);if(null!==e){const n=e.valueChanges.pipe(Zw(1e3)).subscribe(()=>{this.setMessage(e,t)});this.subscriptions.push(n)}})}check(t){const e=this.form.get(t);if(e.errors&&(e.touched||e.dirty))return e.errors}submit(){if(this.controlNames.map(t=>{const e=this.form.get(t);e.markAllAsTouched(),this.setMessage(e,t)}),"VALID"===this.form.status){const t={credentials:{username:this.form.get("username").value,password:this.form.get("passwordGroup.password").value},profile:{claims:{uid:"",username:this.form.get("username").value,firstname:this.form.get("firstname").value,lastname:this.form.get("lastname").value,roles:["user","patient"],photoUrls:[],isActiveUser:!1},data:{firstname:this.form.get("firstname").value,lastname:this.form.get("lastname").value,age:this.form.get("age").value,dni:this.form.get("dni").value,obrasocial:this.form.get("obrasocial").value}}};this._loading.emitChange(!0),this.ps.registerPatient(t,this.pictures).then(t=>{const e={uid:t,email:this.form.get("username").value,subject:"Activacion de usuario - Clinica OMED"};this.ms.sendMessage(e).subscribe(()=>{})}).finally(()=>{this._loading.emitChange(!1),alert("registro exitoso, revise su email para activar su cuenta."),this.router.navigate(["signin"])})}}onFileSelection01(t){1===t.target.files.length&&this.pictures.push({filename:t.target.files[0].name,stream:t.target.files[0],contentType:"image/jpeg"})}onFileSelection02(t){1===t.target.files.length&&this.pictures.push({filename:t.target.files[0].name,stream:t.target.files[0],contentType:"image/jpeg"})}auto(){var t,e,n;null===(t=this.form.get("username"))||void 0===t||t.patchValue(`test_${Date.now()}@user.com`),null===(e=this.form.get("passwordGroup.password"))||void 0===e||e.patchValue("123456Q!"),null===(n=this.form.get("passwordGroup.confirm"))||void 0===n||n.patchValue("123456Q!"),this.form.get("firstname").patchValue("John"),this.form.get("lastname").patchValue("Doe"),this.form.get("dni").patchValue("12345678"),this.form.get("age").patchValue("31"),this.form.get("obrasocial").patchValue("OSDE 310"),this.form.get("photo01").patchValue(""),this.form.get("photo02").patchValue(""),this.form.markAllAsTouched()}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(qo),r.Kb(u_),r.Kb(VO),r.Kb(yC),r.Kb($w),r.Kb(Qr))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-patient-registration-form"]],decls:79,vars:92,consts:[["id","frm_patient","novalidate","",1,"needs-validation",3,"formGroup"],[1,"form-group","row"],[1,"col-md-12"],[1,"form-label"],[1,"input-group"],[1,"input-group-text"],[1,"fas","fa-envelope"],["type","text","placeholder","Email","formControlName","username",1,"form-control",3,"ngClass"],[3,"ngClass"],["formGroupName","passwordGroup",1,"form-group","row"],[1,"col-md-6"],[1,"fas","fa-key"],["type","password","placeholder","Clave","formControlName","password",1,"form-control",3,"ngClass"],["type","password","placeholder","Clave","formControlName","confirm",1,"form-control",3,"ngClass"],["type","text","formControlName","firstname",1,"form-control",3,"ngClass"],["type","text","formControlName","lastname",1,"form-control",3,"ngClass"],[1,"col-md-4"],["type","text","formControlName","dni",1,"form-control",3,"ngClass"],["type","text","formControlName","age",1,"form-control",3,"ngClass"],["type","text","formControlName","obrasocial",1,"form-control",3,"ngClass"],[1,"col-md-6",2,"display","flex","flex-direction","column"],["id","photo01","type","file","formControlName","photo01",1,"form-control",3,"ngClass","change"],["id","photo02","type","file","formControlName","photo02",1,"form-control",3,"ngClass","change"],["type","submit","value","Registrar",1,"btn","btn-primary",2,"margin-top","10px",3,"click"],[1,"btn","btn-primary",2,"margin","10px 0 0 10px",3,"click"],["style","z-index: 9000;",4,"ngIf"],[2,"z-index","9000"]],template:function(t,e){1&t&&(r.Nb(0,"form",0),r.Nb(1,"div",1),r.Nb(2,"div",2),r.Nb(3,"label",3),r.fc(4,"Email"),r.Mb(),r.Nb(5,"div",4),r.Nb(6,"span",5),r.Lb(7,"i",6),r.Mb(),r.Lb(8,"input",7),r.Nb(9,"div",8),r.fc(10),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Nb(11,"div",9),r.Nb(12,"div",10),r.Nb(13,"label",3),r.fc(14,"Clave"),r.Mb(),r.Nb(15,"div",4),r.Nb(16,"span",5),r.Lb(17,"i",11),r.Mb(),r.Lb(18,"input",12),r.Nb(19,"div",8),r.fc(20),r.Mb(),r.Mb(),r.Mb(),r.Nb(21,"div",10),r.Nb(22,"label",3),r.fc(23,"Confirmaci\xf3n de clave"),r.Mb(),r.Nb(24,"div",4),r.Nb(25,"span",5),r.Lb(26,"i",11),r.Mb(),r.Lb(27,"input",13),r.Nb(28,"div",8),r.fc(29),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Nb(30,"div",1),r.Nb(31,"div",10),r.Nb(32,"label",3),r.fc(33,"Nombre"),r.Mb(),r.Lb(34,"input",14),r.Nb(35,"div",8),r.fc(36),r.Mb(),r.Mb(),r.Nb(37,"div",10),r.Nb(38,"label",3),r.fc(39,"Apellido"),r.Mb(),r.Lb(40,"input",15),r.Nb(41,"div",8),r.fc(42),r.Mb(),r.Mb(),r.Mb(),r.Nb(43,"div",1),r.Nb(44,"div",16),r.Nb(45,"label",3),r.fc(46,"DNI"),r.Mb(),r.Lb(47,"input",17),r.Nb(48,"div",8),r.fc(49),r.Mb(),r.Mb(),r.Nb(50,"div",16),r.Nb(51,"label",3),r.fc(52,"Edad"),r.Mb(),r.Lb(53,"input",18),r.Nb(54,"div",8),r.fc(55),r.Mb(),r.Mb(),r.Nb(56,"div",16),r.Nb(57,"label",3),r.fc(58,"Obra Social"),r.Mb(),r.Lb(59,"input",19),r.Nb(60,"div",8),r.fc(61),r.Mb(),r.Mb(),r.Mb(),r.Nb(62,"div",1),r.Nb(63,"div",20),r.Nb(64,"label",3),r.fc(65,"Foto 01:"),r.Mb(),r.Nb(66,"input",21),r.Ub("change",function(t){return e.onFileSelection01(t)}),r.Mb(),r.Nb(67,"div",8),r.fc(68),r.Mb(),r.Mb(),r.Nb(69,"div",20),r.Nb(70,"label",3),r.fc(71,"Foto 02:"),r.Mb(),r.Nb(72,"input",22),r.Ub("change",function(t){return e.onFileSelection02(t)}),r.Mb(),r.Nb(73,"div",8),r.fc(74),r.Mb(),r.Mb(),r.Mb(),r.Nb(75,"input",23),r.Ub("click",function(){return e.submit()}),r.Mb(),r.Nb(76,"button",24),r.Ub("click",function(){return e.auto()}),r.fc(77,"Auto"),r.Mb(),r.Mb(),r.ec(78,vC,1,1,"app-prompt",25)),2&t&&(r.Xb("formGroup",e.form),r.Ab(8),r.Xb("ngClass",r.Yb(32,wC,"INVALID"===e.states.username.class,"VALID"===e.states.username.class)),r.Ab(1),r.Xb("ngClass",r.Yb(35,_C,"INVALID"===e.states.username.class,"VALID"===e.states.username.class)),r.Ab(1),r.gc(" ",e.states.username.message," "),r.Ab(8),r.Xb("ngClass",r.Yb(38,wC,"INVALID"===e.states.password.class,"VALID"===e.states.password.class)),r.Ab(1),r.Xb("ngClass",r.Yb(41,_C,"INVALID"===e.states.password.class,"VALID"===e.states.password.class)),r.Ab(1),r.gc(" ",e.states.password.message," "),r.Ab(7),r.Xb("ngClass",r.Yb(44,wC,"INVALID"===e.states.passwordGroup.class&&e.form.get("passwordGroup.confirm").dirty,"VALID"===e.states.passwordGroup.class&&e.form.get("passwordGroup.confirm").dirty)),r.Ab(1),r.Xb("ngClass",r.Yb(47,_C,"INVALID"===e.states.passwordGroup.class&&e.form.get("passwordGroup.confirm").dirty,"VALID"===e.states.passwordGroup.class&&e.form.get("passwordGroup.confirm").dirty)),r.Ab(1),r.gc(" ",e.form.get("passwordGroup.confirm").dirty?e.states.passwordGroup.message:""," "),r.Ab(5),r.Xb("ngClass",r.Yb(50,wC,"INVALID"===e.states.firstname.class,"VALID"===e.states.firstname.class)),r.Ab(1),r.Xb("ngClass",r.Yb(53,_C,"INVALID"===e.states.firstname.class,"VALID"===e.states.firstname.class)),r.Ab(1),r.gc(" ",e.states.firstname.message," "),r.Ab(4),r.Xb("ngClass",r.Yb(56,wC,"INVALID"===e.states.lastname.class,"VALID"===e.states.lastname.class)),r.Ab(1),r.Xb("ngClass",r.Yb(59,_C,"INVALID"===e.states.lastname.class,"VALID"===e.states.lastname.class)),r.Ab(1),r.gc(" ",e.states.lastname.message," "),r.Ab(5),r.Xb("ngClass",r.Yb(62,wC,"INVALID"===e.states.dni.class,"VALID"===e.states.dni.class)),r.Ab(1),r.Xb("ngClass",r.Yb(65,_C,"INVALID"===e.states.dni.class,"VALID"===e.states.dni.class)),r.Ab(1),r.gc(" ",e.states.dni.message," "),r.Ab(4),r.Xb("ngClass",r.Yb(68,wC,"INVALID"===e.states.age.class,"VALID"===e.states.age.class)),r.Ab(1),r.Xb("ngClass",r.Yb(71,_C,"INVALID"===e.states.age.class,"VALID"===e.states.age.class)),r.Ab(1),r.gc(" ",e.states.age.message," "),r.Ab(4),r.Xb("ngClass",r.Yb(74,wC,"INVALID"===e.states.obrasocial.class,"VALID"===e.states.obrasocial.class)),r.Ab(1),r.Xb("ngClass",r.Yb(77,_C,"INVALID"===e.states.obrasocial.class,"VALID"===e.states.obrasocial.class)),r.Ab(1),r.gc(" ",e.states.obrasocial.message," "),r.Ab(5),r.Xb("ngClass",r.Yb(80,wC,"INVALID"===e.states.photo01.class,"VALID"===e.states.photo01.class)),r.Ab(1),r.Xb("ngClass",r.Yb(83,_C,"INVALID"===e.states.photo01.class,"VALID"===e.states.photo01.class)),r.Ab(1),r.gc(" ",e.states.photo01.message," "),r.Ab(4),r.Xb("ngClass",r.Yb(86,wC,"INVALID"===e.states.photo02.class,"VALID"===e.states.photo02.class)),r.Ab(1),r.Xb("ngClass",r.Yb(89,_C,"INVALID"===e.states.photo02.class,"VALID"===e.states.photo02.class)),r.Ab(1),r.gc(" ",e.states.photo02.message," "),r.Ab(4),r.Xb("ngIf",e.prompt))},directives:[To,Xi,ko,Ei,Qi,Lo,A,Ro,j,bC],styles:["","#frm_patient[_ngcontent-%COMP%] {\n      border-left: 1px solid rgb(222, 226, 230);\n      border-right: 1px solid rgb(222, 226, 230);\n      border-bottom: 1px solid rgb(222, 226, 230);\n      border-bottom-left-radius: 5px;\n      border-bottom-right-radius: 5px;\n      padding: 15px;\n    }\n  \n    .row[_ngcontent-%COMP%] {\n      margin-bottom: 20px;\n    }"],data:{animation:[a_]}}),t})(),CC=(()=>{class t{constructor(t,e,n,r,i){this.auth=t,this.db=e,this.blob=n,this.router=r,this.logged=i}getSpecialities(){return this.db.collection("specialities").valueChanges().pipe(ee(this.handleError))}addSpeciality(t){return this.db.collection("specialities").doc(t.name).set(t)}registerSpecialist(t,e){return new Promise((n,r)=>{this.createUserWithEmailAndPassword(t.credentials).then(r=>{t.profile.claims.uid=r.user.uid;const i=this.setFileName(t.profile.claims.uid,e);this.uploadProfilePictures(i).then(e=>{t.profile.claims.photoUrls=e,this.uploadProfile(t.profile),n(r.user.uid)})})})}createUserWithEmailAndPassword(t){return this.auth.createUserWithEmailAndPassword(t.username,t.password)}setFileName(t,e){let n=0;return e.map(e=>{e.filename=`users/${t}_${Date.now()}_${n}.jpeg`,n++}),e}uploadProfilePictures(t){return this.blob.uploadFiles(t)}uploadProfile(t){return this.db.collection("users").doc(t.claims.uid).set(t).then(t=>{console.log(t)},t=>this.handleError(t))}handleError(t){let e="";return e=t.error instanceof ErrorEvent?`An error ocurred: ${t.error.message}`:`Server returned code: ${t.status}, error message is: ${t.message}`,Object(Ho.a)(e)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(ss),r.Rb(zw),r.Rb(LO),r.Rb(Qr),r.Rb(Ww))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var EC=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var n=-1;return t.some(function(t,r){return t[0]===e&&(n=r,!0)}),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),r=this.__entries__[n];return r&&r[1]},e.prototype.set=function(e,n){var r=t(this.__entries__,e);~r?this.__entries__[r][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,r=t(n,e);~r&&n.splice(r,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];t.call(e,i[1],i[0])}},e}()}(),SC="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,TC="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),IC="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(TC):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)},xC=["top","right","bottom","left","width","height","size","weight"],AC="undefined"!=typeof MutationObserver,kC=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,r=!1,i=0;function o(){n&&(n=!1,t()),r&&a()}function s(){IC(o)}function a(){var t=Date.now();if(n){if(t-i<2)return;r=!0}else n=!0,r=!1,setTimeout(s,20);i=t}return a}(this.refresh.bind(this))}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return t.forEach(function(t){return t.broadcastActive()}),t.length>0},t.prototype.connect_=function(){SC&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),AC?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){SC&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;xC.some(function(t){return!!~n.indexOf(t)})&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),NC=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},RC=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||TC},jC=LC(0,0,0,0);function DC(t){return parseFloat(t)||0}function PC(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(e,n){return e+DC(t["border-"+n+"-width"])},0)}var MC="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof RC(t).SVGGraphicsElement}:function(t){return t instanceof RC(t).SVGElement&&"function"==typeof t.getBBox};function LC(t,e,n,r){return{x:t,y:e,width:n,height:r}}var VC=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=LC(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t,e=(t=this.target,SC?MC(t)?function(t){var e=t.getBBox();return LC(0,0,e.width,e.height)}(t):function(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return jC;var r=RC(t).getComputedStyle(t),i=function(t){for(var e={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n];e[i]=DC(t["padding-"+i])}return e}(r),o=i.left+i.right,s=i.top+i.bottom,a=DC(r.width),u=DC(r.height);if("border-box"===r.boxSizing&&(Math.round(a+o)!==e&&(a-=PC(r,"left","right")+o),Math.round(u+s)!==n&&(u-=PC(r,"top","bottom")+s)),!function(t){return t===RC(t).document.documentElement}(t)){var c=Math.round(a+o)-e,l=Math.round(u+s)-n;1!==Math.abs(c)&&(a-=c),1!==Math.abs(l)&&(u-=l)}return LC(i.left,i.top,a,u)}(t):jC);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),UC=function(t,e){var n=function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,s=Object.create(o.prototype);return NC(s,{x:e,y:n,width:r,height:i,top:n,right:e+r,bottom:i+n,left:e}),s}(e);NC(this,{target:t,contentRect:n})},FC=function(){function t(t,e,n){if(this.activeObservations_=[],this.observations_=new EC,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof RC(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new VC(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof RC(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map(function(t){return new UC(t.target,t.broadcastRect())});this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),qC="undefined"!=typeof WeakMap?new WeakMap:new EC,BC=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=kC.getInstance(),r=new FC(e,n,this);qC.set(this,r)};["observe","unobserve","disconnect"].forEach(function(t){BC.prototype[t]=function(){var e;return(e=qC.get(this))[t].apply(e,arguments)}});var HC=void 0!==TC.ResizeObserver?TC.ResizeObserver:BC;function zC(t,e){if(1&t){const t=r.Ob();r.Nb(0,"tr"),r.Nb(1,"td",1),r.Ub("click",function(){r.bc(t);const e=r.Wb(2);return e.onNewSpeciality(e.filterTerm)}),r.fc(2," Agregar especialidad "),r.Mb(),r.Mb()}}function GC(t,e){if(1&t){const t=r.Ob();r.Nb(0,"tr",1),r.Ub("click",function(){r.bc(t);const n=e.$implicit;return r.Wb(2).onSpecialitySelection(n)}),r.Nb(1,"td"),r.fc(2),r.Mb(),r.Mb()}if(2&t){const t=e.$implicit;r.Ab(2),r.gc(" ",t.name," ")}}function KC(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div"),r.Nb(1,"div"),r.Nb(2,"div"),r.Nb(3,"table"),r.Nb(4,"tbody"),r.ec(5,zC,3,0,"tr",3),r.ec(6,GC,3,1,"tr",4),r.Lb(7,"tr"),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Nb(8,"input",5),r.Ub("ngModelChange",function(e){return r.bc(t),r.Wb().filterTerm=e}),r.Mb(),r.Mb()}if(2&t){const t=r.Wb();r.Ab(5),r.Xb("ngIf",!t.filtered.length),r.Ab(1),r.Xb("ngForOf",t.filtered),r.Ab(2),r.Xb("ngModel",t.filterTerm)}}let WC=(()=>{class t{constructor(t,e){this.ss=t,this.el=e,this.showList=!1,this.top="",this.width="",this.resizeObservable$=new It.a,this.resizeSubscription$=new we.a,this.value="",this.specialities=[],this.filtered=[],this._filterTerm=""}documentClick(t){!this.el.nativeElement.contains(t.target)&&this.showList&&(this.showList=!1)}get filterTerm(){return this._filterTerm}set filterTerm(t){this._filterTerm=t,this.filtered=this.filterTerm?this.performFilter(this._filterTerm):this.specialities}writeValue(t){this.value=t}registerOnChange(t){this.onChange=t}registerOnTouched(t){}setDisabledState(t){let e=this.el.nativeElement.getElementsByTagName("input")[0],n=this.el.nativeElement.getElementsByTagName("button")[0];t?(e.setAttribute("disabled","true"),n.setAttribute("disabled","true")):(e.removeAttribute("disabled"),n.removeAttribute("disabled"))}ngOnInit(){this.initSpecialitiesList()}initSpecialitiesList(){this.ss.getSpecialities().subscribe({next:t=>{this.specialities=t,this.filtered=t},error:t=>console.log(t)})}onSpecialitySelection(t){this.value=t.name,this.onChange(this.value),this.showList=!1}onShowList(){new HC(t=>{let e=this.el.nativeElement.getElementsByTagName("div")[0],n=this.el.nativeElement.getElementsByTagName("input")[0],r=this.el.nativeElement.getElementsByTagName("button")[0],i=n.getBoundingClientRect();r.getBoundingClientRect(),t.forEach(()=>{e&&(e.style.width=`${i.width}px`,e.style.top=`${i.top+i.height}px`)})}).observe(this.el.nativeElement.getElementsByTagName("input")[0]),this.showList=!this.showList}onNewSpeciality(t){const e={name:t,isActive:!0};this.ss.addSpeciality(e),this.onSpecialitySelection(e)}performFilter(t){return t=t.toLocaleLowerCase(),this.specialities.filter(e=>-1!==e.name.toLocaleLowerCase().indexOf(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(CC),r.Kb(r.l))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-speciality-selector"]],hostBindings:function(t,e){1&t&&r.Ub("click",function(t){return e.documentClick(t)},!1,r.ac)},inputs:{specialities:"specialities",filtered:"filtered"},features:[r.zb([{provide:_i,useExisting:t,multi:!0}])],decls:4,vars:2,consts:[["type","text","readonly","","name","speciality",3,"ngModel","ngModelChange"],[3,"click"],[1,"fas","fa-caret-down"],[4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],["type","text","placeholder","filter here ... ",2,"flex","1",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(r.Nb(0,"input",0),r.Ub("ngModelChange",function(t){return e.value=t}),r.Mb(),r.Nb(1,"button",1),r.Ub("click",function(){return e.onShowList()}),r.Lb(2,"i",2),r.Mb(),r.ec(3,KC,9,3,"div",3)),2&t&&(r.Xb("ngModel",e.value),r.Ab(3),r.Xb("ngIf",e.showList&&e.specialities))},directives:[Ei,Qi,So,j,N],styles:["[_nghost-%COMP%]{display:grid;grid-template-columns:auto 25px;grid-template-rows:auto auto}input[type=text][_ngcontent-%COMP%]{grid-column:1;grid-row:1;flex:1;border:0;border-top:1px solid grey;height:23px}[_nghost-%COMP%] > input[type=text][_ngcontent-%COMP%]{height:23px;border:1px solid grey;border-top-left-radius:2px;border-bottom-left-radius:2px}[_nghost-%COMP%] > input[type=text][_ngcontent-%COMP%]:focus{outline:0}button[_ngcontent-%COMP%]{background-color:#fff;border:1px solid grey;border-left:none;border-top-right-radius:2px;border-bottom-right-radius:2px;width:100%}button[_ngcontent-%COMP%]:focus{outline:0}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{max-height:91px;border:1px solid grey;background-color:#f5f5f5;position:absolute;display:flex;flex-direction:column;padding:0}[_nghost-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{max-height:100%;width:100%;overflow:auto}table[_ngcontent-%COMP%]{background-color:#fff;border-collapse:collapse;height:100%}table[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%]{table-layout:fixed!important;width:100%}tbody[_ngcontent-%COMP%]{overflow-y:scroll}tr[_ngcontent-%COMP%]{table-layout:fixed!important}tr[_ngcontent-%COMP%]:hover{background-color:#2e759b}td[_ngcontent-%COMP%]{vertical-align:middle;overflow:hidden;text-rendering:auto;color:-internal-light-dark(#000,#fff);letter-spacing:normal;word-spacing:normal;text-transform:none;text-indent:0;text-shadow:none;background-color:-internal-light-dark(#fff,#3b3b3b);margin:0;font:400 13.3333px Arial;padding:1px 2px;table-layout:fixed!important}td[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-last-child(){justify-content:flex-end}img[_ngcontent-%COMP%]{margin-left:auto;margin-right:2px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px;height:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#63d5e9}[_ngcontent-%COMP%]::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3)}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.5)}"]}),t})();function $C(t,e){1&t&&r.Lb(0,"app-prompt",26),2&t&&r.Xb("@prompt",void 0)}const QC=function(t,e){return{"is-invalid":t,"is-valid":e}},XC=function(t,e){return{"invalid-feedback":t,"valid-feedback":e}};let YC=(()=>{class t{constructor(t,e,n,r,i,o){this.fb=t,this.pv=e,this.ss=n,this.ms=r,this._loading=i,this.router=o,this.prompt=!1,this.subscriptions=[],this.controlNames=["firstname","lastname","dni","age","speciality","photo01","username","passwordGroup","passwordGroup.password","passwordGroup.confirm"],this.pictures=[],this.states={firstname:{message:"",class:""},lastname:{message:"",class:""},dni:{message:"",class:""},age:{message:"",class:""},username:{message:"",class:""},password:{message:"",class:""},confirm:{message:"",class:""},obrasocial:{message:"",class:""},speciality:{message:"",class:""},passwordGroup:{message:"",class:""},photo01:{message:"",class:""}}}setMessage(t,e){if(this.pv.clearState(this.states,e),t.errors&&(t.touched||t.dirty)){let n=Object.keys(t.errors)[0];this.pv.setState(this.states,e,this.pv.getState(n))}t.errors||!t.touched&&!t.dirty||this.pv.setState(this.states,e,this.pv.getState("succeeded"))}ngOnInit(){this.form=this.initForm(),this.watchForm(...this.controlNames)}initForm(){return this.fb.group({uid:[""],firstname:["",[ki.required,this.pv.validateNames]],lastname:["",[ki.required,this.pv.validateNames]],age:["",[ki.required,ki.min(0),ki.max(105),this.pv.validateAge]],username:["",[ki.required,ki.email]],passwordGroup:new vo({password:new bo("",[ki.required,ki.pattern(/^(?=[^a-zA-Z]*[a-zA-Z])(?=\D*\d).{8,}$/)]),confirm:new bo("")},this.pv.passwordCheck),dni:["",[ki.required,this.pv.validateDNI]],speciality:["",[ki.required]],photo01:["",[ki.required,this.pv.validateFileExtension]]})}watchForm(...t){t.map(t=>{const e=this.form.get(t);if(null!==e){const n=e.valueChanges.pipe(Zw(1e3)).subscribe(()=>{this.setMessage(e,t)});this.subscriptions.push(n)}})}check(t){const e=this.form.get(t);if(e.errors&&(e.touched||e.dirty))return e.errors}submit(){if(this.controlNames.map(t=>{const e=this.form.get(t);e.markAllAsTouched(),this.setMessage(e,t)}),"VALID"===this.form.status){const t={credentials:{username:this.form.get("username").value,password:this.form.get("passwordGroup.password").value},profile:{claims:{uid:"",username:this.form.get("username").value,firstname:this.form.get("firstname").value,lastname:this.form.get("lastname").value,roles:["user","specialist"],photoUrls:[],isActiveUser:!1},data:{firstname:this.form.get("firstname").value,lastname:this.form.get("lastname").value,age:this.form.get("age").value,dni:this.form.get("dni").value,speciality:this.form.get("speciality").value}}};this._loading.emitChange(!0),this.ss.registerSpecialist(t,this.pictures).then(t=>{const e={uid:t,email:this.form.get("username").value,subject:"Activacion de usuario - Clinica OMED"};this.ms.sendMessage(e).subscribe(()=>{})}).finally(()=>{this._loading.emitChange(!1),alert("registro exitoso, contacte a un administrador para activar su cuenta."),this.router.navigate(["signin"])})}}onFileSelection01(t){1===t.target.files.length&&this.pictures.push({filename:t.target.files[0].name,stream:t.target.files[0],contentType:"image/jpeg"})}onFileSelection02(t){1===t.target.files.length&&this.pictures.push({filename:t.target.files[0].name,stream:t.target.files[0],contentType:"image/jpeg"})}auto(){var t,e,n;null===(t=this.form.get("username"))||void 0===t||t.patchValue(`test_${Date.now()}@user.com`),null===(e=this.form.get("passwordGroup.password"))||void 0===e||e.patchValue("123456Q!"),null===(n=this.form.get("passwordGroup.confirm"))||void 0===n||n.patchValue("123456Q!"),this.form.get("firstname").patchValue("John"),this.form.get("lastname").patchValue("Doe"),this.form.get("dni").patchValue("12345678"),this.form.get("age").patchValue("31"),this.form.get("speciality").patchValue("clinica"),this.form.get("photo01").patchValue(""),this.form.markAllAsTouched()}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(qo),r.Kb(u_),r.Kb(CC),r.Kb(yC),r.Kb($w),r.Kb(Qr))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-specialist-registration-form"]],decls:74,vars:83,consts:[["id","frm_patient","novalidate","",1,"needs-validation",3,"formGroup"],[1,"form-group","row"],[1,"col-md-12"],[1,"form-label"],[1,"input-group"],[1,"input-group-text"],[1,"fas","fa-envelope"],["type","text","placeholder","Email","formControlName","username",1,"form-control",3,"ngClass"],[3,"ngClass"],["formGroupName","passwordGroup",1,"form-group","row"],[1,"col-md-6"],[1,"fas","fa-key"],["type","password","placeholder","Clave","formControlName","password",1,"form-control",3,"ngClass"],["type","password","placeholder","Clave","formControlName","confirm",1,"form-control",3,"ngClass"],["type","text","formControlName","firstname",1,"form-control",3,"ngClass"],["type","text","formControlName","lastname",1,"form-control",3,"ngClass"],[1,"col-md-4"],["type","text","formControlName","dni",1,"form-control",3,"ngClass"],["type","text","formControlName","age",1,"form-control",3,"ngClass"],["formControlName","speciality"],["hidden","","type","text","formControlName","speciality",1,"form-control",3,"ngClass"],[1,"col-md-6",2,"display","flex","flex-direction","column"],["id","photo01","type","file","formControlName","photo01",1,"form-control",3,"ngClass","change"],["type","submit","value","Registrar",1,"btn","btn-primary",2,"margin-top","10px",3,"click"],[1,"btn","btn-primary",2,"margin","10px 0 0 10px",3,"click"],["style","z-index: 9000;",4,"ngIf"],[2,"z-index","9000"]],template:function(t,e){1&t&&(r.Nb(0,"form",0),r.Nb(1,"div",1),r.Nb(2,"div",2),r.Nb(3,"label",3),r.fc(4,"Email"),r.Mb(),r.Nb(5,"div",4),r.Nb(6,"span",5),r.Lb(7,"i",6),r.Mb(),r.Lb(8,"input",7),r.Nb(9,"div",8),r.fc(10),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Nb(11,"div",9),r.Nb(12,"div",10),r.Nb(13,"label",3),r.fc(14,"Clave"),r.Mb(),r.Nb(15,"div",4),r.Nb(16,"span",5),r.Lb(17,"i",11),r.Mb(),r.Lb(18,"input",12),r.Nb(19,"div",8),r.fc(20),r.Mb(),r.Mb(),r.Mb(),r.Nb(21,"div",10),r.Nb(22,"label",3),r.fc(23,"Confirmaci\xf3n de clave"),r.Mb(),r.Nb(24,"div",4),r.Nb(25,"span",5),r.Lb(26,"i",11),r.Mb(),r.Lb(27,"input",13),r.Nb(28,"div",8),r.fc(29),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Nb(30,"div",1),r.Nb(31,"div",10),r.Nb(32,"label",3),r.fc(33,"Nombre"),r.Mb(),r.Lb(34,"input",14),r.Nb(35,"div",8),r.fc(36),r.Mb(),r.Mb(),r.Nb(37,"div",10),r.Nb(38,"label",3),r.fc(39,"Apellido"),r.Mb(),r.Lb(40,"input",15),r.Nb(41,"div",8),r.fc(42),r.Mb(),r.Mb(),r.Mb(),r.Nb(43,"div",1),r.Nb(44,"div",16),r.Nb(45,"label",3),r.fc(46,"DNI"),r.Mb(),r.Lb(47,"input",17),r.Nb(48,"div",8),r.fc(49),r.Mb(),r.Mb(),r.Nb(50,"div",16),r.Nb(51,"label",3),r.fc(52,"Edad"),r.Mb(),r.Lb(53,"input",18),r.Nb(54,"div",8),r.fc(55),r.Mb(),r.Mb(),r.Nb(56,"div",16),r.Nb(57,"label",3),r.fc(58,"Especialidad"),r.Mb(),r.Lb(59,"app-speciality-selector",19),r.Lb(60,"input",20),r.Nb(61,"div",8),r.fc(62),r.Mb(),r.Mb(),r.Mb(),r.Nb(63,"div",1),r.Nb(64,"div",21),r.Nb(65,"label",3),r.fc(66,"Foto 01:"),r.Mb(),r.Nb(67,"input",22),r.Ub("change",function(t){return e.onFileSelection01(t)}),r.Mb(),r.Nb(68,"div",8),r.fc(69),r.Mb(),r.Mb(),r.Mb(),r.Nb(70,"input",23),r.Ub("click",function(){return e.submit()}),r.Mb(),r.Nb(71,"button",24),r.Ub("click",function(){return e.auto()}),r.fc(72,"Auto"),r.Mb(),r.Mb(),r.ec(73,$C,1,1,"app-prompt",25)),2&t&&(r.Xb("formGroup",e.form),r.Ab(8),r.Xb("ngClass",r.Yb(29,QC,"INVALID"===e.states.username.class,"VALID"===e.states.username.class)),r.Ab(1),r.Xb("ngClass",r.Yb(32,XC,"INVALID"===e.states.username.class,"VALID"===e.states.username.class)),r.Ab(1),r.gc(" ",e.states.username.message," "),r.Ab(8),r.Xb("ngClass",r.Yb(35,QC,"INVALID"===e.states.password.class,"VALID"===e.states.password.class)),r.Ab(1),r.Xb("ngClass",r.Yb(38,XC,"INVALID"===e.states.password.class,"VALID"===e.states.password.class)),r.Ab(1),r.gc(" ",e.states.password.message," "),r.Ab(7),r.Xb("ngClass",r.Yb(41,QC,"INVALID"===e.states.passwordGroup.class&&e.form.get("passwordGroup.confirm").dirty,"VALID"===e.states.passwordGroup.class&&e.form.get("passwordGroup.confirm").dirty)),r.Ab(1),r.Xb("ngClass",r.Yb(44,XC,"INVALID"===e.states.passwordGroup.class&&e.form.get("passwordGroup.confirm").dirty,"VALID"===e.states.passwordGroup.class&&e.form.get("passwordGroup.confirm").dirty)),r.Ab(1),r.gc(" ",e.form.get("passwordGroup.confirm").dirty?e.states.passwordGroup.message:""," "),r.Ab(5),r.Xb("ngClass",r.Yb(47,QC,"INVALID"===e.states.firstname.class,"VALID"===e.states.firstname.class)),r.Ab(1),r.Xb("ngClass",r.Yb(50,XC,"INVALID"===e.states.firstname.class,"VALID"===e.states.firstname.class)),r.Ab(1),r.gc(" ",e.states.firstname.message," "),r.Ab(4),r.Xb("ngClass",r.Yb(53,QC,"INVALID"===e.states.lastname.class,"VALID"===e.states.lastname.class)),r.Ab(1),r.Xb("ngClass",r.Yb(56,XC,"INVALID"===e.states.lastname.class,"VALID"===e.states.lastname.class)),r.Ab(1),r.gc(" ",e.states.lastname.message," "),r.Ab(5),r.Xb("ngClass",r.Yb(59,QC,"INVALID"===e.states.dni.class,"VALID"===e.states.dni.class)),r.Ab(1),r.Xb("ngClass",r.Yb(62,XC,"INVALID"===e.states.dni.class,"VALID"===e.states.dni.class)),r.Ab(1),r.gc(" ",e.states.dni.message," "),r.Ab(4),r.Xb("ngClass",r.Yb(65,QC,"INVALID"===e.states.age.class,"VALID"===e.states.age.class)),r.Ab(1),r.Xb("ngClass",r.Yb(68,XC,"INVALID"===e.states.age.class,"VALID"===e.states.age.class)),r.Ab(1),r.gc(" ",e.states.age.message," "),r.Ab(5),r.Xb("ngClass",r.Yb(71,QC,"INVALID"===e.states.speciality.class,"VALID"===e.states.speciality.class)),r.Ab(1),r.Xb("ngClass",r.Yb(74,XC,"INVALID"===e.states.speciality.class,"VALID"===e.states.speciality.class)),r.Ab(1),r.gc(" ",e.states.speciality.message," "),r.Ab(5),r.Xb("ngClass",r.Yb(77,QC,"INVALID"===e.states.photo01.class,"VALID"===e.states.photo01.class)),r.Ab(1),r.Xb("ngClass",r.Yb(80,XC,"INVALID"===e.states.photo01.class,"VALID"===e.states.photo01.class)),r.Ab(1),r.gc(" ",e.states.photo01.message," "),r.Ab(4),r.Xb("ngIf",e.prompt))},directives:[To,Xi,ko,Ei,Qi,Lo,A,Ro,WC,j,bC],styles:["","#frm_patient[_ngcontent-%COMP%] {\n      border-left: 1px solid rgb(222, 226, 230);\n      border-right: 1px solid rgb(222, 226, 230);\n      border-bottom: 1px solid rgb(222, 226, 230);\n      border-bottom-left-radius: 5px;\n      border-bottom-right-radius: 5px;\n      padding: 15px;\n    }\n  \n    .row[_ngcontent-%COMP%] {\n      margin-bottom: 20px;\n    }"]}),t})(),ZC=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-admin-registration-form"]],decls:2,vars:0,template:function(t,e){1&t&&(r.Nb(0,"p"),r.fc(1,"admin-registration-form works!"),r.Mb())},styles:[""]}),t})();const JC=[{path:"home",component:bi},{path:"signin",component:Yw},{path:"signup",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-signup"]],decls:18,vars:0,consts:[["id","header"],["id","tab_container"],["id","nav-tab","role","tablist",1,"nav","nav-tabs"],["id","nav-home-tab","data-bs-toggle","tab","data-bs-target","#nav-home","type","button","role","tab","aria-controls","nav-home","aria-selected","true",1,"nav-link","active"],["id","nav-profile-tab","data-bs-toggle","tab","data-bs-target","#nav-profile","type","button","role","tab","aria-controls","nav-profile","aria-selected","false",1,"nav-link"],["id","nav-tabContent",1,"tab-content"],["id","nav-home","role","tabpanel","aria-labelledby","nav-home-tab",1,"tab-pane","fade","show","active"],["id","nav-profile","role","tabpanel","aria-labelledby","nav-profile-tab",1,"tab-pane","fade"]],template:function(t,e){1&t&&(r.Nb(0,"h2",0),r.fc(1,"Alta Usuarios - Clinica OMED"),r.Mb(),r.Nb(2,"div",1),r.Nb(3,"nav"),r.Nb(4,"div",2),r.Nb(5,"button",3),r.fc(6,"Pacientes"),r.Mb(),r.Nb(7,"button",4),r.fc(8,"Especialistas"),r.Mb(),r.Nb(9,"button",4),r.fc(10,"Administradores"),r.Mb(),r.Mb(),r.Mb(),r.Nb(11,"div",5),r.Nb(12,"div",6),r.Lb(13,"app-patient-registration-form"),r.Mb(),r.Nb(14,"div",7),r.Lb(15,"app-specialist-registration-form"),r.Nb(16,"div",7),r.Lb(17,"app-admin-registration-form"),r.Mb(),r.Mb(),r.Mb(),r.Mb())},directives:[OC,YC,ZC],styles:["","[_nghost-%COMP%] {\n        display: grid;\n        grid-template-rows: 100px 600px auto;\n        grid-template-columns: auto 800px auto;\n    }\n\n    #tab_container[_ngcontent-%COMP%] {\n        grid-row: 2;\n        grid-column: 2;\n    }\n\n    #header[_ngcontent-%COMP%] {\n        grid-row: 1;\n        grid-column: 2;\n        margin:auto;\n    }"]}),t})()}];let tE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({imports:[[ci.forRoot(JC)],ci]}),t})();function eE(t,e){1&t&&r.Lb(0,"span",2)}let nE=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-spinner"]],decls:2,vars:1,consts:[[1,"spinner-container"],["class","fa fa-spinner spinner",4,"ngIf"],[1,"fa","fa-spinner","spinner"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.ec(1,eE,1,0,"span",1),r.Mb()),2&t&&(r.Ab(1),r.Xb("ngIf",!0))},directives:[j],styles:[".spinner-container[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;z-index:10;background-color:rgba(30,30,30,.2)}.spinner[_ngcontent-%COMP%]{position:relative;font-size:300%;top:50%;left:50%}.fa-spinner[_ngcontent-%COMP%]{animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0deg);color:rgba(255,0,0,.8)}to{color:rgba(93,0,255,.2);transform:rotate(359deg)}}"]}),t})(),rE=(()=>{class t{constructor(){this.show=new wt(!0),this.show$=this.show.asObservable()}hide(t){this.show.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function iE(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",4),r.Ub("click",function(){return r.bc(t),r.Wb().goToSigninPage()}),r.fc(1," Login "),r.Lb(2,"img",10),r.Mb()}}function oE(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",4),r.Ub("click",function(){return r.bc(t),r.Wb().signout()}),r.fc(1," Logout "),r.Lb(2,"img",10),r.Mb()}}function sE(t,e){if(1&t&&(r.Nb(0,"p"),r.fc(1),r.Mb()),2&t){const t=r.Wb();r.Ab(1),r.hc("Bienvenido ",null==t.user?null:t.user.firstname," ",null==t.user?null:t.user.lastname,"")}}let aE=(()=>{class t{constructor(t,e,n){this.router=t,this.eventService=e,this.auth=n,this.logged=!1,this.user=null}ngOnInit(){this.user=JSON.parse(localStorage.getItem("userCredentials")),this.user?(this.logged=!0,console.log(this.logged)):this.user=null,this.auth.logged$.subscribe(t=>{t?(this.user=JSON.parse(localStorage.getItem("userCredentials")),this.logged=!0):(this.logged=!1,this.user=null)})}goToSigninPage(){this.router.navigate(["signin"]),this.eventService.hide(!1)}goToSignupPage(){this.router.navigate(["signup"]),this.eventService.hide(!1)}signout(){this.auth.signOut()}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Qr),r.Kb(rE),r.Kb(Kw))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-top-nav"]],decls:12,vars:3,consts:[["id","nav"],["id","btn_sidenav",1,"my_btn"],[1,"fas","fa-bars","fa-1x"],["id","btn_signin","class","my_btn","style","width:100px !important;",3,"click",4,"ngIf"],["id","btn_signin",1,"my_btn",2,"width","100px !important",3,"click"],[1,"fas","fa-user-plus"],["id","mid_bar"],[4,"ngIf"],["id","btn_home","routerLink","home",1,"my_btn"],["src","./../../../../assets/logo.png",2,"height","42px"],["src","./../../../../assets/users.png",2,"height","20px"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Nb(1,"div",1),r.Lb(2,"i",2),r.Mb(),r.ec(3,iE,3,0,"div",3),r.ec(4,oE,3,0,"div",3),r.Nb(5,"div",4),r.Ub("click",function(){return e.goToSignupPage()}),r.fc(6," Registro "),r.Lb(7,"i",5),r.Mb(),r.Nb(8,"div",6),r.ec(9,sE,2,2,"p",7),r.Mb(),r.Nb(10,"div",8),r.Lb(11,"img",9),r.Mb(),r.Mb()),2&t&&(r.Ab(3),r.Xb("ngIf",!e.logged),r.Ab(1),r.Xb("ngIf",e.logged),r.Ab(5),r.Xb("ngIf",e.user))},directives:[j,Xr],styles:["[_nghost-%COMP%]{grid-column:1/span 2;grid-row:1}","#nav[_ngcontent-%COMP%] {\n        display: flex;\n        flex-direction: row-reverse;\n        align-items: flex-end;\n        height: 58px;\n        background-color: whitesmoke;\n        box-shadow: 0px 2px rgba(30,30,30,.2);\n    }\n\n    #btn_signin[_ngcontent-%COMP%] {\n        align-self: flex-start;\n        margin: auto 5px auto 5px;\n        padding: 5px;\n        height: 58px;\n        width: 58px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n\n    #btn_sidenav[_ngcontent-%COMP%] {\n        align-self: flex-start;\n        margin: auto 5px auto 5px;\n        padding: 5px;\n        height: 58px;\n        width: 58px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n\n    #mid_bar[_ngcontent-%COMP%] {\n        margin: auto;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n    }\n\n    #btn_nav[_ngcontent-%COMP%] {\n        align-self: flex-start;\n        margin: auto 5px auto 5px;\n        padding: 5px;\n        border-radius: 50%;\n    }\n\n    #btn_home[_ngcontent-%COMP%] {\n        align-self: flex-start;\n        margin: auto 5px auto 5px;\n    }\n\n    .my_btn[_ngcontent-%COMP%] {\n        font-weight: 400;\n        line-height: 1.5;\n        text-align: center;\n        text-decoration: none;\n        vertical-align: middle;\n        cursor: pointer;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        user-select: none;\n        background-color: whitesmoke;\n        border: 1px solid transparent;\n        padding: 0.375rem 0.75rem;\n        font-size: 1rem;\n        transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n        outline: none;\n    }\n\n    .my_btn[_ngcontent-%COMP%]:hover {\n        background-color: rgb(228, 228, 228);\n    }\n\n    .my_btn[_ngcontent-%COMP%]:focus {\n        color: #fff;\n        background-color: whitesmoke;\n        background-color: rgba(245, 245, 245, 0.825);\n    }\n\n    .my_btn[_ngcontent-%COMP%]:active, .my_btn.active[_ngcontent-%COMP%] {\n        background-color: rgb(255, 255, 255);\n    }"]}),t})();function uE(t,e){1&t&&r.Lb(0,"app-spinner")}function cE(t,e){1&t&&r.Lb(0,"app-top-nav")}let lE=(()=>{class t{constructor(t,e){this._loading=t,this._logged=e,this.title="mguelpa-lab-iv-workspace",this.showTopNav=!0,this.enableSideNav=!1,this.loading=!1,this.logged=!1,this.isOpen=!1,t.changeEmitted$.subscribe(t=>{this.loading=t}),e.changeEmitted$.subscribe(t=>{this.logged=t})}onEnableSideNav(t){this.enableSideNav=t,this.isOpen=t}}return t.\u0275fac=function(e){return new(e||t)(r.Kb($w),r.Kb(Ww))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-root"]],decls:4,vars:2,consts:[[4,"ngIf"],["id","container"]],template:function(t,e){1&t&&(r.ec(0,uE,1,0,"app-spinner",0),r.ec(1,cE,1,0,"app-top-nav",0),r.Nb(2,"div",1),r.Lb(3,"router-outlet"),r.Mb()),2&t&&(r.Xb("ngIf",e.loading),r.Ab(1),r.Xb("ngIf",e.showTopNav))},directives:[j,Jr,nE,aE],styles:["","[_nghost-%COMP%] {\n        display: grid;\n        grid-template-columns: 250px auto;\n        grid-template-rows: 60px auto;\n        height: 100%;\n    }\n    #container[_ngcontent-%COMP%] {\n        \n        grid-column: 1 / span 2;\n        grid-row: 2;\n    }"]}),t})();const hE={production:!0,apiKey:"AIzaSyBp1qEtkUusgKv1jPkPFv0bMifvdjoDU9U",authDomain:"mguelpa-lab-iv-tp-clinica.firebaseapp.com",projectId:"mguelpa-lab-iv-tp-clinica",storageBucket:"mguelpa-lab-iv-tp-clinica.appspot.com",messagingSenderId:"833475649362",appId:"1:833475649362:web:4d2b25e34469ddd214248b",measurementId:"G-L7P9FRJFF9"};let fE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t,bootstrap:[lE]}),t.\u0275inj=r.Hb({providers:[],imports:[[gt,tE,mC,Jo.a.initializeApp(hE),Gw,as,MO,Uo,Fo]]}),t})();hE.production&&Object(r.T)(),dt().bootstrapModule(fE).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.a)return t.subscribe(e);let n;try{n=Object(o.a)(t)(e)}catch(r){e.error(r)}return n}}},[[0,0]]]);